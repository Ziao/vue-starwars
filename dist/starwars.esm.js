var commonjsGlobal="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window;function commonjsRequire(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var p5_min=createCommonjsModule(function(e){var _=Math.abs,v=Math.ceil,S=Math.floor,T=Math.max,U=Math.min;!function(t){e.exports=t()}(function(){var t=Math.asin,r=Math.acos,x=Math.atan2,C=Math.atan,V=Math.tan,W=Math.sin,Y=Math.cos,X=Math.PI,Z=Math.sqrt,$=Math.round,ee=Math.log,te=Math.pow,ae=String.prototype,oe=String.fromCharCode,ne;return function t(r,a,o){function n(s,l){if(!a[s]){if(!r[s]){var p="function"==typeof commonjsRequire&&commonjsRequire;if(!l&&p)return p(s,!0);if(e)return e(s,!0);var i=new Error("Cannot find module '"+s+"'");throw i.code="MODULE_NOT_FOUND",i}var d=a[s]={exports:{}};r[s][0].call(d.exports,function(e){var t=r[s][1][e];return n(t||e)},d,d.exports,t,r,a,o)}return a[s].exports}for(var e="function"==typeof commonjsRequire&&commonjsRequire,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(e,t,r){!function(t){function r(t){var r=t.charCodeAt(0);return r===e||r===c?62:r===s||r===u?63:r<p?-1:r<p+10?r-p+26+26:r<i+26?r-i:r<d+26?r-d+26:void 0}function a(e){function t(e){u[y++]=e}var a,o,s,p,c,u;if(0<e.length%4)throw new Error("Invalid string. Length must be a multiple of 4");var m=e.length;c="="===e.charAt(m-2)?2:"="===e.charAt(m-1)?1:0,u=new n(3*e.length/4-c),s=0<c?e.length-4:e.length;var y=0;for(a=0,o=0;a<s;a+=4,o+=3)p=r(e.charAt(a))<<18|r(e.charAt(a+1))<<12|r(e.charAt(a+2))<<6|r(e.charAt(a+3)),t((16711680&p)>>16),t((65280&p)>>8),t(255&p);return 2===c?(p=r(e.charAt(a))<<2|r(e.charAt(a+1))>>4,t(255&p)):1==c&&(p=r(e.charAt(a))<<10|r(e.charAt(a+1))<<4|r(e.charAt(a+2))>>2,t(255&p>>8),t(255&p)),u}function o(t){function r(e){return"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e)}function a(e){return r(63&e>>18)+r(63&e>>12)+r(63&e>>6)+r(63&e)}var o=t.length%3,n="",i,s,l;for(i=0,l=t.length-o;i<l;i+=3)s=(t[i]<<16)+(t[i+1]<<8)+t[i+2],n+=a(s);return 1==o?(s=t[t.length-1],n+=r(s>>2),n+=r(63&s<<4),n+="=="):2==o?(s=(t[t.length-2]<<8)+t[t.length-1],n+=r(s>>10),n+=r(63&s>>4),n+=r(63&s<<2),n+="="):void 0,n}var n="undefined"==typeof Uint8Array?Array:Uint8Array,e=43,s=47,p=48,d=97,i=65,c=45,u=95;t.toByteArray=a,t.fromByteArray=o}(void 0===r?this.base64js={}:r)},{}],2:[function(){},{}],3:[function(d,e,ee){(function(a){function c(){return re.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function re(t){return this instanceof re?(re.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?e(this,t):"string"==typeof t?g(this,t,1<arguments.length?arguments[1]:"utf8"):h(this,t)):1<arguments.length?new re(t,arguments[1]):new re(t)}function e(e,t){if(e=o(e,0>t?0:0|p(t)),!re.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;r++)e[r]=0;return e}function g(e,t,n){return"string"==typeof n&&""!==n||(n="utf8"),e=o(e,0|r(t,n)),e.write(t,n),e}function h(e,t){if(re.isBuffer(t))return i(e,t);if(X(t))return f(e,t);if(null==t)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(t.buffer instanceof ArrayBuffer)return k(e,t);if(t instanceof ArrayBuffer)return l(e,t)}return t.length?m(e,t):n(e,t)}function i(e,t){var r=0|p(t.length);return e=o(e,r),t.copy(e,0,0,r),e}function f(e,t){var r=0|p(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function k(e,t){var r=0|p(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function l(e,t){return re.TYPED_ARRAY_SUPPORT?(t.byteLength,e=re._augment(new Uint8Array(t))):e=k(e,new Uint8Array(t)),e}function m(e,t){var r=0|p(t.length);e=o(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function n(t,r){var n=0,i;"Buffer"===r.type&&X(r.data)&&(i=r.data,n=0|p(i.length)),t=o(t,n);for(var s=0;s<n;s+=1)t[s]=255&i[s];return t}function o(e,t){return re.TYPED_ARRAY_SUPPORT?(e=re._augment(new Uint8Array(t)),e.__proto__=re.prototype):(e.length=t,e._isBuffer=!0),0!==t&&t<=re.poolSize>>>1&&(e.parent=Y),e}function p(e){if(e>=c())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+c().toString(16)+" bytes");return 0|e}function j(e,t){if(!(this instanceof j))return new j(e,t);var r=new re(e,t);return delete r.parent,r}function r(e,t){"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var o=!1;;)switch(t){case"ascii":case"binary":case"raw":case"raws":return r;case"utf8":case"utf-8":return N(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return J(e).length;default:if(o)return N(e).length;t=(""+t).toLowerCase(),o=!0;}}function s(e,t,r){var o=!1;if(t|=0,r=void 0===r||r===1/0?this.length:0|r,e||(e="utf8"),0>t&&(t=0),r>this.length&&(r=this.length),r<=t)return"";for(;;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return A(this,t,r);case"ascii":return C(this,t,r);case"binary":return D(this,t,r);case"base64":return z(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0;}}function t(t,r,a,o){a=+a||0;var n=t.length-a;o?(o=+o)>n&&(o=n):o=n;var e=r.length;if(0!=e%2)throw new Error("Invalid hex string");o>e/2&&(o=e/2);for(var i=0,s;i<o;i++){if(s=parseInt(r.substr(2*i,2),16),isNaN(s))throw new Error("Invalid hex string");t[a+i]=s}return i}function u(e,t,r,a){return ne(N(t,e.length-r),e,r,a)}function v(e,t,r,a){return ne(R(t),e,r,a)}function w(e,t,r,a){return v(e,t,r,a)}function x(e,t,r,a){return ne(J(t),e,r,a)}function y(e,t,r,a){return ne(Q(t,e.length-r),e,r,a)}function z(e,t,r){return 0===t&&r===e.length?V.fromByteArray(e):V.fromByteArray(e.slice(t,r))}function A(t,r,a){a=U(t.length,a);for(var o=[],n=r;n<a;){var s=t[n],p=null,d=239<s?4:223<s?3:191<s?2:1;if(n+d<=a){var u,m,y,f;1==d?128>s&&(p=s):2==d?(u=t[n+1],128==(192&u)&&127<(f=(31&s)<<6|63&u)&&(p=f)):3==d?(u=t[n+1],m=t[n+2],128==(192&u)&&128==(192&m)&&2047<(f=(15&s)<<12|(63&u)<<6|63&m)&&(55296>f||57343<f)&&(p=f)):4==d?(u=t[n+1],m=t[n+2],y=t[n+3],128==(192&u)&&128==(192&m)&&128==(192&y)&&65535<(f=(15&s)<<18|(63&u)<<12|(63&m)<<6|63&y)&&1114112>f&&(p=f)):void 0}null===p?(p=65533,d=1):65535<p&&(p-=65536,o.push(55296|1023&p>>>10),p=56320|1023&p),o.push(p),n+=d}return B(o)}function B(e){var t=e.length;if(t<=Z)return oe.apply(String,e);for(var r="",a=0;a<t;)r+=oe.apply(String,e.slice(a,a+=Z));return r}function C(t,r,a){var o="";a=U(t.length,a);for(var n=r;n<a;n++)o+=oe(127&t[n]);return o}function D(t,r,a){var o="";a=U(t.length,a);for(var n=r;n<a;n++)o+=oe(t[n]);return o}function E(t,r,a){var o=t.length;(!r||0>r)&&(r=0),(!a||0>a||a>o)&&(a=o);for(var n="",i=r;i<a;i++)n+=P(t[i]);return n}function F(t,r,a){for(var o=t.slice(r,a),n="",i=0;i<o.length;i+=2)n+=oe(o[i]+256*o[i+1]);return n}function G(e,t,r){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function H(t,r,a,o,n,e){if(!re.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(r>n||r<e)throw new RangeError("value is out of bounds");if(a+o>t.length)throw new RangeError("index out of range")}function I(t,r,a,o){0>r&&(r=65535+r+1);for(var n=0,i=U(t.length-a,2);n<i;n++)t[a+n]=(r&255<<8*(o?n:1-n))>>>8*(o?n:1-n)}function q(t,r,a,o){0>r&&(r=4294967295+r+1);for(var n=0,i=U(t.length-a,4);n<i;n++)t[a+n]=255&r>>>8*(o?n:3-n)}function K(t,r,a,o,n,e){if(r>n||r<e)throw new RangeError("value is out of bounds");if(a+o>t.length)throw new RangeError("index out of range");if(0>a)throw new RangeError("index out of range")}function L(t,r,a,o,n){return n||K(t,r,a,4,34028234663852886e22,-34028234663852886e22),W.write(t,r,a,o,23,4),a+4}function M(t,r,a,o,n){return n||K(t,r,a,8,17976931348623157e292,-17976931348623157e292),W.write(t,r,a,o,52,8),a+8}function b(e){if(e=O(e).replace(_,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function O(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function P(e){return 16>e?"0"+e.toString(16):e.toString(16)}function N(t,r){r=r||1/0;for(var a=t.length,o=null,n=[],i=0,s;i<a;i++){if(55295<(s=t.charCodeAt(i))&&57344>s){if(!o){if(56319<s){-1<(r-=3)&&n.push(239,191,189);continue}if(i+1===a){-1<(r-=3)&&n.push(239,191,189);continue}o=s;continue}if(56320>s){-1<(r-=3)&&n.push(239,191,189),o=s;continue}s=65536+(o-55296<<10|s-56320)}else o&&-1<(r-=3)&&n.push(239,191,189);if(o=null,128>s){if(0>(r-=1))break;n.push(s)}else if(2048>s){if(0>(r-=2))break;n.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(r-=3))break;n.push(224|s>>12,128|63&s>>6,128|63&s)}else{if(!(1114112>s))throw new Error("Invalid code point");if(0>(r-=4))break;n.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}}return n}function R(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function Q(t,r){for(var a=[],o=0,n,i,s;o<t.length&&!(0>(r-=2));o++)n=t.charCodeAt(o),i=n>>8,s=n%256,a.push(s),a.push(i);return a}function J(e){return V.toByteArray(b(e))}function ne(t,r,a,o){for(var n=0;n<o&&!(n+a>=r.length||n>=t.length);n++)r[n+a]=t[n];return n}var V=d("base64-js"),W=d("ieee754"),X=d("isarray");ee.Buffer=re,ee.SlowBuffer=j,ee.INSPECT_MAX_BYTES=50,re.poolSize=8192;var Y={};re.TYPED_ARRAY_SUPPORT=void 0===a.TYPED_ARRAY_SUPPORT?function(){function e(){}try{var t=new Uint8Array(1);return t.foo=function(){return 42},t.constructor=e,42===t.foo()&&t.constructor===e&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}():a.TYPED_ARRAY_SUPPORT,re.TYPED_ARRAY_SUPPORT?(re.prototype.__proto__=Uint8Array.prototype,re.__proto__=Uint8Array):(re.prototype.length=void 0,re.prototype.parent=void 0),re.isBuffer=function(e){return null!=e&&e._isBuffer},re.compare=function(t,r){if(!re.isBuffer(t)||!re.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var a=t.length,o=r.length,n=0,i=U(a,o);n<i&&t[n]===r[n];)++n;return n!==i&&(a=t[n],o=r[n]),a<o?-1:o<a?1:0},re.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},re.concat=function(t,r){if(!X(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new re(0);var a;if(void 0===r)for(r=0,a=0;a<t.length;a++)r+=t[a].length;var o=new re(r),n=0;for(a=0;a<t.length;a++){var i=t[a];i.copy(o,n),n+=i.length}return o},re.byteLength=r,re.prototype.toString=function(){var e=0|this.length;return 0==e?"":0===arguments.length?A(this,0,e):s.apply(this,arguments)},re.prototype.equals=function(e){if(!re.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===re.compare(this,e)},re.prototype.inspect=function(){var e="",t=ee.INSPECT_MAX_BYTES;return 0<this.length&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},re.prototype.compare=function(e){if(!re.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:re.compare(this,e)},re.prototype.indexOf=function(e,t){function r(t,r,a){for(var o=-1,n=0;a+n<t.length;n++)if(!(t[a+n]===r[-1==o?0:n-o]))o=-1;else if(-1==o&&(o=n),n-o+1===r.length)return a+o;return-1}if(2147483647<t?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=T(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:ae.indexOf.call(this,e,t);if(re.isBuffer(e))return r(this,e,t);if("number"==typeof e)return re.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):r(this,[e],t);throw new TypeError("val must be string, number or Buffer")},re.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},re.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},re.prototype.write=function(r,a,o,n){if(void 0===a)n="utf8",o=this.length,a=0;else if(void 0===o&&"string"==typeof a)n=a,o=this.length,a=0;else if(isFinite(a))a|=0,isFinite(o)?(o|=0,void 0===n&&(n="utf8")):(n=o,o=void 0);else{var i=n;n=a,a=0|o,o=i}var e=this.length-a;if((void 0===o||o>e)&&(o=e),0<r.length&&(0>o||0>a)||a>this.length)throw new RangeError("attempt to write outside buffer bounds");n||(n="utf8");for(var s=!1;;)switch(n){case"hex":return t(this,r,a,o);case"utf8":case"utf-8":return u(this,r,a,o);case"ascii":return v(this,r,a,o);case"binary":return w(this,r,a,o);case"base64":return x(this,r,a,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,r,a,o);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0;}},re.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;re.prototype.slice=function(t,r){var o=this.length;t=~~t,r=void 0===r?o:~~r,0>t?0>(t+=o)&&(t=0):t>o&&(t=o),0>r?0>(r+=o)&&(r=0):r>o&&(r=o),r<t&&(r=t);var n;if(re.TYPED_ARRAY_SUPPORT)n=re._augment(this.subarray(t,r));else{var i=r-t;n=new re(i,void 0);for(var e=0;e<i;e++)n[e]=this[e+t]}return n.length&&(n.parent=this.parent||this),n},re.prototype.readUIntLE=function(t,r,o){t|=0,r|=0,o||G(t,r,this.length);for(var n=this[t],i=1,s=0;++s<r&&(i*=256);)n+=this[t+s]*i;return n},re.prototype.readUIntBE=function(t,r,o){t|=0,r|=0,o||G(t,r,this.length);for(var n=this[t+--r],i=1;0<r&&(i*=256);)n+=this[t+--r]*i;return n},re.prototype.readUInt8=function(e,t){return t||G(e,1,this.length),this[e]},re.prototype.readUInt16LE=function(e,t){return t||G(e,2,this.length),this[e]|this[e+1]<<8},re.prototype.readUInt16BE=function(e,t){return t||G(e,2,this.length),this[e]<<8|this[e+1]},re.prototype.readUInt32LE=function(e,t){return t||G(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},re.prototype.readUInt32BE=function(e,t){return t||G(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},re.prototype.readIntLE=function(t,r,o){t|=0,r|=0,o||G(t,r,this.length);for(var n=this[t],i=1,s=0;++s<r&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=te(2,8*r)),n},re.prototype.readIntBE=function(t,r,o){t|=0,r|=0,o||G(t,r,this.length);for(var n=r,i=1,s=this[t+--n];0<n&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=te(2,8*r)),s},re.prototype.readInt8=function(e,t){return t||G(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},re.prototype.readInt16LE=function(e,t){t||G(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt16BE=function(e,t){t||G(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},re.prototype.readInt32LE=function(e,t){return t||G(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},re.prototype.readInt32BE=function(e,t){return t||G(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},re.prototype.readFloatLE=function(e,t){return t||G(e,4,this.length),W.read(this,e,!0,23,4)},re.prototype.readFloatBE=function(e,t){return t||G(e,4,this.length),W.read(this,e,!1,23,4)},re.prototype.readDoubleLE=function(e,t){return t||G(e,8,this.length),W.read(this,e,!0,52,8)},re.prototype.readDoubleBE=function(e,t){return t||G(e,8,this.length),W.read(this,e,!1,52,8)},re.prototype.writeUIntLE=function(t,r,o,n){t=+t,r|=0,o|=0,n||H(this,t,r,o,te(2,8*o),0);var i=1,s=0;for(this[r]=255&t;++s<o&&(i*=256);)this[r+s]=255&t/i;return r+o},re.prototype.writeUIntBE=function(t,r,o,n){t=+t,r|=0,o|=0,n||H(this,t,r,o,te(2,8*o),0);var i=o-1,s=1;for(this[r+i]=255&t;0<=--i&&(s*=256);)this[r+i]=255&t/s;return r+o},re.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,1,255,0),re.TYPED_ARRAY_SUPPORT||(e=S(e)),this[t]=255&e,t+1},re.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},re.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,2,65535,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},re.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):q(this,e,t,!0),t+4},re.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,4,4294967295,0),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},re.prototype.writeIntLE=function(t,r,o,n){if(t=+t,r|=0,!n){var i=te(2,8*o-1);H(this,t,r,o,i-1,-i)}var e=0,s=1,l=0>t?1:0;for(this[r]=255&t;++e<o&&(s*=256);)this[r+e]=255&(t/s>>0)-l;return r+o},re.prototype.writeIntBE=function(t,r,o,n){if(t=+t,r|=0,!n){var i=te(2,8*o-1);H(this,t,r,o,i-1,-i)}var e=o-1,s=1,l=0>t?1:0;for(this[r+e]=255&t;0<=--e&&(s*=256);)this[r+e]=255&(t/s>>0)-l;return r+o},re.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,1,127,-128),re.TYPED_ARRAY_SUPPORT||(e=S(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},re.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):I(this,e,t,!0),t+2},re.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,2,32767,-32768),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):I(this,e,t,!1),t+2},re.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,4,2147483647,-2147483648),re.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):q(this,e,t,!0),t+4},re.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||H(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),re.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):q(this,e,t,!1),t+4},re.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},re.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},re.prototype.writeDoubleLE=function(e,t,r){return M(this,e,t,!0,r)},re.prototype.writeDoubleBE=function(e,t,r){return M(this,e,t,!1,r)},re.prototype.copy=function(t,r,a,o){if(a||(a=0),o||0===o||(o=this.length),r>=t.length&&(r=t.length),r||(r=0),0<o&&o<a&&(o=a),o===a)return 0;if(0===t.length||0===this.length)return 0;if(0>r)throw new RangeError("targetStart out of bounds");if(0>a||a>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-a&&(o=t.length-r+a);var n=o-a,i;if(this===t&&a<r&&r<o)for(i=n-1;0<=i;i--)t[i+r]=this[i+a];else if(1e3>n||!re.TYPED_ARRAY_SUPPORT)for(i=0;i<n;i++)t[i+r]=this[i+a];else t._set(this.subarray(a,a+n),r);return n},re.prototype.fill=function(t,r,o){if(t||(t=0),r||(r=0),o||(o=this.length),o<r)throw new RangeError("end < start");if(o!==r&&0!==this.length){if(0>r||r>=this.length)throw new RangeError("start out of bounds");if(0>o||o>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=r;n<o;n++)this[n]=t;else{var i=N(t.toString()),e=i.length;for(n=r;n<o;n++)this[n]=i[n%e]}return this}},re.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(re.TYPED_ARRAY_SUPPORT)return new re(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;t<r;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var $=re.prototype;re._augment=function(e){return e.constructor=re,e._isBuffer=!0,e._set=e.set,e.get=$.get,e.set=$.set,e.write=$.write,e.toString=$.toString,e.toLocaleString=$.toString,e.toJSON=$.toJSON,e.equals=$.equals,e.compare=$.compare,e.indexOf=$.indexOf,e.copy=$.copy,e.slice=$.slice,e.readUIntLE=$.readUIntLE,e.readUIntBE=$.readUIntBE,e.readUInt8=$.readUInt8,e.readUInt16LE=$.readUInt16LE,e.readUInt16BE=$.readUInt16BE,e.readUInt32LE=$.readUInt32LE,e.readUInt32BE=$.readUInt32BE,e.readIntLE=$.readIntLE,e.readIntBE=$.readIntBE,e.readInt8=$.readInt8,e.readInt16LE=$.readInt16LE,e.readInt16BE=$.readInt16BE,e.readInt32LE=$.readInt32LE,e.readInt32BE=$.readInt32BE,e.readFloatLE=$.readFloatLE,e.readFloatBE=$.readFloatBE,e.readDoubleLE=$.readDoubleLE,e.readDoubleBE=$.readDoubleBE,e.writeUInt8=$.writeUInt8,e.writeUIntLE=$.writeUIntLE,e.writeUIntBE=$.writeUIntBE,e.writeUInt16LE=$.writeUInt16LE,e.writeUInt16BE=$.writeUInt16BE,e.writeUInt32LE=$.writeUInt32LE,e.writeUInt32BE=$.writeUInt32BE,e.writeIntLE=$.writeIntLE,e.writeIntBE=$.writeIntBE,e.writeInt8=$.writeInt8,e.writeInt16LE=$.writeInt16LE,e.writeInt16BE=$.writeInt16BE,e.writeInt32LE=$.writeInt32LE,e.writeInt32BE=$.writeInt32BE,e.writeFloatLE=$.writeFloatLE,e.writeFloatBE=$.writeFloatBE,e.writeDoubleLE=$.writeDoubleLE,e.writeDoubleBE=$.writeDoubleBE,e.fill=$.fill,e.inspect=$.inspect,e.toArrayBuffer=$.toArrayBuffer,e};var _=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"==typeof commonjsGlobal?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:commonjsGlobal)},{"base64-js":1,ieee754:7,isarray:8}],4:[function(n,t,r){(function(d,e){!function(a,o){"object"==typeof r&&void 0!==t?t.exports=o():a.ES6Promise=o()}(this,function(){function h(e){var t=typeof e;return null!==e&&("object"==t||"function"==t)}function S(e){return"function"==typeof e}function a(){return void 0===G?i():function(){G(l)}}function i(){var e=setTimeout;return function(){return e(l,1)}}function l(){for(var e=0;e<U;e+=2)(0,Q[e])(Q[e+1]),Q[e]=void 0,Q[e+1]=void 0;U=0}function m(t,r){var o=arguments,n=this,i=new this.constructor(p);void 0===i[J]&&I(i);var e=n._state;return e?function(){var t=o[e-1];z(function(){return D(e,i,t,n._result)})}():k(n,i,t,r),i}function o(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(p);return x(r,e),r}function p(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function r(){return new TypeError("A promises callback cannot return that same promise.")}function s(e){try{return e.then}catch(e){return te.error=e,te}}function t(e,t,r,a){try{e.call(t,r,a)}catch(e){return e}}function c(e,r,o){z(function(n){var a=!1,i=t(o,r,function(e){a||(a=!0,r===e?w(n,e):x(n,e))},function(e){a||(a=!0,M(n,e))},"Settle: "+(n._label||" unknown promise"));!a&&i&&(a=!0,M(n,i))},e)}function u(e,t){t._state===$?w(e,t._result):t._state===ee?M(e,t._result):k(t,void 0,function(t){return x(e,t)},function(t){return M(e,t)})}function v(e,t,r){t.constructor===e.constructor&&r===m&&t.constructor.resolve===o?u(e,t):r===te?(M(e,te.error),te.error=null):void 0===r?w(e,t):S(r)?c(e,t,r):w(e,t)}function x(e,t){e===t?M(e,g()):h(t)?v(e,t,s(t)):w(e,t)}function y(e){e._onerror&&e._onerror(e._result),C(e)}function w(e,t){e._state===oe&&(e._result=t,e._state=$,0!==e._subscribers.length&&z(C,e))}function M(e,t){e._state===oe&&(e._state=ee,e._result=t,z(y,e))}function k(t,r,a,o){var n=t._subscribers,e=n.length;t._onerror=null,n[e]=r,n[e+$]=a,n[e+ee]=o,0===e&&t._state&&z(C,t)}function C(t){var r=t._subscribers,a=t._state;if(0!==r.length){for(var o=void 0,n=void 0,i=t._result,s=0;s<r.length;s+=3)o=r[s],n=r[s+a],o?D(a,o,n,i):n(i);t._subscribers.length=0}}function f(){this.error=null}function E(e,t){try{return e(t)}catch(e){return re.error=e,re}}function D(t,a,o,n){var e=S(o),s,l,p,d;if(!e)s=n,p=!0;else if(s=E(o,n),s===re?(d=!0,l=s.error,s.error=null):p=!0,a===s)return void M(a,r());a._state!==oe||(e&&p?x(a,s):d?M(a,l):t===$?w(a,s):t===ee&&M(a,s))}function b(e,t){try{t(function(t){x(e,t)},function(t){M(e,t)})}catch(t){M(e,t)}}function A(){return ae++}function I(e){e[J]=ae++,e._state=void 0,e._result=void 0,e._subscribers=[]}function O(e,t){this._instanceConstructor=e,this.promise=new e(p),this.promise[J]||I(this.promise),T(t)?(this.length=t.length,this._remaining=t.length,this._result=Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&w(this.promise,this._result))):M(this.promise,B())}function B(){return new Error("Array Methods must be provided an Array")}function L(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function P(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[J]=A(),this._result=this._state=void 0,this._subscribers=[],p!==e&&("function"!=typeof e&&L(),this instanceof F?b(this,e):P())}var R=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var T=R,U=0,G=void 0,N=void 0,z=function(e,t){Q[U]=e,Q[U+1]=t,2==(U+=2)&&(N?N(l):K())},H="undefined"==typeof window?void 0:window,j=H||{},q=j.MutationObserver||j.WebKitMutationObserver,_="undefined"==typeof self&&void 0!==d&&"[object process]"==={}.toString.call(d),Z="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=Array(1e3),K;K=_?function(){return function(){return d.nextTick(l)}}():q?function(){var e=0,t=new q(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}():Z?function(){var e=new MessageChannel;return e.port1.onmessage=l,function(){return e.port2.postMessage(0)}}():void 0===H&&"function"==typeof n?function(){try{var e=n("vertx");return G=e.runOnLoop||e.runOnContext,a()}catch(e){return i()}}():i();var J=Math.random().toString(36).substring(16),$=1,ee=2,te=new f,re=new f,ae=0,oe;return O.prototype._enumerate=function(e){for(var t=0;this._state===oe&&t<e.length;t++)this._eachEntry(e[t],t)},O.prototype._eachEntry=function(t,r){var a=this._instanceConstructor,n=a.resolve;if(n===o){var i=s(t);if(i===m&&t._state!==oe)this._settledAt(t._state,r,t._result);else if("function"!=typeof i)this._remaining--,this._result[r]=t;else if(a===F){var e=new a(p);v(e,t,i),this._willSettleAt(e,r)}else this._willSettleAt(new a(function(e){return e(t)}),r)}else this._willSettleAt(n(t),r)},O.prototype._settledAt=function(e,t,r){var a=this.promise;a._state===oe&&(this._remaining--,e===2?M(a,r):this._result[t]=r),0===this._remaining&&w(a,this._result)},O.prototype._willSettleAt=function(e,t){var r=this;k(e,void 0,function(e){return r._settledAt(1,t,e)},function(e){return r._settledAt(2,t,e)})},F.all=function(e){return new O(this,e).promise},F.race=function(t){var r=this;return new r(T(t)?function(a,o){for(var n=t.length,e=0;e<n;e++)r.resolve(t[e]).then(a,o)}:function(e,t){return t(new TypeError("You must pass an array to race."))})},F.resolve=o,F.reject=function(e){var t=this,r=new t(p);return M(r,e),r},F._setScheduler=function(e){N=e},F._setAsap=function(e){z=e},F._asap=z,F.prototype={constructor:F,then:m,catch:function(e){return this.then(null,e)}},F.polyfill=function(){var t;if(void 0!==e)t=e;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=t.Promise;if(r){var o=null;try{o=Object.prototype.toString.call(r.resolve())}catch(e){}if("[object Promise]"===o&&!r.cast)return}t.Promise=F},F.Promise=F,F})}).call(this,n("_process"),"undefined"==typeof commonjsGlobal?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:commonjsGlobal)},{_process:11}],5:[function(e,t,r){!function(a,o){if(void 0!==r&&void 0!==t)o(r,t);else{var e={exports:{}};o(e.exports,e),a.fetchJsonp=e.exports}}(this,function(t,r){function o(){return"jsonp_"+Date.now()+"_"+v(1e5*Math.random())}function n(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}function e(e){var t=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],r=e,a=t.timeout||s.timeout,p=t.jsonpCallback||s.jsonpCallback,d;return new Promise(function(s,c){var u=t.jsonpCallbackFunction||o(),l=p+"_"+u;window[u]=function(e){s({ok:!0,json:function(){return Promise.resolve(e)}}),d&&clearTimeout(d),i(l),n(u)},r+=-1===r.indexOf("?")?"?":"&";var m=document.createElement("script");m.setAttribute("src",""+r+p+"="+u),t.charset&&m.setAttribute("charset",t.charset),m.id=l,document.getElementsByTagName("head")[0].appendChild(m),d=setTimeout(function(){c(new Error("JSONP request to "+e+" timed out")),n(u),i(l),window[u]=function(){n(u)}},a),m.onerror=function(){c(new Error("JSONP request to "+e+" failed")),n(u),i(l),d&&clearTimeout(d)}})}var s={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};r.exports=e})},{}],6:[function(t,r){var a=a||function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var r=t.document,u=function(){return t.URL||t.webkitURL||t},a=r.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in a,e=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},c=/constructor/i.test(t.HTMLElement)||t.safari,g=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},h=function(e){setTimeout(function(){"string"==typeof e?u().revokeObjectURL(e):e.remove()},40000)},i=function(t,r,a){r=[].concat(r);for(var o=r.length,n;o--;)if(n=t["on"+r[o]],"function"==typeof n)try{n.call(t,a||t)}catch(e){s(e)}},l=function(e){return /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([oe(65279),e],{type:e.type}):e},n=function(n,m,y){y||(n=l(n));var f=this,p=n.type,_=p==="application/octet-stream",r=function(){i(f,["writestart","progress","write","writeend"])},s=function(){if((g||_&&c)&&t.FileReader){var e=new FileReader;return e.onloadend=function(){var a=g?e.result:e.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(a,"_blank")||(t.location.href=a),a=void 0,f.readyState=f.DONE,r()},e.readAsDataURL(n),void(f.readyState=f.INIT)}(x||(x=u().createObjectURL(n)),_)?t.location.href=x:t.open(x,"_blank")||(t.location.href=x),f.readyState=f.DONE,r(),h(x)},x;return(f.readyState=f.INIT,d)?(x=u().createObjectURL(n),void setTimeout(function(){a.href=x,a.download=m,e(a),r(),h(x),f.readyState=f.DONE})):void s()},o=n.prototype,p=function(e,t,r){return new n(e,t||e.name||"download",r)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=l(e)),navigator.msSaveOrOpenBlob(e,t)}:(o.abort=function(){},o.readyState=o.INIT=0,o.WRITING=1,o.DONE=2,o.error=o.onwritestart=o.onprogress=o.onwrite=o.onabort=o.onerror=o.onwriteend=null,p)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);void 0!==r&&r.exports?r.exports.saveAs=a:void 0!=ne&&null!==ne.amd&&ne("FileSaver.js",function(){return a})},{}],7:[function(e,t,r){r.read=function(t,r,a,o,s){var e=8*s-o-1,p=(1<<e)-1,i=p>>1,d=-7,c=a?s-1:0,u=a?-1:1,m=t[r+c],h,y;for(c+=u,h=m&(1<<-d)-1,m>>=-d,d+=e;0<d;h=256*h+t[r+c],c+=u,d-=8);for(y=h&(1<<-d)-1,h>>=-d,d+=o;0<d;y=256*y+t[r+c],c+=u,d-=8);if(0===h)h=1-i;else{if(h===p)return y?NaN:1/0*(m?-1:1);y+=te(2,o),h-=i}return(m?-1:1)*y*te(2,h-o)},r.write=function(t,r,a,s,d,c){var u=8*c-d-1,y=(1<<u)-1,f=y>>1,l=23===d?te(2,-24)-te(2,-77):0,m=s?0:c-1,x=s?1:-1,o=0>r||0===r&&0>1/r?1:0,p,v,T;for(r=_(r),isNaN(r)||r===1/0?(v=isNaN(r)?1:0,p=y):(p=S(ee(r)/Math.LN2),1>r*(T=te(2,-p))&&(p--,T*=2),r+=1<=p+f?l/T:l*te(2,1-f),2<=r*T&&(p++,T/=2),p+f>=y?(v=0,p=y):1<=p+f?(v=(r*T-1)*te(2,d),p+=f):(v=r*te(2,f-1)*te(2,d),p=0));8<=d;t[a+m]=255&v,m+=x,v/=256,d-=8);for(p=p<<d|v,u+=d;0<u;t[a+m]=255&p,m+=x,p/=256,u-=8);t[a+m-x]|=128*o}},{}],8:[function(e,t){var r={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},{}],9:[function(c,a){function ee(e,t){return e.b===t.b&&e.a===t.a}function te(e,t){return e.b<t.b||e.b===t.b&&e.a<=t.a}function e(t,r,a){var o=r.b-t.b,n=a.b-r.b;return 0<o+n?o<n?r.a-t.a+o/(o+n)*(t.a-a.a):r.a-a.a+n/(o+n)*(a.a-t.a):0}function re(t,r,a){var o=r.b-t.b,n=a.b-r.b;return 0<o+n?(r.a-a.a)*o+(r.a-t.a)*n:0}function d(e,t){return e.a<t.a||e.a===t.a&&e.b<=t.b}function h(t,r,a){var o=r.a-t.a,n=a.a-r.a;return 0<o+n?o<n?r.b-t.b+o/(o+n)*(t.b-a.b):r.b-a.b+n/(o+n)*(a.b-t.b):0}function i(t,r,a){var o=r.a-t.a,n=a.a-r.a;return 0<o+n?(r.b-a.b)*o+(r.b-t.b)*n:0}function g(e){return te(e.b.a,e.a)}function f(e){return te(e.a,e.b.a)}function j(e,t,r,o){return e=0>e?0:e,r=0>r?0:r,e<=r?0===r?(t+o)/2:t+e/(e+r)*(o-t):o+r/(e+r)*(t-o)}function l(e){var a=r(e.b);return t(a,e.c),t(a.b,e.c),p(a,e.a),a}function ae(e,r){var a=!1,o=!1;e!==r&&(r.a!==e.a&&(o=!0,m(r.a,e.a)),r.d!==e.d&&(a=!0,x(r.d,e.d)),s(r,e),o||(t(r,e.a),e.a.c=e),a||(p(r,e.d),e.d.a=e))}function o(e){var t=e.b,r=!1;e.d!==e.b.d&&(r=!0,x(e.d,e.b.d)),e.c===e?m(e.a,null):(e.b.d.a=Z(e),e.a.c=e.c,s(e,Z(e)),r||p(e,e.d)),t.c===t?(m(t.a,null),x(t.d,null)):(e.d.a=Z(t),t.a.c=t.c,s(t,Z(t))),u(e)}function oe(e){var a=r(e),o=a.b;return s(a,e.e),a.a=e.b.a,t(o,a.a),a.d=o.d=e.d,a=a.b,s(e.b,Z(e.b)),s(e.b,a),e.b.a=a.a,a.b.a.c=a.b,a.b.d=e.b.d,a.f=e.f,a.b.f=e.b.f,a}function n(t,a){var o=!1,n=r(t),i=n.b;return a.d!==t.d&&(o=!0,x(a.d,t.d)),s(n,t.e),s(i,a),n.a=t.b.a,i.a=a.a,n.d=i.d=t.d,t.d.a=i,o||p(n,t.d),n}function r(e){var t=new Y,r=new Y,a=e.b.h;return r.h=a,a.b.h=t,t.h=e,e.b.h=r,t.b=r,t.c=t,t.e=r,r.b=t,r.c=r,r.e=t}function s(e,t){var r=e.c,a=t.c;r.b.e=t,a.b.e=e,e.c=a,t.c=r}function t(e,t){var r=t.f,a=new K(t,r);r.e=a,t.f=a,r=a.c=e;do r.a=a,r=r.c;while(r!==e)}function p(e,t){var r=t.d,a=new X(t,r);r.b=a,t.d=a,a.a=e,a.c=t.c,r=e;do r.d=a,r=r.e;while(r!==e)}function u(e){var t=e.h;e=e.b.h,t.b.h=e,e.b.h=t}function m(e,t){var r=e.c,a=r;do a.a=t,a=a.c;while(a!==r);r=e.f,a=e.e,a.f=r,r.e=a}function x(e,t){var r=e.a,a=r;do a.d=t,a=a.e;while(a!==r);r=e.d,a=e.b,a.d=r,r.b=a}function y(e){var t=0;return _(e[1])>_(e[0])&&(t=1),_(e[2])>_(e[t])&&(t=2),t}function v(e,t){e.f+=t.f,e.b.f+=t.b.f}function b(t,r,o){return t=t.a,r=r.a,o=o.a,r.b.a===t?o.b.a===t?te(r.a,o.a)?0>=re(o.b.a,r.a,o.a):0<=re(r.b.a,o.a,r.a):0>=re(o.b.a,t,o.a):o.b.a===t?0<=re(r.b.a,t,r.a):(r=e(r.b.a,t,r.a),t=e(o.b.a,t,o.a),r>=t)}function w(e){e.a.i=null;var t=e.e;t.a.c=t.c,t.c.a=t.a,e.e=null}function C(e,t){o(e.a),e.c=!1,e.a=t,t.i=e}function D(e){var t=e.a.a;do e=ye(e);while(e.a.a===t);return e.c&&(t=n(ge(e).a.b,e.a.e),C(e,t),e=ye(e)),e}function E(e,t,r){var a=new he;return a.a=r,a.e=S(e.f,t.e,a),r.i=a}function A(e,t){switch(e.s){case 100130:return 0!=(1&t);case 100131:return 0!==t;case 100132:return 0<t;case 100133:return 0>t;case 100134:return 2<=t||-2>=t;}return!1}function k(e){var t=e.a,r=t.d;r.c=e.d,r.a=t,w(e)}function B(t,r,o){for(t=r,r=r.a;t!==o;){t.c=!1;var i=ge(t),s=i.a;if(s.a!==r.a){if(!i.c){k(t);break}s=n(r.c.b,s.b),C(i,s)}r.c!==s&&(ae(Z(s),s),ae(r,s)),k(t),r=i.a,t=i}return r}function I(t,r,a,n,i,s){var l=!0;do E(t,r,a.b),a=a.c;while(a!==n);for(null===i&&(i=ge(r).a.b.c);n=ge(r),a=n.a.b,a.a===i.a;)a.c!==i&&(ae(Z(a),a),ae(Z(i),a)),n.f=r.f-a.f,n.d=A(t,n.f),r.b=!0,!l&&M(t,r)&&(v(a,i),w(r),o(i)),l=!1,r=n,i=a;r.b=!0,s&&O(t,r)}function F(t,r,a,o,n){var e=[r.g[0],r.g[1],r.g[2]];r.d=null,r.d=t.o?t.o(e,a,o,t.c)||null:null,null===r.d&&(n?t.n||(W(t,100156),t.n=!0):r.d=a[0])}function G(e,t,r){var a=[null,null,null,null];a[0]=t.a.d,a[1]=r.a.d,F(e,t.a,a,[.5,.5,0,0],!1),ae(t,r)}function L(t,r,a,o,n){var e=_(r.b-t.b)+_(r.a-t.a),i=_(a.b-t.b)+_(a.a-t.a),s=n+1;o[n]=.5*i/(e+i),o[s]=.5*e/(e+i),t.g[0]+=o[n]*r.g[0]+o[s]*a.g[0],t.g[1]+=o[n]*r.g[1]+o[s]*a.g[1],t.g[2]+=o[n]*r.g[2]+o[s]*a.g[2]}function M(e,t){var r=ge(t),a=t.a,o=r.a;if(te(a.a,o.a)){if(0<re(o.b.a,a.a,o.a))return!1;if(!ee(a.a,o.a))oe(o.b),ae(a,Z(o)),t.b=r.b=!0;else if(a.a!==o.a){var r=e.e,n=a.a.h;if(0<=n){var r=r.b,i=r.d,s=r.e,p=r.c,l=p[n];i[l]=i[r.a],p[i[l]]=l,l<=--r.a&&(1>=l?ue(r,l):te(s[i[l>>1]],s[i[l]])?ue(r,l):me(r,l)),s[n]=null,p[n]=r.b,r.b=n}else for(r.c[-(n+1)]=null;0<r.a&&null===r.c[r.d[r.a-1]];)--r.a;G(e,Z(o),a)}}else{if(0>re(a.b.a,o.a,a.a))return!1;ye(t).b=t.b=!0,oe(a.b),ae(Z(o),a)}return!0}function N(o,a){var m=ge(a),g=a.a,f=m.a,_=g.a,S=f.a,C=g.b.a,r=f.b.a,s=new K;if(re(C,o.a,_),re(r,o.a,S),_===S||U(_.a,C.a)>T(S.a,r.a))return!1;if(te(_,S)){if(0<re(r,_,S))return!1;}else if(0>re(C,S,_))return!1;var E=C,R=_,P=r,A=S,O,G;if(te(E,R)||(O=E,E=R,R=O),te(P,A)||(O=P,P=A,A=O),te(E,P)||(O=E,E=P,P=O,O=R,R=A,A=O),te(P,R)?te(R,A)?(O=e(E,P,R),G=e(P,R,A),0>O+G&&(O=-O,G=-G),s.b=j(O,P.b,G,R.b)):(O=re(E,P,R),G=-re(E,A,R),0>O+G&&(O=-O,G=-G),s.b=j(O,P.b,G,A.b)):s.b=(P.b+R.b)/2,d(E,R)||(O=E,E=R,R=O),d(P,A)||(O=P,P=A,A=O),d(E,P)||(O=E,E=P,P=O,O=R,R=A,A=O),d(P,R)?d(R,A)?(O=h(E,P,R),G=h(P,R,A),0>O+G&&(O=-O,G=-G),s.a=j(O,P.a,G,R.a)):(O=i(E,P,R),G=-i(E,A,R),0>O+G&&(O=-O,G=-G),s.a=j(O,P.a,G,A.a)):s.a=(P.a+R.a)/2,te(s,o.a)&&(s.b=o.a.b,s.a=o.a.a),E=te(_,S)?_:S,te(E,s)&&(s.b=E.b,s.a=E.a),ee(s,_)||ee(s,S))return M(o,a),!1;if(!ee(C,o.a)&&0<=re(C,o.a,s)||!ee(r,o.a)&&0>=re(r,o.a,s)){if(r===o.a)return oe(g.b),ae(f.b,g),a=D(a),g=ge(a).a,B(o,ge(a),m),I(o,a,Z(g),g,g,!0),!0;if(C===o.a){oe(f.b),ae(g.e,Z(f)),_=m=a,S=_.a.b.a;do _=ye(_);while(_.a.b.a===S);return a=_,_=ge(a).a.b.c,m.a=Z(f),f=B(o,m,null),I(o,a,f.c,g.b.c,_,!0),!0}return 0<=re(C,o.a,s)&&(ye(a).b=a.b=!0,oe(g.b),g.a.b=o.a.b,g.a.a=o.a.a),0>=re(r,o.a,s)&&(a.b=m.b=!0,oe(f.b),f.a.b=o.a.b,f.a.a=o.a.a),!1}return oe(g.b),oe(f.b),ae(Z(f),g),g.a.b=s.b,g.a.a=s.a,g.a.h=ne(o.e,g.a),g=g.a,f=[0,0,0,0],s=[_.d,C.d,S.d,r.d],g.g[0]=g.g[1]=g.g[2]=0,L(g,_,C,f,0),L(g,S,r,f,2),F(o,g,s,f,!0),ye(a).b=a.b=m.b=!0,!1}function O(e,t){for(var r=ge(t);;){for(;r.b;)t=r,r=ge(r);if(!t.b&&(r=t,null===(t=ye(t))||!t.b))break;t.b=!1;var a=t.a,n=r.a,s;if(s=a.b.a!==n.b.a)a:{s=t;var p=ge(s),i=s.a,u=p.a,m=void 0;if(te(i.b.a,u.b.a)){if(0>re(i.b.a,u.b.a,i.a)){s=!1;break a}ye(s).b=s.b=!0,m=oe(i),ae(u.b,m),m.d.c=s.d}else{if(0<re(u.b.a,i.b.a,u.a)){s=!1;break a}s.b=p.b=!0,m=oe(u),ae(i.e,u.b),m.b.d.c=s.d}s=!0}if(s&&(r.c?(w(r),o(n),r=ge(t),n=r.a):t.c&&(w(t),o(a),t=ye(r),a=t.a)),a.a!==n.a)if(a.b.a===n.b.a||t.c||r.c||a.b.a!==e.a&&n.b.a!==e.a)M(e,t);else if(N(e,t))break;a.a===n.a&&a.b.a===n.b.a&&(v(n,a),w(t),o(a),t=ye(r))}}function P(e,t){e.a=t;for(var r=t.c;null===r.i;)if((r=r.c)===t.c){var r=e,a=t,s=new he;s.a=a.c.b;var p=r.f,d=p.a;do d=d.a;while(null!==d.b&&!p.c(p.b,s,d.b));var p=d.b,u=ge(p),s=p.a,d=u.a;if(0===re(s.b.a,a,s.a))s=p.a,ee(s.a,a)||ee(s.b.a,a)||(oe(s.b),p.c&&(o(s.c),p.c=!1),ae(a.c,s),P(r,a));else{var g=te(d.b.a,s.b.a)?p:u,u=void 0;p.d||g.c?(u=g===p?n(a.c.b,s.e):n(d.b.c.b,a.c).b,g.c?C(g,u):(s=r,p=E(r,p,u),p.f=ye(p).f+p.a.f,p.d=A(s,p.f)),P(r,a)):I(r,p,a.c,a.c,null,!0)}return}if(r=D(r.i),s=ge(r),p=s.a,s=B(e,s,null),s.c===p){var p=s,s=p.c,d=ge(r),u=r.a,g=d.a,y=!1;u.b.a!==g.b.a&&N(e,r),ee(u.a,e.a)&&(ae(Z(s),u),r=D(r),s=ge(r).a,B(e,ge(r),d),y=!0),ee(g.a,e.a)&&(ae(p,Z(g)),p=B(e,d,null),y=!0),y?I(e,r,p.c,s,s,!0):(a=te(g.a,u.a)?Z(g):u,a=n(p.c.b,a),I(e,r,a,a.c,a.c,!1),a.b.i.c=!0,O(e,r))}else I(e,r,s.c,p,p,!0)}function z(e,t){var r=new he,a=l(e.b);a.a.b=fe,a.a.a=t,a.b.a.b=-fe,a.b.a.a=t,e.a=a.b.a,r.a=a,r.f=0,r.d=!1,r.c=!1,r.h=!0,r.b=!1,a=e.f,a=S(a,a.a,r),r.e=a}function R(e){this.a=new H,this.b=e,this.c=b}function S(e,t,r){do t=t.c;while(null!==t.b&&!e.c(e.b,t.b,r));return e=new H(r,t.a,t),t.a.c=e,t.a=e}function H(e,t,r){this.b=e||null,this.a=t||this,this.c=r||this}function q(){this.d=_e,this.p=this.b=this.q=null,this.j=[0,0,0],this.s=100130,this.n=!1,this.o=this.a=this.e=this.f=null,this.m=!1,this.c=this.r=this.i=this.k=this.l=this.h=null}function V(e,t){if(e.d!==t)for(;e.d!==t;)if(e.d<t)switch(e.d){case _e:W(e,100151),e.u(null);break;case 1:W(e,100152),e.t();}else switch(e.d){case 2:W(e,100154),e.v();break;case 1:W(e,100153),e.w();}}function W(e,t){e.p&&e.p(t,e.c)}function X(e,t){this.b=e||this,this.d=t||this,this.a=null,this.c=!1}function Y(){this.h=this,this.i=this.d=this.a=this.e=this.c=this.b=null,this.f=0}function Z(e){return e.b.e}function Q(){this.c=new K,this.a=new X,this.b=new Y,this.d=new Y,this.b.b=this.d,this.d.b=this.b}function K(e,t){this.e=e||this,this.f=t||this,this.d=this.c=null,this.g=[0,0,0],this.h=this.a=this.b=0}function J(){this.c=[],this.d=null,this.a=0,this.e=!1,this.b=new se}function $(e){e.d=[];for(var t=0;t<e.a;t++)e.d[t]=t;e.d.sort(function(e){return function(t,r){return te(e[t],e[r])?1:-1}}(e.c)),e.e=!0,pe(e.b)}function ne(t,r){if(t.e){var a=t.b,o=++a.a;2*o>a.f&&(a.f*=2,a.c=le(a.c,a.f+1));var n;return 0===a.b?n=o:(n=a.b,a.b=a.c[a.b]),a.e[n]=r,a.c[n]=o,a.d[o]=n,a.h&&me(a,o),n}return a=t.a++,t.c[a]=r,-(a+1)}function ie(e){if(0===e.a)return ce(e.b);var t=e.c[e.d[e.a-1]];if(0!==e.b.a&&te(de(e.b),t))return ce(e.b);do--e.a;while(0<e.a&&null===e.c[e.d[e.a-1]]);return t}function se(){this.d=le([0],33),this.e=[null,null],this.c=[0,0],this.a=0,this.f=32,this.b=0,this.h=!1,this.d[1]=1}function le(e,t){for(var r=Array(t),a=0;a<e.length;a++)r[a]=e[a];for(;a<t;a++)r[a]=0;return r}function pe(e){for(var t=e.a;1<=t;--t)ue(e,t);e.h=!0}function de(e){return e.e[e.d[1]]}function ce(t){var r=t.d,a=t.e,o=t.c,n=r[1],e=a[n];return 0<t.a&&(r[1]=r[t.a],o[r[1]]=1,a[n]=null,o[n]=t.b,t.b=n,0<--t.a&&ue(t,1)),e}function ue(e,t){for(var r=e.d,a=e.e,o=e.c,n=t,s=r[n],l;;){l=n<<1,l<e.a&&te(a[r[l+1]],a[r[l]])&&(l+=1);var p=r[l];if(l>e.a||te(a[s],a[p])){r[n]=s,o[s]=n;break}r[n]=p,o[p]=n,n=l}}function me(e,t){for(var r=e.d,a=e.e,o=e.c,n=t,s=r[n];;){var l=n>>1,i=r[l];if(0==l||te(a[i],a[s])){r[n]=s,o[s]=n;break}r[n]=i,o[i]=n,n=l}}function he(){this.e=this.a=null,this.f=0,this.c=this.b=this.h=this.d=!1}function ge(e){return e.e.c.b}function ye(e){return e.e.a.b}var fe=4e150,_e=0,be;be=q.prototype,be.x=function(){V(this,0)},be.B=function(e,t){switch(e){case 100142:return;case 100140:switch(t){case 100130:case 100131:case 100132:case 100133:case 100134:return void(this.s=t);}break;case 100141:return void(this.m=!!t);default:return void W(this,100900);}W(this,100901)},be.y=function(e){switch(e){case 100142:return 0;case 100140:return this.s;case 100141:return this.m;default:W(this,100900);}return!1},be.A=function(e,t,r){this.j[0]=e,this.j[1]=t,this.j[2]=r},be.z=function(e,t){var r=t||null;100100===e||100106===e?this.h=r:100104===e||100110===e?this.l=r:100101===e||100107===e?this.k=r:100102===e||100108===e?this.i=r:100103===e||100109===e?this.p=r:100105===e||100111===e?this.o=r:100112===e?this.r=r:W(this,100900)},be.C=function(t,r){var a=!1,o=[0,0,0];V(this,2);for(var n=0,i;3>n;++n)i=t[n],-1e150>i&&(i=-1e150,a=!0),1e150<i&&(i=1e150,a=!0),o[n]=i;a&&W(this,100155),a=this.q,null===a?(a=l(this.b),ae(a,a.b)):(oe(a),a=a.e),a.a.d=r,a.a.g[0]=o[0],a.a.g[1]=o[1],a.a.g[2]=o[2],a.f=1,a.b.f=-1,this.q=a},be.u=function(e){V(this,0),this.d=1,this.b=new Q,this.c=e},be.t=function(){V(this,1),this.d=2,this.q=null},be.v=function(){V(this,2),this.d=1},be.w=function(){V(this,1),this.d=0;var e=this.j[0],t=this.j[1],r=this.j[2],l=!1,p=[e,t,r];if(0===e&&0===t&&0===r){for(var t=[-2e150,-2e150,-2e150],d=[2e150,2e150,2e150],r=[],_=[],l=this.b.c,e=l.e;e!==l;e=e.e)for(var x=0,S;3>x;++x)S=e.g[x],S<d[x]&&(d[x]=S,_[x]=e),S>t[x]&&(t[x]=S,r[x]=e);if(e=0,t[1]-d[1]>t[0]-d[0]&&(e=1),t[2]-d[2]>t[e]-d[e]&&(e=2),d[e]>=t[e])p[0]=0,p[1]=0,p[2]=1;else{for(t=0,d=_[e],r=r[e],_=[0,0,0],d=[d.g[0]-r.g[0],d.g[1]-r.g[1],d.g[2]-r.g[2]],x=[0,0,0],e=l.e;e!==l;e=e.e)x[0]=e.g[0]-r.g[0],x[1]=e.g[1]-r.g[1],x[2]=e.g[2]-r.g[2],_[0]=d[1]*x[2]-d[2]*x[1],_[1]=d[2]*x[0]-d[0]*x[2],_[2]=d[0]*x[1]-d[1]*x[0],(S=_[0]*_[0]+_[1]*_[1]+_[2]*_[2])>t&&(t=S,p[0]=_[0],p[1]=_[1],p[2]=_[2]);0>=t&&(p[0]=p[1]=p[2]=0,p[y(d)]=1)}l=!0}for(_=y(p),e=this.b.c,t=(_+1)%3,r=(_+2)%3,_=0<p[_]?1:-1,p=e.e;p!==e;p=p.e)p.b=p.g[t],p.a=_*p.g[r];if(l){for(p=0,l=this.b.a,e=l.b;e!==l;e=e.b)if(t=e.a,!(0>=t.f))do p+=(t.a.b-t.b.a.b)*(t.a.a+t.b.a.a),t=t.e;while(t!==e.a);if(0>p)for(p=this.b.c,l=p.e;l!==p;l=l.e)l.a=-l.a}for(this.n=!1,p=this.b.b,e=p.h;e!==p;e=l)l=e.h,t=e.e,ee(e.a,e.b.a)&&e.e.e!==e&&(G(this,t,e),o(e),e=t,t=e.e),t.e===e&&(t!==e&&(t!==l&&t!==l.b||(l=l.h),o(t)),e!==l&&e!==l.b||(l=l.h),o(e));for(this.e=p=new J,l=this.b.c,e=l.e;e!==l;e=e.e)e.h=ne(p,e);for($(p),this.f=new R(this),z(this,-4e+150),z(this,4e+150);null!==(p=ie(this.e));){for(;;){a:if(e=this.e,0===e.a)l=de(e.b);else if(l=e.c[e.d[e.a-1]],0!==e.b.a&&(e=de(e.b),te(e,l))){l=e;break a}if(null===l||!ee(l,p))break;l=ie(this.e),G(this,p.c,l.c)}P(this,p)}for(this.a=this.f.a.a.b.a.a,p=0;null!==(l=this.f.a.a.b);)l.h||++p,w(l);for(this.f=null,p=this.e,p.b=null,p.d=null,this.e=p.c=null,p=this.b,e=p.a.b;e!==p.a;e=l)l=e.b,e=e.a,e.e.e===e&&(v(e.c,e),o(e));if(!this.n){if(p=this.b,this.m)for(e=p.b.h;e!==p.b;e=l)l=e.h,e.b.d.c===e.d.c?o(e):e.f=e.d.c?1:-1;else for(e=p.a.b;e!==p.a;e=l)if(l=e.b,e.c){for(e=e.a;te(e.b.a,e.a);e=e.c.b);for(;te(e.a,e.b.a);e=e.e);for(t=e.c.b,r=void 0;e.e!==t;)if(te(e.b.a,t.a)){for(;t.e!==e&&(g(t.e)||0>=re(t.a,t.b.a,t.e.b.a));)r=n(t.e,t),t=r.b;t=t.c.b}else{for(;t.e!==e&&(f(e.c.b)||0<=re(e.b.a,e.a,e.c.b.a));)r=n(e,e.c.b),e=r.b;e=e.e}for(;t.e.e!==e;)r=n(t.e,t),t=r.b}if(this.h||this.i||this.k||this.l)if(this.m){for(p=this.b,l=p.a.b;l!==p.a;l=l.b)if(l.c){this.h&&this.h(2,this.c),e=l.a;do this.k&&this.k(e.a.d,this.c),e=e.e;while(e!==l.a);this.i&&this.i(this.c)}}else{for(p=this.b,l=!!this.l,e=!1,t=-1,r=p.a.d;r!==p.a;r=r.d)if(r.c){e||(this.h&&this.h(4,this.c),e=!0),_=r.a;do l&&(d=_.b.d.c?0:1,t!==d&&(t=d,this.l&&this.l(!!t,this.c))),this.k&&this.k(_.a.d,this.c),_=_.e;while(_!==r.a)}e&&this.i&&this.i(this.c)}if(this.r){for(p=this.b,e=p.a.b;e!==p.a;e=l)if(l=e.b,!e.c){t=e.a,r=t.e,_=void 0;do _=r,r=_.e,_.d=null,null===_.b.d&&(_.c===_?m(_.a,null):(_.a.c=_.c,s(_,Z(_))),d=_.b,d.c===d?m(d.a,null):(d.a.c=d.c,s(d,Z(d))),u(_));while(_!==t);t=e.d,e=e.b,e.d=t,t.b=e}return this.r(this.b),void(this.c=this.b=null)}}this.b=this.c=null},this.libtess={GluTesselator:q,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901,GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111}},q.prototype.gluDeleteTess=q.prototype.x,q.prototype.gluTessProperty=q.prototype.B,q.prototype.gluGetTessProperty=q.prototype.y,q.prototype.gluTessNormal=q.prototype.A,q.prototype.gluTessCallback=q.prototype.z,q.prototype.gluTessVertex=q.prototype.C,q.prototype.gluTessBeginPolygon=q.prototype.u,q.prototype.gluTessBeginContour=q.prototype.t,q.prototype.gluTessEndContour=q.prototype.v,q.prototype.gluTessEndPolygon=q.prototype.w,void 0!==a&&(a.exports=this.libtess)},{}],10:[function(t,r,a){(function(o){!function(t,o){"object"==typeof a&&void 0!==r?o(a):o(t.opentype={})}(this,function(P){var he=Math.trunc,Qr=Math.sign;function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function g(t,r){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=r,this.destLen=0,this.ltree=new e,this.dtree=new e}function a(t,r,a,o){var n,i;for(n=0;n<a;++n)t[n]=0;for(n=0;n<30-a;++n)t[n+a]=0|n/a;for(i=o,n=0;30>n;++n)r[n]=i,i+=1<<t[n]}function M(t,r,a,o){var n,i;for(n=0;16>n;++n)t.table[n]=0;for(n=0;n<o;++n)t.table[r[a+n]]++;for(t.table[0]=0,i=0,n=0;16>n;++n)ue[n]=i,i+=t.table[n];for(n=0;n<o;++n)r[a+n]&&(t.trans[ue[r[a+n]]++]=n)}function d(e){e.bitcount--||(e.tag=e.source[e.sourceIndex++],e.bitcount=7);var t=1&e.tag;return e.tag>>>=1,t}function b(e,t,r){if(!t)return r;for(;24>e.bitcount;)e.tag|=e.source[e.sourceIndex++]<<e.bitcount,e.bitcount+=8;var a=e.tag&65535>>>16-t;return e.tag>>>=t,e.bitcount-=t,a+r}function O(t,r){for(;24>t.bitcount;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var a=0,o=0,n=0,i=t.tag;do o=2*o+(1&i),i>>>=1,++n,a+=r.table[n],o-=r.table[n];while(0<=o);return t.tag=i,t.bitcount-=n,r.trans[a+o]}function i(t,r,a){var s,p,c,u,h,y;for(s=b(t,5,257),p=b(t,5,1),c=b(t,4,4),u=0;19>u;++u)$r[u]=0;for(u=0;u<c;++u){var _=b(t,3,0);$r[re[u]]=_}for(M(se,$r,0,19),h=0;h<s+p;){var m=O(t,se);switch(m){case 16:var n=$r[h-1];for(y=b(t,2,3);y;--y)$r[h++]=n;break;case 17:for(y=b(t,3,3);y;--y)$r[h++]=0;break;case 18:for(y=b(t,7,11);y;--y)$r[h++]=0;break;default:$r[h++]=m;}}M(r,$r,0,s),M(a,$r,s,p)}function l(t,r,a){for(;;){var o=O(t,r);if(256===o)return Kr;if(256>o)t.dest[t.destLen++]=o;else{var n,i,s,l;for(o-=257,n=b(t,ne[o],Jr[o]),i=O(t,a),s=t.destLen-b(t,pe[i],qe[i]),l=s;l<s+n;++l)t.dest[t.destLen++]=t.dest[l]}}}function c(e){for(var t,r,a;8<e.bitcount;)e.sourceIndex--,e.bitcount-=8;if(t=e.source[e.sourceIndex+1],t=256*t+e.source[e.sourceIndex],r=e.source[e.sourceIndex+3],r=256*r+e.source[e.sourceIndex+2],t!==(65535&~r))return ke;for(e.sourceIndex+=4,a=t;a;--a)e.dest[e.destLen++]=e.source[e.sourceIndex++];return e.bitcount=0,Kr}function h(t,r,a,o,n){return te(1-n,3)*t+3*te(1-n,2)*n*r+3*(1-n)*te(n,2)*a+te(n,3)*o}function n(){var e=Number.NaN;this.x1=e,this.y1=e,this.x2=e,this.y2=e}function N(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}function r(e){throw new Error(e)}function s(e,t){e||r(t)}function p(e){return function(){return e}}function u(e){return-128<=e&&127>=e}function m(t,r,a){for(var o=0,n=t.length;r<n&&64>o&&0===t[r];)++r,++o;return a.push(128|o-1),r}function f(t,r,a){for(var o=0,n=t.length,e=r,i;e<n&&64>o&&(i=t[e],!!u(i))&&!(0===i&&e+1<n&&0===t[e+1]);)++e,++o;a.push(o-1);for(var s=r;s<e;++s)a.push(255&t[s]+256);return e}function x(t,r,a){for(var o=0,n=t.length,e=r,s;e<n&&64>o&&(s=t[e],0!==s)&&!(u(s)&&e+1<n&&u(t[e+1]));)++e,++o;a.push(64|o-1);for(var l=r,p;l<e;++l)p=t[l],a.push(255&p+65536>>8,255&p+256);return e}function y(t,r,a){for(var o=this,n=0,s;n<r.length;n+=1)s=r[n],o[s.name]=s.value;if(this.tableName=t,this.fields=r,a)for(var l=Object.keys(a),p=0;p<l.length;p+=1){var d=l[p],i=a[d];void 0!==o[d]&&(o[d]=i)}}function w(t,r,a){void 0===a&&(a=r.length);var o=Array(r.length+1);o[0]={name:t+"Count",type:"USHORT",value:a};for(var n=0;n<r.length;n++)o[n+1]={name:t+n,type:"USHORT",value:r[n]};return o}function k(t,r,a){var o=r.length,n=Array(o+1);n[0]={name:t+"Count",type:"USHORT",value:o};for(var e=0;e<o;e++)n[e+1]={name:t+e,type:"TABLE",value:a(r[e],e)};return n}function A(t,r,a){var o=r.length,n=[];n[0]={name:t+"Count",type:"USHORT",value:o};for(var i=0;i<o;i++)n=n.concat(a(r[i],i));return n}function C(e){1===e.format?y.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(w("glyph",e.glyphs))):we.assert(!1,"Can't create coverage table format 2 yet.")}function D(e){y.call(this,"scriptListTable",A("scriptRecord",e,function(e,t){var r=e.script,a=r.defaultLangSys;return we.assert(!!a,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new y("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new y("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(w("featureIndex",a.featureIndexes)))}].concat(A("langSys",r.langSysRecords,function(e,t){var r=e.langSys;return[{name:"langSysTag"+t,type:"TAG",value:e.tag},{name:"langSys"+t,type:"TABLE",value:new y("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:r.reqFeatureIndex}].concat(w("featureIndex",r.featureIndexes)))}]})))}]}))}function E(e){y.call(this,"featureListTable",A("featureRecord",e,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new y("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(w("lookupListIndex",r.lookupListIndexes)))}]}))}function B(e,t){y.call(this,"lookupListTable",k("lookup",e,function(e){var r=t[e.lookupType];return we.assert(!!r,"Unable to write GSUB lookup type "+e.lookupType+" tables."),new y("lookupTable",[{name:"lookupType",type:"USHORT",value:e.lookupType},{name:"lookupFlag",type:"USHORT",value:e.lookupFlag}].concat(k("subtable",e.subtables,r)))}))}function F(e,t){return e.getUint8(t)}function G(e,t){return e.getUint16(t,!1)}function I(e,t){return e.getUint32(t,!1)}function z(e,t){return e.getInt16(t,!1)+e.getUint16(t+2,!1)/65535}function L(e,t){this.data=e,this.offset=t,this.relativeOffset=0}function H(t,r){r.parseUShort(),t.length=r.parseULong(),t.language=r.parseULong();var a;t.groupCount=a=r.parseULong(),t.glyphIndexMap={};for(var o=0;o<a;o+=1)for(var n=r.parseULong(),e=r.parseULong(),i=r.parseULong(),s=n;s<=e;s+=1)t.glyphIndexMap[s]=i,i++}function R(t,a,s,c,d){t.length=a.parseUShort(),t.language=a.parseUShort();var e;t.segCount=e=a.parseUShort()>>1,a.skip("uShort",3),t.glyphIndexMap={};for(var u=new Ke.Parser(s,c+d+14),g=new Ke.Parser(s,c+d+16+2*e),h=new Ke.Parser(s,c+d+16+4*e),i=new Ke.Parser(s,c+d+16+6*e),y=c+d+16+8*e,_=0;_<e-1;_+=1)for(var b=void 0,x=u.parseUShort(),n=g.parseUShort(),o=h.parseShort(),p=i.parseUShort(),v=n;v<=x;v+=1)0===p?b=65535&v+o:(y=i.offset+i.relativeOffset-2,y+=p,y+=2*(v-n),0!==(b=Ke.getUShort(s,y))&&(b=65535&b+o)),t.glyphIndexMap[v]=b}function W(e,t,r){e.segments.push({end:t,start:t,delta:-(t-r),offset:0,glyphIndex:r})}function Q(e){e.segments.push({end:65535,start:65535,delta:1,offset:0})}function V(e){this.font=e}function j(e){this.cmap=e}function Y(e,t){this.encoding=e,this.charset=t}function q(e){var t=this;switch(e.version){case 1:this.names=Pe.slice();break;case 2:this.names=Array(e.numberOfGlyphs);for(var r=0;r<e.numberOfGlyphs;r++)t.names[r]=e.glyphNameIndex[r]<Pe.length?Pe[e.glyphNameIndex[r]]:e.names[e.glyphNameIndex[r]-Pe.length];break;case 2.5:this.names=Array(e.numberOfGlyphs);for(var a=0;a<e.numberOfGlyphs;a++)t.names[a]=Pe[a+e.glyphNameIndex[a]];break;case 3:default:this.names=[];}}function K(t){for(var r=t.tables.cmap.glyphIndexMap,a=Object.keys(r),o=0,n;o<a.length;o+=1){var i=a[o],s=r[i];n=t.glyphs.get(s),n.addUnicode(parseInt(i))}for(var l=0;l<t.glyphs.length;l+=1)n=t.glyphs.get(l),t.cffEncoding?t.isCIDFont?n.name="gid"+l:n.name=t.cffEncoding.charset[l]:t.glyphNames.names&&(n.name=t.glyphNames.glyphIndexToName(l))}function J(e,t){var r=t||new N;return{configurable:!0,get:function(){return"function"==typeof r&&(r=r()),r},set:function(e){r=e}}}function ie(e){this.bindConstructorValues(e)}function ye(e,t,r){Object.defineProperty(e,t,{get:function(){return e.path,e[r]},set:function(t){e[r]=t},enumerable:!0,configurable:!0})}function be(e,t){var r=this;if(this.font=e,this.glyphs={},Array.isArray(t))for(var a=0;a<t.length;a++)r.glyphs[a]=t[a];this.length=t&&t.length||0}function ze(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r+=1)if(!ze(e[r],t[r]))return!1;return!0}return!1}function je(e){return 1240>e.length?107:33900>e.length?1131:32768}function et(t,r,a){var o=[],n=[],s=Ke.getCard16(t,r),p,c;if(0!==s){var u=Ke.getByte(t,r+2);p=r+(s+1)*u+2;for(var i=r+3,h=0;h<s+1;h+=1)o.push(Ke.getOffset(t,i,u)),i+=u;c=p+o[s]}else c=r+2;for(var g=0,y;g<o.length-1;g+=1)y=Ke.getBytes(t,p+o[g],p+o[g+1]),a&&(y=a(y)),n.push(y);return{objects:n,startOffset:r,endOffset:c}}function tt(t){for(var r="",a=15,o=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var n=t.parseByte(),e=n>>4,i=15&n;if(e==a)break;if(r+=o[e],i==a)break;r+=o[i]}return parseFloat(r)}function rt(t,r){var a,o,n,i;if(28===r)return a=t.parseByte(),o=t.parseByte(),a<<8|o;if(29===r)return a=t.parseByte(),o=t.parseByte(),n=t.parseByte(),i=t.parseByte(),a<<24|o<<16|n<<8|i;if(30===r)return tt(t);if(32<=r&&246>=r)return r-139;if(247<=r&&250>=r)return a=t.parseByte(),256*(r-247)+a+108;if(251<=r&&254>=r)return a=t.parseByte(),256*-(r-251)-a-108;throw new Error("Invalid b0 "+r)}function at(t){for(var r={},a=0;a<t.length;a+=1){var o=t[a][0],n=t[a][1],e=void 0;if(e=1===n.length?n[0]:n,r.hasOwnProperty(o)&&!isNaN(r[o]))throw new Error("Object [object Object] already has key "+o);r[o]=e}return r}function ot(t,r,a){r=void 0===r?0:r;var o=new Ke.Parser(t,r),n=[],e=[];for(a=void 0===a?t.length:a;o.relativeOffset<a;){var i=o.parseByte();21>=i?(12===i&&(i=1200+o.parseByte()),n.push([i,e]),e=[]):e.push(rt(o,i))}return at(n)}function nt(e,t){return t=390>=t?Me[t]:e[t-391]}function it(t,r,a){for(var o={},e=0,n,s;e<r.length;e+=1)if(s=r[e],Array.isArray(s.type)){var l=[];l.length=s.type.length;for(var p=0;p<s.type.length;p++)n=void 0===t[s.op]?void 0:t[s.op][p],void 0===n&&(n=void 0!==s.value&&void 0!==s.value[p]?s.value[p]:null),"SID"===s.type[p]&&(n=nt(a,n)),l[p]=n;o[s.name]=l}else n=t[s.op],void 0===n&&(n=void 0===s.value?null:s.value),"SID"===s.type&&(n=nt(a,n)),o[s.name]=n;return o}function st(e,t){var r={};return r.formatMajor=Ke.getCard8(e,t),r.formatMinor=Ke.getCard8(e,t+1),r.size=Ke.getCard8(e,t+2),r.offsetSize=Ke.getCard8(e,t+3),r.startOffset=t,r.endOffset=t+4,r}function lt(e,t){return it(ot(e,0,e.byteLength),Se,t)}function pt(e,t,r,a){return it(ot(e,t,r),Te,a)}function dt(t,r,a,o){for(var n=[],e=0;e<a.length;e+=1){var s=new DataView(new Uint8Array(a[e]).buffer),p=lt(s,o);p._subrs=[],p._subrsBias=0;var d=p.private[0],i=p.private[1];if(0!==d&&0!==i){var c=pt(t,i+r,d,o);if(p._defaultWidthX=c.defaultWidthX,p._nominalWidthX=c.nominalWidthX,0!==c.subrs){var u=i+c.subrs,l=et(t,u+r);p._subrs=l.objects,p._subrsBias=je(p._subrs)}p._privateDict=c}n.push(p)}return n}function ct(t,r,a,o){var n=new Ke.Parser(t,r),s,p;a-=1;var d=[".notdef"],u=n.parseCard8();if(0===u)for(var i=0;i<a;i+=1)s=n.parseSID(),d.push(nt(o,s));else if(1===u)for(;d.length<=a;){s=n.parseSID(),p=n.parseCard8();for(var m=0;m<=p;m+=1)d.push(nt(o,s)),s+=1}else{if(2!==u)throw new Error("Unknown charset format "+u);for(;d.length<=a;){s=n.parseSID(),p=n.parseCard16();for(var h=0;h<=p;h+=1)d.push(nt(o,s)),s+=1}}return d}function ut(t,r,a){var o={},e=new Ke.Parser(t,r),s=e.parseCard8(),p;if(0===s)for(var c=e.parseCard8(),u=0;u<c;u+=1)p=e.parseCard8(),o[p]=u;else{if(1!==s)throw new Error("Unknown encoding format "+s);var h=e.parseCard8();p=1;for(var g=0;g<h;g+=1)for(var y=e.parseCard8(),l=e.parseCard8(),m=y;m<=y+l;m+=1)o[m]=p,p+=1}return new Y(o,a)}function mt(S,a,r){function b(e,t){R&&f.closePath(),f.moveTo(e,t),R=!0}function d(){var e;e=0!=o.length%2,e&&!T&&(Z=o.shift()+X),p+=o.length>>1,o.length=0,T=!0}function e(t){for(var n=0,i,s,l,c,u,h,g,y,v,k,N,j,q;n<t.length;)switch(q=t[n],n+=1,q){case 1:case 3:d();break;case 4:1<o.length&&!T&&(Z=o.shift()+X,T=!0),P+=o.pop(),b(L,P);break;case 5:for(;0<o.length;)L+=o.shift(),P+=o.shift(),f.lineTo(L,P);break;case 6:for(;0<o.length&&(L+=o.shift(),f.lineTo(L,P),0!==o.length);)P+=o.shift(),f.lineTo(L,P);break;case 7:for(;0<o.length&&(P+=o.shift(),f.lineTo(L,P),0!==o.length);)L+=o.shift(),f.lineTo(L,P);break;case 8:for(;0<o.length;)M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V+o.shift(),f.curveTo(M,U,O,V,L,P);break;case 10:u=o.pop()+Y,h=W[u],h&&e(h);break;case 11:return;case 12:switch(q=t[n],n+=1,q){case 35:M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),g=O+o.shift(),y=V+o.shift(),v=g+o.shift(),k=y+o.shift(),N=v+o.shift(),j=k+o.shift(),L=N+o.shift(),P=j+o.shift(),o.shift(),f.curveTo(M,U,O,V,g,y),f.curveTo(v,k,N,j,L,P);break;case 34:M=L+o.shift(),U=P,O=M+o.shift(),V=U+o.shift(),g=O+o.shift(),y=V,v=g+o.shift(),k=V,N=v+o.shift(),j=P,L=N+o.shift(),f.curveTo(M,U,O,V,g,y),f.curveTo(v,k,N,j,L,P);break;case 36:M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),g=O+o.shift(),y=V,v=g+o.shift(),k=V,N=v+o.shift(),j=k+o.shift(),L=N+o.shift(),f.curveTo(M,U,O,V,g,y),f.curveTo(v,k,N,j,L,P);break;case 37:M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),g=O+o.shift(),y=V+o.shift(),v=g+o.shift(),k=y+o.shift(),N=v+o.shift(),j=k+o.shift(),_(N-L)>_(j-P)?L=N+o.shift():P=j+o.shift(),f.curveTo(M,U,O,V,g,y),f.curveTo(v,k,N,j,L,P);break;default:console.log("Glyph "+a.index+": unknown operator 1200"+q),o.length=0;}break;case 14:0<o.length&&!T&&(Z=o.shift()+X,T=!0),R&&(f.closePath(),R=!1);break;case 18:d();break;case 19:case 20:d(),n+=p+7>>3;break;case 21:2<o.length&&!T&&(Z=o.shift()+X,T=!0),P+=o.pop(),L+=o.pop(),b(L,P);break;case 22:1<o.length&&!T&&(Z=o.shift()+X,T=!0),L+=o.pop(),b(L,P);break;case 23:d();break;case 24:for(;2<o.length;)M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V+o.shift(),f.curveTo(M,U,O,V,L,P);L+=o.shift(),P+=o.shift(),f.lineTo(L,P);break;case 25:for(;6<o.length;)L+=o.shift(),P+=o.shift(),f.lineTo(L,P);M=L+o.shift(),U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V+o.shift(),f.curveTo(M,U,O,V,L,P);break;case 26:for(o.length%2&&(L+=o.shift());0<o.length;)M=L,U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O,P=V+o.shift(),f.curveTo(M,U,O,V,L,P);break;case 27:for(o.length%2&&(P+=o.shift());0<o.length;)M=L+o.shift(),U=P,O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V,f.curveTo(M,U,O,V,L,P);break;case 28:i=t[n],s=t[n+1],o.push((i<<24|s<<16)>>16),n+=2;break;case 29:u=o.pop()+S.gsubrsBias,h=S.gsubrs[u],h&&e(h);break;case 30:for(;0<o.length&&(M=L,U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V+(1===o.length?o.shift():0),f.curveTo(M,U,O,V,L,P),0!==o.length);)M=L+o.shift(),U=P,O=M+o.shift(),V=U+o.shift(),P=V+o.shift(),L=O+(1===o.length?o.shift():0),f.curveTo(M,U,O,V,L,P);break;case 31:for(;0<o.length&&(M=L+o.shift(),U=P,O=M+o.shift(),V=U+o.shift(),P=V+o.shift(),L=O+(1===o.length?o.shift():0),f.curveTo(M,U,O,V,L,P),0!==o.length);)M=L,U=P+o.shift(),O=M+o.shift(),V=U+o.shift(),L=O+o.shift(),P=V+(1===o.length?o.shift():0),f.curveTo(M,U,O,V,L,P);break;default:32>q?console.log("Glyph "+a.index+": unknown operator "+q):247>q?o.push(q-139):251>q?(i=t[n],n+=1,o.push(256*(q-247)+i+108)):255>q?(i=t[n],n+=1,o.push(256*-(q-251)-i-108)):(i=t[n],s=t[n+1],l=t[n+2],c=t[n+3],n+=4,o.push((i<<24|s<<16|l<<8|c)/65536));}}var f=new N,o=[],p=0,T=!1,R=!1,L=0,P=0,M,U,O,V,W,Y,c,X;if(S.isCIDFont){var C=S.tables.cff.topDict._fdSelect[a.index],E=S.tables.cff.topDict._fdArray[C];W=E._subrs,Y=E._subrsBias,c=E._defaultWidthX,X=E._nominalWidthX}else W=S.tables.cff.topDict._subrs,Y=S.tables.cff.topDict._subrsBias,c=S.tables.cff.topDict._defaultWidthX,X=S.tables.cff.topDict._nominalWidthX;var Z=c;return e(r),a.advanceWidth=Z,f}function ht(t,r,a,o){var n=[],s=new Ke.Parser(t,r),p=s.parseCard8(),d;if(0===p)for(var c=0;c<a;c++){if((d=s.parseCard8())>=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+d+" (FD count "+o+")");n.push(d)}else{if(3!==p)throw new Error("CFF Table CID Font FDSelect table has unsupported format "+p);var u=s.parseCard16(),h=s.parseCard16();if(0!==h)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+h);for(var g=0,y;g<u;g++){if(d=s.parseCard8(),y=s.parseCard16(),d>=o)throw new Error("CFF table CID Font FDSelect has bad FD index value "+d+" (FD count "+o+")");if(y>a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+y);for(;h<y;h++)n.push(d);h=y}if(y!==a)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+y)}return n}function gt(e,t){var r=Me.indexOf(e),a;return 0<=r&&(a=r),r=t.indexOf(e),0<=r?a=r+Me.length:(a=Me.length+t.length,t.push(e)),a}function yt(){return new He.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function ft(e){var t=new He.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);t.names=[];for(var r=0;r<e.length;r+=1)t.names.push({name:"name_"+r,type:"NAME",value:e[r]});return t}function _t(t,r,a){for(var o={},n=0;n<t.length;n+=1){var i=t[n],s=r[i.name];void 0===s||ze(s,i.value)||("SID"===i.type&&(s=gt(s,a)),o[i.op]={name:i.name,type:i.type,value:s})}return o}function bt(e,t){var r=new He.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_t(Se,e,t),r}function xt(e){var t=new He.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:e}],t}function vt(e){var t=new He.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);t.strings=[];for(var r=0;r<e.length;r+=1)t.strings.push({name:"string_"+r,type:"STRING",value:e[r]});return t}function St(){return new He.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function Tt(t,r){for(var a=new He.Record("Charsets",[{name:"format",type:"Card8",value:0}]),o=0;o<t.length;o+=1){var n=t[o],e=gt(n,r);a.fields.push({name:"glyph_"+o,type:"SID",value:e})}return a}function Ct(t){var r=[],a=t.path;r.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var s=0,p=0,c=0;c<a.commands.length;c+=1){var u=void 0,y=void 0,_=a.commands[c];if("Q"===_.type){var b=1/3,x=2/3;_={type:"C",x:_.x,y:_.y,x1:b*s+x*_.x1,y1:b*p+x*_.y1,x2:b*_.x+x*_.x1,y2:b*_.y+x*_.y1}}if("M"===_.type)u=$(_.x-s),y=$(_.y-p),r.push({name:"dx",type:"NUMBER",value:u}),r.push({name:"dy",type:"NUMBER",value:y}),r.push({name:"rmoveto",type:"OP",value:21}),s=$(_.x),p=$(_.y);else if("L"===_.type)u=$(_.x-s),y=$(_.y-p),r.push({name:"dx",type:"NUMBER",value:u}),r.push({name:"dy",type:"NUMBER",value:y}),r.push({name:"rlineto",type:"OP",value:5}),s=$(_.x),p=$(_.y);else if("C"===_.type){var v=$(_.x1-s),l=$(_.y1-p),m=$(_.x2-_.x1),n=$(_.y2-_.y1);u=$(_.x-_.x2),y=$(_.y-_.y2),r.push({name:"dx1",type:"NUMBER",value:v}),r.push({name:"dy1",type:"NUMBER",value:l}),r.push({name:"dx2",type:"NUMBER",value:m}),r.push({name:"dy2",type:"NUMBER",value:n}),r.push({name:"dx",type:"NUMBER",value:u}),r.push({name:"dy",type:"NUMBER",value:y}),r.push({name:"rrcurveto",type:"OP",value:8}),s=$(_.x),p=$(_.y)}}return r.push({name:"endchar",type:"OP",value:14}),r}function Et(t){for(var r=new He.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),a=0;a<t.length;a+=1){var o=t.get(a),n=Ct(o);r.charStrings.push({name:o.name,type:"CHARSTRING",value:n})}return r}function Rt(e,t){var r=new He.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return r.dict=_t(Te,e,t),r}function Lt(e,t,r){switch(e){case 0:if(65535===t)return"und";if(r)return r[t];break;case 1:return _e[t];case 3:return ra[t];}}function Pt(e,t,r){switch(e){case 0:return aa;case 1:return na[r]||oa[t];case 3:if(1===t||10===t)return aa;}}function wt(e){var t={};for(var r in e)t[e[r]]=parseInt(r);return t}function It(t,r,a,o,n,e){return new He.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:r},{name:"languageID",type:"USHORT",value:a},{name:"nameID",type:"USHORT",value:o},{name:"length",type:"USHORT",value:n},{name:"offset",type:"USHORT",value:e}])}function Dt(t,r){var a=t.length,o=r.length-a+1;a:for(var n=0;n<o;n++)for(;n<o;n++){for(var i=0;i<a;i++)if(r[n+i]!==t[i])continue a;return n}return-1}function Mt(t,r){var a=Dt(t,r);if(0>a){a=r.length;for(var o=0,n=t.length;o<n;++o)r.push(t[o])}return a}function kt(e){return 0|ee(e)/ee(2)}function At(e){for(;0!=e.length%4;)e.push(0);for(var t=0,r=0;r<e.length;r+=4)t+=(e[r]<<24)+(e[r+1]<<16)+(e[r+2]<<8)+e[r+3];return t%=te(2,32)}function Ut(e,t,r,a){return new He.Record("Table Record",[{name:"tag",type:"TAG",value:void 0===e?"":e},{name:"checkSum",type:"ULONG",value:void 0===t?0:t},{name:"offset",type:"ULONG",value:void 0===r?0:r},{name:"length",type:"ULONG",value:void 0===a?0:a}])}function Ot(t){var r=new He.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);r.tables=t,r.numTables=t.length;var a=te(2,kt(r.numTables));r.searchRange=16*a,r.entrySelector=kt(a),r.rangeShift=16*r.numTables-r.searchRange;for(var o=[],n=[],e=r.sizeOf()+Ut().sizeOf()*r.numTables;0!=e%4;)e+=1,n.push({name:"padding",type:"BYTE",value:0});for(var s=0,l;s<t.length;s+=1){l=t[s],we.argument(4===l.tableName.length,"Table name"+l.tableName+" is invalid.");var p=l.sizeOf(),i=Ut(l.tableName,At(l.encode()),e,p);for(o.push({name:i.tag+" Table Record",type:"RECORD",value:i}),n.push({name:l.tableName+" table",type:"RECORD",value:l}),e+=p,we.argument(!isNaN(e),"Something went wrong calculating the offset.");0!=e%4;)e+=1,n.push({name:"padding",type:"BYTE",value:0})}return o.sort(function(e,t){return e.value.tag>t.value.tag?1:-1}),r.fields=r.fields.concat(o),r.fields=r.fields.concat(n),r}function Bt(t,r,a){for(var o=0,n;o<r.length;o+=1)if(n=t.charToGlyphIndex(r[o]),0<n)return t.glyphs.get(n).getMetrics();return a}function Ft(e){for(var t=0,r=0;r<e.length;r+=1)t+=e[r];return t/e.length}function Gt(t,r){for(var a=0,o=t.length-1;a<=o;){var n=a+o>>>1,e=t[n].tag;if(e===r)return n;e<r?a=n+1:o=n-1}return-a-1}function Nt(t,r){for(var a=0,o=t.length-1;a<=o;){var n=a+o>>>1,e=t[n];if(e===r)return n;e<r?a=n+1:o=n-1}return-a-1}function Vt(t,r){for(var a=0,o=t.length-1,n,i;a<=o;){i=a+o>>>1,n=t[i];var s=n.start;if(s===r)return n;s<r?a=i+1:o=i-1}if(0<a)return n=t[a-1],r>n.end?0:n}function zt(e,t){this.font=e,this.tableName=t}function Ht(e){zt.call(this,e,"gpos")}function Wt(e){zt.call(this,e,"gsub")}function jt(e,t){var r=e.length;if(r!==t.length)return!1;for(var a=0;a<r;a++)if(e[a]!==t[a])return!1;return!0}function Yt(t,r,a){for(var o=t.subtables,n=0,i;n<o.length;n++)if(i=o[n],i.substFormat===r)return i;if(a)return o.push(a),a}function Xt(){return"undefined"!=typeof window}function qt(e){for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a<e.length;++a)r[a]=e[a];return t}function Zt(e){for(var t=new o(e.byteLength),r=new Uint8Array(e),a=0;a<t.length;++a)t[a]=r[a];return t}function Qt(e,t){if(!e)throw t}function Kt(t,r,a,o,n){var e;return 0<(r&o)?(e=t.parseByte(),0==(r&n)&&(e=-e),e=a+e):e=0<(r&n)?a:a+t.parseShort(),e}function Jt(y,a,_){var c=new Ke.Parser(a,_);y.numberOfContours=c.parseShort(),y._xMin=c.parseShort(),y._yMin=c.parseShort(),y._xMax=c.parseShort(),y._yMax=c.parseShort();var d,b;if(0<y.numberOfContours){for(var x=y.endPointIndices=[],g=0;g<y.numberOfContours;g+=1)x.push(c.parseUShort());y.instructionLength=c.parseUShort(),y.instructions=[];for(var S=0;S<y.instructionLength;S+=1)y.instructions.push(c.parseByte());var T=x[x.length-1]+1;d=[];for(var C=0;C<T;C+=1)if(b=c.parseByte(),d.push(b),0<(8&b))for(var E=c.parseByte(),l=0;l<E;l+=1)d.push(b),C+=1;if(we.argument(d.length===T,"Bad flags."),0<x.length){var R=[],o;if(0<T){for(var L=0;L<T;L+=1)b=d[L],o={},o.onCurve=!!(1&b),o.lastPointOfContour=0<=x.indexOf(L),R.push(o);for(var P=0,I=0;I<T;I+=1)b=d[I],o=R[I],o.x=Kt(c,b,P,2,16),P=o.x;for(var D=0,M=0;M<T;M+=1)b=d[M],o=R[M],o.y=Kt(c,b,D,4,32),D=o.y}y.points=R}else y.points=[]}else if(0===y.numberOfContours)y.points=[];else{y.isComposite=!0,y.points=[],y.components=[];for(var A=!0;A;){d=c.parseUShort();var U={glyphIndex:c.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};0<(1&d)?0<(2&d)?(U.dx=c.parseShort(),U.dy=c.parseShort()):U.matchedPoints=[c.parseUShort(),c.parseUShort()]:0<(2&d)?(U.dx=c.parseChar(),U.dy=c.parseChar()):U.matchedPoints=[c.parseByte(),c.parseByte()],0<(8&d)?U.xScale=U.yScale=c.parseF2Dot14():0<(64&d)?(U.xScale=c.parseF2Dot14(),U.yScale=c.parseF2Dot14()):0<(128&d)&&(U.xScale=c.parseF2Dot14(),U.scale01=c.parseF2Dot14(),U.scale10=c.parseF2Dot14(),U.yScale=c.parseF2Dot14()),y.components.push(U),A=!!(32&d)}if(256&d){y.instructionLength=c.parseUShort(),y.instructions=[];for(var v=0;v<y.instructionLength;v+=1)y.instructions.push(c.parseByte())}}}function $t(t,r){for(var a=[],o=0;o<t.length;o+=1){var n=t[o],e={x:r.xScale*n.x+r.scale01*n.y+r.dx,y:r.scale10*n.x+r.yScale*n.y+r.dy,onCurve:n.onCurve,lastPointOfContour:n.lastPointOfContour};a.push(e)}return a}function er(t){for(var r=[],a=[],o=0,n;o<t.length;o+=1)n=t[o],a.push(n),n.lastPointOfContour&&(r.push(a),a=[]);return we.argument(0===a.length,"There are still points left in the current contour."),r}function tr(t){var r=new N;if(!t)return r;for(var a=er(t),o=0;o<a.length;++o){var n=a[o],e=null,s=n[n.length-1],l=n[0];if(s.onCurve)r.moveTo(s.x,s.y);else if(l.onCurve)r.moveTo(l.x,l.y);else{var p={x:.5*(s.x+l.x),y:.5*(s.y+l.y)};r.moveTo(p.x,p.y)}for(var i=0;i<n.length;++i)if(e=s,s=l,l=n[(i+1)%n.length],s.onCurve)r.lineTo(s.x,s.y);else{var c=l;e.onCurve||{x:.5*(s.x+e.x),y:.5*(s.y+e.y)},l.onCurve||(c={x:.5*(s.x+l.x),y:.5*(s.y+l.y)}),r.quadraticCurveTo(s.x,s.y,c.x,c.y)}r.closePath()}return r}function rr(t,r){if(r.isComposite)for(var a=0;a<r.components.length;a+=1){var o=r.components[a],n=t.get(o.glyphIndex);if(n.getPath(),n.points){var e=void 0;if(void 0===o.matchedPoints)e=$t(n.points,o);else{if(o.matchedPoints[0]>r.points.length-1||o.matchedPoints[1]>n.points.length-1)throw Error("Matched points out of range in "+r.name);var s=r.points[o.matchedPoints[0]],l=n.points[o.matchedPoints[1]],p={xScale:o.xScale,scale01:o.scale01,scale10:o.scale10,yScale:o.yScale,dx:0,dy:0};l=$t([l],p)[0],p.dx=s.x-l.x,p.dy=s.y-l.y,e=$t(n.points,p)}r.points=r.points.concat(e)}}return tr(r.points)}function ar(e){this.font=e,this.getCommands=function(e){return ya.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function or(e){return e}function nr(e){return Qr(e)*$(_(e))}function ir(e){return Qr(e)*$(_(2*e))/2}function sr(e){return Qr(e)*($(_(e)+.5)-.5)}function lr(e){return Qr(e)*v(_(e))}function pr(e){return Qr(e)*S(_(e))}function dr(e,t){this.x=e,this.y=t,this.axis=void 0,this.slope=t/e,this.normalSlope=-e/t,Object.freeze(this)}function cr(e,t){var r=Z(e*e+t*t);return e/=r,t/=r,1===e&&0===t?_a:0===e&&1===t?ba:new dr(e,t)}function ur(e,t,r,a){this.x=this.xo=$(64*e)/64,this.y=this.yo=$(64*t)/64,this.lastPointOfContour=r,this.onCurve=a,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}function mr(e,t){switch(this.env=e,this.stack=[],this.prog=t,e){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=_a,this.round=nr;}}function hr(e){for(var t=e.tZone=Array(e.gZone.length),r=0;r<t.length;r++)t[r]=new ur(0,0)}function gr(t,r){var a=t.prog,o=t.ip,n=1,i;do if(88===(i=a[++o]))n++;else if(89===i)n--;else if(64===i)o+=a[o+1]+1;else if(65===i)o+=2*a[o+1]+1;else if(176<=i&&183>=i)o+=i-176+1;else if(184<=i&&191>=i)o+=2*(i-184+1);else if(r&&1==n&&27===i)break;while(0<n);t.ip=o}function yr(e,t){P.DEBUG&&console.log(t.step,"SVTCA["+e.axis+"]"),t.fv=t.pv=t.dpv=e}function fr(e,t){P.DEBUG&&console.log(t.step,"SPVTCA["+e.axis+"]"),t.pv=t.dpv=e}function _r(e,t){P.DEBUG&&console.log(t.step,"SFVTCA["+e.axis+"]"),t.fv=e}function br(t,r){var a=r.stack,o=a.pop(),e=a.pop(),n=r.z2[o],s=r.z1[e];P.DEBUG&&console.log("SPVTL["+t+"]",o,e);var l,p;t?(l=n.y-s.y,p=s.x-n.x):(l=s.x-n.x,p=s.y-n.y),r.pv=r.dpv=cr(l,p)}function xr(t,r){var a=r.stack,o=a.pop(),e=a.pop(),n=r.z2[o],s=r.z1[e];P.DEBUG&&console.log("SFVTL["+t+"]",o,e);var l,p;t?(l=n.y-s.y,p=s.x-n.x):(l=s.x-n.x,p=s.y-n.y),r.fv=cr(l,p)}function vr(e){P.DEBUG&&console.log(e.step,"POP[]"),e.stack.pop()}function Sr(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"LOOPCALL[]",a,o);var e=t.ip,n=t.prog;t.prog=t.funcs[a];for(var i=0;i<o;i++)va(t),P.DEBUG&&console.log(++t.step,i+1<o?"next loopcall":"done loopcall",i);t.ip=e,t.prog=n}function Tr(t){var r=t.stack.pop();P.DEBUG&&console.log(t.step,"CALL[]",r);var a=t.ip,o=t.prog;t.prog=t.funcs[r],va(t),t.ip=a,t.prog=o,P.DEBUG&&console.log(++t.step,"returning from",r)}function Cr(t,r){var a=r.stack.pop(),o=r.z0[a],e=r.fv,n=r.pv;P.DEBUG&&console.log(r.step,"MDAP["+t+"]",a);var i=n.distance(o,Ca);t&&(i=r.round(i)),e.setRelative(o,Ca,i,n),e.touch(o),r.rp0=r.rp1=a}function Er(t,r){var a=r.z2,o=a.length-2,n,s,l;P.DEBUG&&console.log(r.step,"IUP["+t.axis+"]");for(var p=0;p<o;p++)n=a[p],t.touched(n)||(s=n.prevTouched(t))!==n&&(l=n.nextTouched(t),s===l&&t.setRelative(n,n,t.distance(s,s,!1,!0),t,!0),t.interpolate(n,s,l,t))}function Rr(t,r){for(var a=r.stack,o=t?r.rp1:r.rp2,e=(t?r.z0:r.z1)[o],n=r.fv,s=r.pv,p=r.loop,d=r.z2;p--;){var c=a.pop(),u=d[c],l=s.distance(e,e,!1,!0);n.setRelative(u,u,l,s),n.touch(u),P.DEBUG&&console.log(r.step,(1<r.loop?"loop "+(r.loop-p)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",c)}r.loop=1}function Lr(t,r){var a=r.stack,o=t?r.rp1:r.rp2,e=(t?r.z0:r.z1)[o],n=r.fv,s=r.pv,p=a.pop(),i=r.z2[r.contours[p]],d=i;P.DEBUG&&console.log(r.step,"SHC["+t+"]",p);var c=s.distance(e,e,!1,!0);do d!==e&&n.setRelative(d,d,c,s),d=d.nextPointOnContour;while(d!==i)}function Pr(t,r){var a=r.stack,o=t?r.rp1:r.rp2,e=(t?r.z0:r.z1)[o],s=r.fv,p=r.pv,d=a.pop();P.DEBUG&&console.log(r.step,"SHZ["+t+"]",d);var i;switch(d){case 0:i=r.tZone;break;case 1:i=r.gZone;break;default:throw new Error("Invalid zone");}for(var c=p.distance(e,e,!1,!0),l=i.length-2,u=0,m;u<l;u++)m=i[u],s.setRelative(m,m,c,p)}function wr(t,r){var a=r.stack,o=a.pop()/64,e=a.pop(),n=r.z1[e],s=r.z0[r.rp0],l=r.fv,i=r.pv;l.setRelative(n,s,o,i),l.touch(n),P.DEBUG&&console.log(r.step,"MSIRP["+t+"]",o,e),r.rp1=r.rp0,r.rp2=e,t&&(r.rp0=e)}function Ir(t,r){var a=r.stack,o=a.pop(),e=a.pop(),n=r.z0[e],s=r.fv,l=r.pv,i=r.cvt[o];P.DEBUG&&console.log(r.step,"MIAP["+t+"]",o,"(",i,")",e);var p=l.distance(n,Ca);t&&(_(p-i)<r.cvCutIn&&(p=i),p=r.round(p)),s.setRelative(n,Ca,p,l),0===r.zp0&&(n.xo=n.x,n.yo=n.y),s.touch(n),r.rp0=r.rp1=e}function Dr(t,r){var a=r.stack,o=a.pop(),e=r.z2[o];P.DEBUG&&console.log(r.step,"GC["+t+"]",o),a.push(64*r.dpv.distance(e,Ca,t,!1))}function Mr(t,r){var a=r.stack,o=a.pop(),e=a.pop(),n=r.z1[o],s=r.z0[e],l=r.dpv.distance(s,n,t,t);P.DEBUG&&console.log(r.step,"MD["+t+"]",o,e,"->",l),r.stack.push($(64*l))}function kr(t,r){var a=r.stack,s=a.pop(),e=r.fv,d=r.pv,c=r.ppem,u=r.deltaBase+16*(t-1),i=r.deltaShift,h=r.z0;P.DEBUG&&console.log(r.step,"DELTAP["+t+"]",s,a);for(var g=0;g<s;g++){var y=a.pop(),m=a.pop();if(u+((240&m)>>4)===c){var n=(15&m)-8;0<=n&&n++,P.DEBUG&&console.log(r.step,"DELTAPFIX",y,"by",n*i);var f=h[y];e.setRelative(f,f,n*i,d)}}}function Ar(t,r){var a=r.stack,o=a.pop();P.DEBUG&&console.log(r.step,"ROUND[]"),a.push(64*r.round(o/64))}function Ur(t,r){var a=r.stack,o=a.pop(),e=r.ppem,n=r.deltaBase+16*(t-1),s=r.deltaShift;P.DEBUG&&console.log(r.step,"DELTAC["+t+"]",o,a);for(var p=0;p<o;p++){var d=a.pop(),c=a.pop();if(n+((240&c)>>4)===e){var u=(15&c)-8;0<=u&&u++;var h=u*s;P.DEBUG&&console.log(r.step,"DELTACFIX",d,"by",h),r.cvt[d]+=h}}}function Or(t,r){var a=r.stack,o=a.pop(),e=a.pop(),n=r.z2[o],s=r.z1[e];P.DEBUG&&console.log(r.step,"SDPVTL["+t+"]",o,e);var l,p;t?(l=n.y-s.y,p=s.x-n.x):(l=s.x-n.x,p=s.y-n.y),r.dpv=cr(l,p)}function Br(t,r){var a=r.stack,o=r.prog,e=r.ip;P.DEBUG&&console.log(r.step,"PUSHB["+t+"]");for(var n=0;n<t;n++)a.push(o[++e]);r.ip=e}function Fr(t,r){var a=r.ip,o=r.prog,e=r.stack;P.DEBUG&&console.log(r.ip,"PUSHW["+t+"]");for(var n=0,i;n<t;n++)i=o[++a]<<8|o[++a],32768&i&&(i=-(1+(65535^i))),e.push(i);r.ip=a}function Gr(a,u,c,d,e,y){var g=y.stack,l=a&&g.pop(),m=g.pop(),n=y.rp0,o=y.z0[n],p=y.z1[m],f=y.minDis,r=y.fv,s=y.dpv,t,b,x,v;b=t=s.distance(p,o,!0,!0),x=0<=b?1:-1,b=_(b),a&&(v=y.cvt[l],d&&_(b-v)<y.cvCutIn&&(b=v)),c&&b<f&&(b=f),d&&(b=y.round(b)),r.setRelative(p,o,x*b,s),r.touch(p),P.DEBUG&&console.log(y.step,(a?"MIRP[":"MDRP[")+(u?"M":"m")+(c?">":"_")+(d?"R":"_")+(0===e?"Gr":1===e?"Bl":2===e?"Wh":"")+"]",a?l+"("+y.cvt[l]+","+v+")":"",m,"(d =",t,"->",x*b,")"),y.rp1=y.rp0,y.rp2=m,u&&(y.rp0=m)}function Nr(e){e=e||{},e.empty||(Qt(e.familyName,"When creating a new Font object, familyName is required."),Qt(e.styleName,"When creating a new Font object, styleName is required."),Qt(e.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Qt(e.ascender,"When creating a new Font object, ascender is required."),Qt(e.descender,"When creating a new Font object, descender is required."),Qt(0>e.descender,"Descender should be negative (e.g. -512)."),this.names={fontFamily:{en:e.familyName||" "},fontSubfamily:{en:e.styleName||" "},fullName:{en:e.fullName||e.familyName+" "+e.styleName},postScriptName:{en:e.postScriptName||(e.familyName+e.styleName).replace(/\s/g,"")},designer:{en:e.designer||" "},designerURL:{en:e.designerURL||" "},manufacturer:{en:e.manufacturer||" "},manufacturerURL:{en:e.manufacturerURL||" "},license:{en:e.license||" "},licenseURL:{en:e.licenseURL||" "},version:{en:e.version||"Version 0.1"},description:{en:e.description||" "},copyright:{en:e.copyright||" "},trademark:{en:e.trademark||" "}},this.unitsPerEm=e.unitsPerEm||1e3,this.ascender=e.ascender,this.descender=e.descender,this.createdTimestamp=e.createdTimestamp,this.tables={os2:{usWeightClass:e.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:e.widthClass||this.usWidthClasses.MEDIUM,fsSelection:e.fsSelection||this.fsSelectionValues.REGULAR}}),this.supported=!0,this.glyphs=new Re.GlyphSet(this,e.glyphs||[]),this.encoding=new V(this),this.position=new Ht(this),this.substitution=new Wt(this),this.tables=this.tables||{},Object.defineProperty(this,"hinting",{get:function(){return this._hinting?this._hinting:"truetype"===this.outlinesFormat?this._hinting=new ar(this):void 0}})}function Vr(t,r){var a=JSON.stringify(t),o=256;for(var n in r){var e=parseInt(n);if(e&&!(256>e)){if(JSON.stringify(r[n])===a)return e;o<=e&&(o=e+1)}}return r[o]=t,o}function zr(e,t,r){var a=Vr(t.name,r);return[{name:"tag_"+e,type:"TAG",value:t.tag},{name:"minValue_"+e,type:"FIXED",value:t.minValue<<16},{name:"defaultValue_"+e,type:"FIXED",value:t.defaultValue<<16},{name:"maxValue_"+e,type:"FIXED",value:t.maxValue<<16},{name:"flags_"+e,type:"USHORT",value:0},{name:"nameID_"+e,type:"USHORT",value:a}]}function Hr(t,r,a){var o={},n=new Ke.Parser(t,r);return o.tag=n.parseTag(),o.minValue=n.parseFixed(),o.defaultValue=n.parseFixed(),o.maxValue=n.parseFixed(),n.skip("uShort",1),o.name=a[n.parseUShort()]||{},o}function Wr(t,r,a,o){for(var n=Vr(r.name,o),e=[{name:"nameID_"+t,type:"USHORT",value:n},{name:"flags_"+t,type:"USHORT",value:0}],i=0,s;i<a.length;++i)s=a[i].tag,e.push({name:"axis_"+t+" "+s,type:"FIXED",value:r.coordinates[s]<<16});return e}function jr(t,r,a,o){var n={},e=new Ke.Parser(t,r);n.name=o[e.parseUShort()]||{},e.skip("uShort",1),n.coordinates={};for(var i=0;i<a.length;++i)n.coordinates[a[i].tag]=e.parseFixed();return n}function Yr(t){var r={};t.skip("uShort");var a=t.parseUShort();we.argument(0===a,"Unsupported kern sub-table version."),t.skip("uShort",2);var o=t.parseUShort();t.skip("uShort",3);for(var n=0;n<o;n+=1){var i=t.parseUShort(),s=t.parseUShort(),l=t.parseShort();r[i+","+s]=l}return r}function Xr(t){var r={};t.skip("uShort"),1<t.parseULong()&&console.warn("Only the first kern subtable is supported."),t.skip("uLong");var a=t.parseUShort();if(t.skip("uShort"),0==(255&a)){var o=t.parseUShort();t.skip("uShort",3);for(var e=0;e<o;e+=1){var n=t.parseUShort(),s=t.parseUShort(),l=t.parseShort();r[n+","+s]=l}}return r}function qr(e,r){t("fs").readFile(e,function(e,t){return e?r(e.message):void r(null,qt(t))})}function ce(e,t){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="arraybuffer",r.onload=function(){return r.response?t(null,r.response):t("Font could not be loaded: "+r.statusText)},r.onerror=function(){t("Font could not be loaded")},r.send()}function de(t,r){for(var a=[],o=12,n=0;n<r;n+=1){var s=Ke.getTag(t,o),l=Ke.getULong(t,o+4),p=Ke.getULong(t,o+8),c=Ke.getULong(t,o+12);a.push({tag:s,checksum:l,offset:p,length:c,compression:!1}),o+=16}return a}function Zr(t,r){for(var a=[],o=44,n=0;n<r;n+=1){var s=Ke.getTag(t,o),l=Ke.getULong(t,o+4),p=Ke.getULong(t,o+8),c=Ke.getULong(t,o+12),i=void 0;i=p<c&&"WOFF",a.push({tag:s,offset:l,compression:i,compressedLength:p,length:c}),o+=20}return a}function fe(e,t){if("WOFF"===t.compression){var r=new Uint8Array(e.buffer,t.offset+2,t.compressedLength-2),a=new Uint8Array(t.length);if(ve(r,a),a.byteLength!==t.length)throw new Error("Decompression error: "+t.tag+" decompressed length doesn't match recorded length");return{data:new DataView(a.buffer,0),offset:0}}return{data:e,offset:t.offset}}function ge(_){var a=new Nr({empty:!0}),e=new DataView(_,0),f=[],S=Ke.getTag(e,0),h,T,R;if(S===oe(0,1,0,0)||"true"===S||"typ1"===S)a.outlinesFormat="truetype",R=Ke.getUShort(e,4),f=de(e,R);else if("OTTO"===S)a.outlinesFormat="cff",R=Ke.getUShort(e,4),f=de(e,R);else{if("wOFF"!==S)throw new Error("Unsupported OpenType signature "+S);var L=Ke.getTag(e,4);if(L===oe(0,1,0,0))a.outlinesFormat="truetype";else{if("OTTO"!==L)throw new Error("Unsupported OpenType flavor "+S);a.outlinesFormat="cff"}R=Ke.getUShort(e,12),f=Zr(e,R)}for(var i=0,P,M,U,O,N,V,W,Y,X,Z,Q;i<R;i+=1){var J=f[i],v=void 0;switch(J.tag){case"cmap":v=fe(e,J),a.tables.cmap=Le.parse(v.data,v.offset),a.encoding=new j(a.tables.cmap);break;case"cvt ":v=fe(e,J),Q=new Ke.Parser(v.data,v.offset),a.tables.cvt=Q.parseShortList(J.length/2);break;case"fvar":M=J;break;case"fpgm":v=fe(e,J),Q=new Ke.Parser(v.data,v.offset),a.tables.fpgm=Q.parseByteList(J.length);break;case"head":v=fe(e,J),a.tables.head=Ve.parse(v.data,v.offset),a.unitsPerEm=a.tables.head.unitsPerEm,h=a.tables.head.indexToLocFormat;break;case"hhea":v=fe(e,J),a.tables.hhea=We.parse(v.data,v.offset),a.ascender=a.tables.hhea.ascender,a.descender=a.tables.hhea.descender,a.numberOfHMetrics=a.tables.hhea.numberOfHMetrics;break;case"hmtx":V=J;break;case"ltag":v=fe(e,J),T=Ye.parse(v.data,v.offset);break;case"maxp":v=fe(e,J),a.tables.maxp=Ze.parse(v.data,v.offset),a.numGlyphs=a.tables.maxp.numGlyphs;break;case"name":X=J;break;case"OS/2":v=fe(e,J),a.tables.os2=la.parse(v.data,v.offset);break;case"post":v=fe(e,J),a.tables.post=pa.parse(v.data,v.offset),a.glyphNames=new q(a.tables.post);break;case"prep":v=fe(e,J),Q=new Ke.Parser(v.data,v.offset),a.tables.prep=Q.parseByteList(J.length);break;case"glyf":U=J;break;case"loca":Y=J;break;case"CFF ":P=J;break;case"kern":W=J;break;case"GPOS":O=J;break;case"GSUB":N=J;break;case"meta":Z=J;}}var $=fe(e,X);if(a.tables.name=ia.parse($.data,$.offset,T),a.names=a.tables.name,U&&Y){var x=0===h,y=fe(e,Y),z=Ma.parse(y.data,y.offset,a.numGlyphs,x),A=fe(e,U);a.glyphs=ya.parse(A.data,A.offset,z,a)}else{if(!P)throw new Error("Font doesn't contain TrueType or CFF outlines.");var B=fe(e,P);Ue.parse(B.data,B.offset,a)}var C=fe(e,V);if(Xe.parse(C.data,C.offset,a.numberOfHMetrics,a.numGlyphs,a.glyphs),K(a),W){var D=fe(e,W);a.kerningPairs=Da.parse(D.data,D.offset)}else a.kerningPairs={};if(O){var E=fe(e,O);a.tables.gpos=Ia.parse(E.data,E.offset),a.position.init()}if(N){var F=fe(e,N);a.tables.gsub=ma.parse(F.data,F.offset)}if(M){var G=fe(e,M);a.tables.fvar=La.parse(G.data,G.offset,a.names)}if(Z){var H=fe(e,Z);a.tables.meta=ha.parse(H.data,H.offset),a.metas=a.tables.meta}return a}ae.codePointAt||function(){var e=function(){try{var e={},t=Object.defineProperty,r=t(e,e,e)&&t}catch(e){}return r}(),t=function(t){if(null==this)throw TypeError();var r=this+"",a=r.length,o=t?+t:0;if(o!=o&&(o=0),!(0>o||o>=a)){var n=r.charCodeAt(o),i;return 55296<=n&&56319>=n&&a>o+1&&56320<=(i=r.charCodeAt(o+1))&&57343>=i?1024*(n-55296)+i-56320+65536:n}};e?e(String.prototype,"codePointAt",{value:t,configurable:!0,writable:!0}):ae.codePointAt=t}();var Kr=0,ke=-3,le=new e,me=new e,ne=new Uint8Array(30),Jr=new Uint16Array(30),pe=new Uint8Array(30),qe=new Uint16Array(30),re=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),se=new e,$r=new Uint8Array(320),ue=new Uint16Array(16);(function(e,t){var r;for(r=0;7>r;++r)e.table[r]=0;for(e.table[7]=24,e.table[8]=152,e.table[9]=112,r=0;24>r;++r)e.trans[r]=256+r;for(r=0;144>r;++r)e.trans[24+r]=r;for(r=0;8>r;++r)e.trans[168+r]=280+r;for(r=0;112>r;++r)e.trans[176+r]=144+r;for(r=0;5>r;++r)t.table[r]=0;for(t.table[5]=32,r=0;32>r;++r)t.trans[r]=r})(le,me),a(ne,Jr,4,3),a(pe,qe,2,1),ne[28]=0,Jr[28]=258;var ve=function(t,r){var a=new g(t,r),o,n;do{switch(o=d(a),b(a,2,0)){case 0:n=c(a);break;case 1:n=l(a,le,me);break;case 2:i(a,a.ltree,a.dtree),n=l(a,a.ltree,a.dtree);break;default:n=ke;}if(n!==Kr)throw new Error("Data error")}while(!o);return a.destLen<a.dest.length?"function"==typeof a.dest.slice?a.dest.slice(0,a.destLen):a.dest.subarray(0,a.destLen):a.dest};n.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)},n.prototype.addPoint=function(e,t){"number"==typeof e&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=e,this.x2=e),e<this.x1&&(this.x1=e),e>this.x2&&(this.x2=e)),"number"==typeof t&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=t,this.y2=t),t<this.y1&&(this.y1=t),t>this.y2&&(this.y2=t))},n.prototype.addX=function(e){this.addPoint(e,null)},n.prototype.addY=function(e){this.addPoint(null,e)},n.prototype.addBezier=function(p,a,y,c,d,e,f,g){var _=this,i=[p,a],b=[y,c],x=[d,e],l=[f,g];this.addPoint(p,a),this.addPoint(f,g);for(var m=0;1>=m;m++){var S=6*i[m]-12*b[m]+6*x[m],o=-3*i[m]+9*b[m]-9*x[m]+3*l[m],T=3*b[m]-3*i[m];if(0!=o){var r=te(S,2)-4*T*o;if(!(0>r)){var s=(-S+Z(r))/(2*o);0<s&&1>s&&(0==m&&_.addX(h(i[m],b[m],x[m],l[m],s)),1==m&&_.addY(h(i[m],b[m],x[m],l[m],s)));var t=(-S-Z(r))/(2*o);0<t&&1>t&&(0==m&&_.addX(h(i[m],b[m],x[m],l[m],t)),1==m&&_.addY(h(i[m],b[m],x[m],l[m],t)))}}else{if(0==S)continue;var u=-T/S;0<u&&1>u&&(0==m&&_.addX(h(i[m],b[m],x[m],l[m],u)),1==m&&_.addY(h(i[m],b[m],x[m],l[m],u)))}}},n.prototype.addQuad=function(t,r,a,o,n,e){var i=t+2/3*(a-t),s=r+2/3*(o-r);this.addBezier(t,r,i,s,i+1/3*(n-t),s+1/3*(e-r),n,e)},N.prototype.moveTo=function(e,t){this.commands.push({type:"M",x:e,y:t})},N.prototype.lineTo=function(e,t){this.commands.push({type:"L",x:e,y:t})},N.prototype.curveTo=N.prototype.bezierCurveTo=function(t,r,a,o,n,e){this.commands.push({type:"C",x1:t,y1:r,x2:a,y2:o,x:n,y:e})},N.prototype.quadTo=N.prototype.quadraticCurveTo=function(e,t,r,a){this.commands.push({type:"Q",x1:e,y1:t,x:r,y:a})},N.prototype.close=N.prototype.closePath=function(){this.commands.push({type:"Z"})},N.prototype.extend=function(e){if(e.commands)e=e.commands;else if(e instanceof n){var t=e;return this.moveTo(t.x1,t.y1),this.lineTo(t.x2,t.y1),this.lineTo(t.x2,t.y2),this.lineTo(t.x1,t.y2),void this.close()}Array.prototype.push.apply(this.commands,e)},N.prototype.getBoundingBox=function(){for(var t=this,r=new n,a=0,o=0,i=0,s=0,l=0,p;l<this.commands.length;l++)switch(p=t.commands[l],p.type){case"M":r.addPoint(p.x,p.y),a=i=p.x,o=s=p.y;break;case"L":r.addPoint(p.x,p.y),i=p.x,s=p.y;break;case"Q":r.addQuad(i,s,p.x1,p.y1,p.x,p.y),i=p.x,s=p.y;break;case"C":r.addBezier(i,s,p.x1,p.y1,p.x2,p.y2,p.x,p.y),i=p.x,s=p.y;break;case"Z":i=a,s=o;break;default:throw new Error("Unexpected path command "+p.type);}return r.isEmpty()&&r.addPoint(0,0),r},N.prototype.draw=function(e){var t=this;e.beginPath();for(var r=0,a;r<this.commands.length;r+=1)a=t.commands[r],"M"===a.type?e.moveTo(a.x,a.y):"L"===a.type?e.lineTo(a.x,a.y):"C"===a.type?e.bezierCurveTo(a.x1,a.y1,a.x2,a.y2,a.x,a.y):"Q"===a.type?e.quadraticCurveTo(a.x1,a.y1,a.x,a.y):"Z"===a.type&&e.closePath();this.fill&&(e.fillStyle=this.fill,e.fill()),this.stroke&&(e.strokeStyle=this.stroke,e.lineWidth=this.strokeWidth,e.stroke())},N.prototype.toPathData=function(t){function r(e){return $(e)===e?""+$(e):e.toFixed(t)}function o(){for(var t=arguments,a="",o=0,n;o<arguments.length;o+=1)n=t[o],0<=n&&0<o&&(a+=" "),a+=r(n);return a}var n=this;t=void 0===t?2:t;for(var i="",s=0,l;s<this.commands.length;s+=1)l=n.commands[s],"M"===l.type?i+="M"+o(l.x,l.y):"L"===l.type?i+="L"+o(l.x,l.y):"C"===l.type?i+="C"+o(l.x1,l.y1,l.x2,l.y2,l.x,l.y):"Q"===l.type?i+="Q"+o(l.x1,l.y1,l.x,l.y):"Z"===l.type&&(i+="Z");return i},N.prototype.toSVG=function(e){var t="<path d=\"";return t+=this.toPathData(e),t+="\"",this.fill&&"black"!==this.fill&&(null===this.fill?t+=" fill=\"none\"":t+=" fill=\""+this.fill+"\""),this.stroke&&(t+=" stroke=\""+this.stroke+"\" stroke-width=\""+this.strokeWidth+"\""),t+="/>"},N.prototype.toDOMElement=function(e){var t=this.toPathData(e),r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",t),r};var we={fail:r,argument:s,assert:s},xe={},Ae={},Be={};Ae.BYTE=function(e){return we.argument(0<=e&&255>=e,"Byte value should be between 0 and 255."),[e]},Be.BYTE=p(1),Ae.CHAR=function(e){return[e.charCodeAt(0)]},Be.CHAR=p(1),Ae.CHARARRAY=function(e){for(var t=[],r=0;r<e.length;r+=1)t[r]=e.charCodeAt(r);return t},Be.CHARARRAY=function(e){return e.length},Ae.USHORT=function(e){return[255&e>>8,255&e]},Be.USHORT=p(2),Ae.SHORT=function(e){return e>=32768&&(e=-(65536-e)),[255&e>>8,255&e]},Be.SHORT=p(2),Ae.UINT24=function(e){return[255&e>>16,255&e>>8,255&e]},Be.UINT24=p(3),Ae.ULONG=function(e){return[255&e>>24,255&e>>16,255&e>>8,255&e]},Be.ULONG=p(4),Ae.LONG=function(e){return e>=2147483648&&(e=-(4294967296-e)),[255&e>>24,255&e>>16,255&e>>8,255&e]},Be.LONG=p(4),Ae.FIXED=Ae.ULONG,Be.FIXED=Be.ULONG,Ae.FWORD=Ae.SHORT,Be.FWORD=Be.SHORT,Ae.UFWORD=Ae.USHORT,Be.UFWORD=Be.USHORT,Ae.LONGDATETIME=function(e){return[0,0,0,0,255&e>>24,255&e>>16,255&e>>8,255&e]},Be.LONGDATETIME=p(8),Ae.TAG=function(e){return we.argument(4===e.length,"Tag should be exactly 4 ASCII characters."),[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]},Be.TAG=p(4),Ae.Card8=Ae.BYTE,Be.Card8=Be.BYTE,Ae.Card16=Ae.USHORT,Be.Card16=Be.USHORT,Ae.OffSize=Ae.BYTE,Be.OffSize=Be.BYTE,Ae.SID=Ae.USHORT,Be.SID=Be.USHORT,Ae.NUMBER=function(e){return-107<=e&&107>=e?[e+139]:108<=e&&1131>=e?(e-=108,[247+(e>>8),255&e]):-1131<=e&&-108>=e?(e=-e-108,[251+(e>>8),255&e]):-32768<=e&&32767>=e?Ae.NUMBER16(e):Ae.NUMBER32(e)},Be.NUMBER=function(e){return Ae.NUMBER(e).length},Ae.NUMBER16=function(e){return[28,255&e>>8,255&e]},Be.NUMBER16=p(3),Ae.NUMBER32=function(e){return[29,255&e>>24,255&e>>16,255&e>>8,255&e]},Be.NUMBER32=p(5),Ae.REAL=function(t){var r=t.toString(),a=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(r);if(a){var o=parseFloat("1e"+((a[2]?+a[2]:0)+a[1].length));r=($(t*o)/o).toString()}for(var n="",s=0,l=r.length,p;s<l;s+=1)p=r[s],n+="e"===p?"-"===r[++s]?"c":"b":"."===p?"a":"-"===p?"e":p;n+=1&n.length?"f":"ff";for(var d=[30],i=0,c=n.length;i<c;i+=2)d.push(parseInt(n.substr(i,2),16));return d},Be.REAL=function(e){return Ae.REAL(e).length},Ae.NAME=Ae.CHARARRAY,Be.NAME=Be.CHARARRAY,Ae.STRING=Ae.CHARARRAY,Be.STRING=Be.CHARARRAY,xe.UTF8=function(e,t,r){for(var a=[],o=0;o<r;o++,t+=1)a[o]=e.getUint8(t);return oe.apply(null,a)},xe.UTF16=function(e,t,r){for(var a=[],o=0;o<r/2;o++,t+=2)a[o]=e.getUint16(t);return oe.apply(null,a)},Ae.UTF16=function(e){for(var t=[],r=0,a;r<e.length;r+=1)a=e.charCodeAt(r),t[t.length]=255&a>>8,t[t.length]=255&a;return t},Be.UTF16=function(e){return 2*e.length};var Ce={"x-mac-croatian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\u0160\u2122\xB4\xA8\u2260\u017D\xD8\u221E\xB1\u2264\u2265\u2206\xB5\u2202\u2211\u220F\u0161\u222B\xAA\xBA\u03A9\u017E\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u0106\xAB\u010C\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u0110\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\uF8FF\xA9\u2044\u20AC\u2039\u203A\xC6\xBB\u2013\xB7\u201A\u201E\u2030\xC2\u0107\xC1\u010D\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u0111\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u03C0\xCB\u02DA\xB8\xCA\xE6\u02C7","x-mac-cyrillic":"\u0410\u0411\u0412\u0413\u0414\u0415\u0416\u0417\u0418\u0419\u041A\u041B\u041C\u041D\u041E\u041F\u0420\u0421\u0422\u0423\u0424\u0425\u0426\u0427\u0428\u0429\u042A\u042B\u042C\u042D\u042E\u042F\u2020\xB0\u0490\xA3\xA7\u2022\xB6\u0406\xAE\xA9\u2122\u0402\u0452\u2260\u0403\u0453\u221E\xB1\u2264\u2265\u0456\xB5\u0491\u0408\u0404\u0454\u0407\u0457\u0409\u0459\u040A\u045A\u0458\u0405\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\u040B\u045B\u040C\u045C\u0455\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u201E\u040E\u045E\u040F\u045F\u2116\u0401\u0451\u044F\u0430\u0431\u0432\u0433\u0434\u0435\u0436\u0437\u0438\u0439\u043A\u043B\u043C\u043D\u043E\u043F\u0440\u0441\u0442\u0443\u0444\u0445\u0446\u0447\u0448\u0449\u044A\u044B\u044C\u044D\u044E","x-mac-gaelic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u1E02\xB1\u2264\u2265\u1E03\u010A\u010B\u1E0A\u1E0B\u1E1E\u1E1F\u0120\u0121\u1E40\xE6\xF8\u1E41\u1E56\u1E57\u027C\u0192\u017F\u1E60\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\u1E61\u1E9B\xFF\u0178\u1E6A\u20AC\u2039\u203A\u0176\u0177\u1E6B\xB7\u1EF2\u1EF3\u204A\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\u2663\xD2\xDA\xDB\xD9\u0131\xDD\xFD\u0174\u0175\u1E84\u1E85\u1E80\u1E81\u1E82\u1E83","x-mac-greek":"\xC4\xB9\xB2\xC9\xB3\xD6\xDC\u0385\xE0\xE2\xE4\u0384\xA8\xE7\xE9\xE8\xEA\xEB\xA3\u2122\xEE\xEF\u2022\xBD\u2030\xF4\xF6\xA6\u20AC\xF9\xFB\xFC\u2020\u0393\u0394\u0398\u039B\u039E\u03A0\xDF\xAE\xA9\u03A3\u03AA\xA7\u2260\xB0\xB7\u0391\xB1\u2264\u2265\xA5\u0392\u0395\u0396\u0397\u0399\u039A\u039C\u03A6\u03AB\u03A8\u03A9\u03AC\u039D\xAC\u039F\u03A1\u2248\u03A4\xAB\xBB\u2026\xA0\u03A5\u03A7\u0386\u0388\u0153\u2013\u2015\u201C\u201D\u2018\u2019\xF7\u0389\u038A\u038C\u038E\u03AD\u03AE\u03AF\u03CC\u038F\u03CD\u03B1\u03B2\u03C8\u03B4\u03B5\u03C6\u03B3\u03B7\u03B9\u03BE\u03BA\u03BB\u03BC\u03BD\u03BF\u03C0\u03CE\u03C1\u03C3\u03C4\u03B8\u03C9\u03C2\u03C7\u03C5\u03B6\u03CA\u03CB\u0390\u03B0\xAD","x-mac-icelandic":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\xDD\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\xD0\xF0\xDE\xFE\xFD\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-inuit":"\u1403\u1404\u1405\u1406\u140A\u140B\u1431\u1432\u1433\u1434\u1438\u1439\u1449\u144E\u144F\u1450\u1451\u1455\u1456\u1466\u146D\u146E\u146F\u1470\u1472\u1473\u1483\u148B\u148C\u148D\u148E\u1490\u1491\xB0\u14A1\u14A5\u14A6\u2022\xB6\u14A7\xAE\xA9\u2122\u14A8\u14AA\u14AB\u14BB\u14C2\u14C3\u14C4\u14C5\u14C7\u14C8\u14D0\u14EF\u14F0\u14F1\u14F2\u14F4\u14F5\u1505\u14D5\u14D6\u14D7\u14D8\u14DA\u14DB\u14EA\u1528\u1529\u152A\u152B\u152D\u2026\xA0\u152E\u153E\u1555\u1556\u1557\u2013\u2014\u201C\u201D\u2018\u2019\u1558\u1559\u155A\u155D\u1546\u1547\u1548\u1549\u154B\u154C\u1550\u157F\u1580\u1581\u1582\u1583\u1584\u1585\u158F\u1590\u1591\u1592\u1593\u1594\u1595\u1671\u1672\u1673\u1674\u1675\u1676\u1596\u15A0\u15A1\u15A2\u15A3\u15A4\u15A5\u15A6\u157C\u0141\u0142","x-mac-ce":"\xC4\u0100\u0101\xC9\u0104\xD6\xDC\xE1\u0105\u010C\xE4\u010D\u0106\u0107\xE9\u0179\u017A\u010E\xED\u010F\u0112\u0113\u0116\xF3\u0117\xF4\xF6\xF5\xFA\u011A\u011B\xFC\u2020\xB0\u0118\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\u0119\xA8\u2260\u0123\u012E\u012F\u012A\u2264\u2265\u012B\u0136\u2202\u2211\u0142\u013B\u013C\u013D\u013E\u0139\u013A\u0145\u0146\u0143\xAC\u221A\u0144\u0147\u2206\xAB\xBB\u2026\xA0\u0148\u0150\xD5\u0151\u014C\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\u014D\u0154\u0155\u0158\u2039\u203A\u0159\u0156\u0157\u0160\u201A\u201E\u0161\u015A\u015B\xC1\u0164\u0165\xCD\u017D\u017E\u016A\xD3\xD4\u016B\u016E\xDA\u016F\u0170\u0171\u0172\u0173\xDD\xFD\u0137\u017B\u0141\u017C\u0122\u02C7",macintosh:"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\uFB01\uFB02\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-romanian":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\u0102\u0218\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\u0103\u0219\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u2044\u20AC\u2039\u203A\u021A\u021B\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\u0131\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7","x-mac-turkish":"\xC4\xC5\xC7\xC9\xD1\xD6\xDC\xE1\xE0\xE2\xE4\xE3\xE5\xE7\xE9\xE8\xEA\xEB\xED\xEC\xEE\xEF\xF1\xF3\xF2\xF4\xF6\xF5\xFA\xF9\xFB\xFC\u2020\xB0\xA2\xA3\xA7\u2022\xB6\xDF\xAE\xA9\u2122\xB4\xA8\u2260\xC6\xD8\u221E\xB1\u2264\u2265\xA5\xB5\u2202\u2211\u220F\u03C0\u222B\xAA\xBA\u03A9\xE6\xF8\xBF\xA1\xAC\u221A\u0192\u2248\u2206\xAB\xBB\u2026\xA0\xC0\xC3\xD5\u0152\u0153\u2013\u2014\u201C\u201D\u2018\u2019\xF7\u25CA\xFF\u0178\u011E\u011F\u0130\u0131\u015E\u015F\u2021\xB7\u201A\u201E\u2030\xC2\xCA\xC1\xCB\xC8\xCD\xCE\xCF\xCC\xD3\xD4\uF8FF\xD2\xDA\xDB\xD9\uF8A0\u02C6\u02DC\xAF\u02D8\u02D9\u02DA\xB8\u02DD\u02DB\u02C7"};xe.MACSTRING=function(t,r,a,o){var n=Ce[o];if(void 0!==n){for(var e="",i=0,s;i<a;i++)s=t.getUint8(r+i),e+=127>=s?oe(s):n[127&s];return e}};var De="function"==typeof WeakMap&&new WeakMap,Fe=function(t){if(!Ge)for(var r in Ge={},Ce)Ge[r]=new String(r);var a=Ge[t];if(void 0!==a){if(De){var o=De.get(a);if(void 0!==o)return o}var n=Ce[t];if(void 0!==n){for(var e={},i=0;i<n.length;i++)e[n.charCodeAt(i)]=i+128;return De&&De.set(a,e),e}}},Ge;Ae.MACSTRING=function(t,r){var a=Fe(r);if(void 0!==a){for(var o=[],n=0,i;n<t.length;n++){if(i=t.charCodeAt(n),128<=i&&void 0===(i=a[i]))return;o[n]=i}return o}},Be.MACSTRING=function(e,t){var r=Ae.MACSTRING(e,t);return void 0===r?0:r.length},Ae.VARDELTAS=function(e){for(var t=0,r=[],a;t<e.length;)a=e[t],t=0===a?m(e,t,r):-128<=a&&127>=a?f(e,t,r):x(e,t,r);return r},Ae.INDEX=function(t){for(var r=1,a=[r],o=[],n=0,s;n<t.length;n+=1)s=Ae.OBJECT(t[n]),Array.prototype.push.apply(o,s),r+=s.length,a.push(r);if(0===o.length)return[0,0];for(var l=[],p=0|1+S(ee(r)/ee(2))/8,d=[void 0,Ae.BYTE,Ae.USHORT,Ae.UINT24,Ae.ULONG][p],i=0,c;i<a.length;i+=1)c=d(a[i]),Array.prototype.push.apply(l,c);return Array.prototype.concat(Ae.Card16(t.length),Ae.OffSize(p),l,o)},Be.INDEX=function(e){return Ae.INDEX(e).length},Ae.DICT=function(t){for(var r=[],a=Object.keys(t),o=a.length,n=0;n<o;n+=1){var i=parseInt(a[n],0),s=t[i];r=r.concat(Ae.OPERAND(s.value,s.type)),r=r.concat(Ae.OPERATOR(i))}return r},Be.DICT=function(e){return Ae.DICT(e).length},Ae.OPERATOR=function(e){return 1200>e?[e]:[12,e-1200]},Ae.OPERAND=function(e,t){var r=[];if(Array.isArray(t))for(var a=0;a<t.length;a+=1)we.argument(e.length===t.length,"Not enough arguments given for type"+t),r=r.concat(Ae.OPERAND(e[a],t[a]));else if("SID"===t)r=r.concat(Ae.NUMBER(e));else if("offset"===t)r=r.concat(Ae.NUMBER32(e));else if("number"===t)r=r.concat(Ae.NUMBER(e));else{if("real"!==t)throw new Error("Unknown operand type "+t);r=r.concat(Ae.REAL(e))}return r},Ae.OP=Ae.BYTE,Be.OP=Be.BYTE;var ea="function"==typeof WeakMap&&new WeakMap;Ae.CHARSTRING=function(t){if(ea){var r=ea.get(t);if(void 0!==r)return r}for(var a=[],o=t.length,n=0,i;n<o;n+=1)i=t[n],a=a.concat(Ae[i.type](i.value));return ea&&ea.set(t,a),a},Be.CHARSTRING=function(e){return Ae.CHARSTRING(e).length},Ae.OBJECT=function(e){var t=Ae[e.type];return we.argument(void 0!==t,"No encoding function for type "+e.type),t(e.value)},Be.OBJECT=function(e){var t=Be[e.type];return we.argument(void 0!==t,"No sizeOf function for type "+e.type),t(e.value)},Ae.TABLE=function(t){for(var r=[],a=t.fields.length,o=[],n=[],e=0;e<a;e+=1){var s=t.fields[e],p=Ae[s.type];we.argument(void 0!==p,"No encoding function for field type "+s.type+" ("+s.name+")");var d=t[s.name];void 0===d&&(d=s.value);var c=p(d);"TABLE"===s.type?(n.push(r.length),r=r.concat([0,0]),o.push(c)):r=r.concat(c)}for(var u=0;u<o.length;u+=1){var h=n[u],l=r.length;we.argument(65536>l,"Table "+t.tableName+" too big."),r[h]=l>>8,r[h+1]=255&l,r=r.concat(o[u])}return r},Be.TABLE=function(t){for(var r=0,a=t.fields.length,o=0;o<a;o+=1){var n=t.fields[o],e=Be[n.type];we.argument(void 0!==e,"No sizeOf function for field type "+n.type+" ("+n.name+")");var i=t[n.name];void 0===i&&(i=n.value),r+=e(i),"TABLE"===n.type&&(r+=2)}return r},Ae.RECORD=Ae.TABLE,Be.RECORD=Be.TABLE,Ae.LITERAL=function(e){return e},Be.LITERAL=function(e){return e.length},y.prototype.encode=function(){return Ae.TABLE(this)},y.prototype.sizeOf=function(){return Be.TABLE(this)},C.prototype=Object.create(y.prototype),C.prototype.constructor=C,D.prototype=Object.create(y.prototype),D.prototype.constructor=D,E.prototype=Object.create(y.prototype),E.prototype.constructor=E,B.prototype=Object.create(y.prototype),B.prototype.constructor=B;var He={Table:y,Record:y,Coverage:C,ScriptList:D,FeatureList:E,LookupList:B,ushortList:w,tableList:k,recordList:A},Ie={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};L.prototype.parseByte=function(){var e=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},L.prototype.parseChar=function(){var e=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,e},L.prototype.parseCard8=L.prototype.parseByte,L.prototype.parseUShort=function(){var e=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},L.prototype.parseCard16=L.prototype.parseUShort,L.prototype.parseSID=L.prototype.parseUShort,L.prototype.parseOffset16=L.prototype.parseUShort,L.prototype.parseShort=function(){var e=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,e},L.prototype.parseF2Dot14=function(){var e=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,e},L.prototype.parseULong=function(){var e=I(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},L.prototype.parseOffset32=L.prototype.parseULong,L.prototype.parseFixed=function(){var e=z(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,e},L.prototype.parseString=function(t){var r=this.data,a=this.offset+this.relativeOffset,o="";this.relativeOffset+=t;for(var n=0;n<t;n++)o+=oe(r.getUint8(a+n));return o},L.prototype.parseTag=function(){return this.parseString(4)},L.prototype.parseLongDateTime=function(){var e=I(this.data,this.offset+this.relativeOffset+4);return e-=2082844800,this.relativeOffset+=8,e},L.prototype.parseVersion=function(e){var t=G(this.data,this.offset+this.relativeOffset),r=G(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,void 0===e&&(e=4096),t+r/e/10},L.prototype.skip=function(e,t){void 0===t&&(t=1),this.relativeOffset+=Ie[e]*t},L.prototype.parseULongList=function(t){void 0===t&&(t=this.parseULong());for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,i=0;i<t;i++)r[i]=o.getUint32(n),n+=4;return this.relativeOffset+=4*t,r},L.prototype.parseOffset16List=L.prototype.parseUShortList=function(t){void 0===t&&(t=this.parseUShort());for(var r=Array(t),o=this.data,n=this.offset+this.relativeOffset,i=0;i<t;i++)r[i]=o.getUint16(n),n+=2;return this.relativeOffset+=2*t,r},L.prototype.parseShortList=function(t){for(var r=Array(t),a=this.data,o=this.offset+this.relativeOffset,n=0;n<t;n++)r[n]=a.getInt16(o),o+=2;return this.relativeOffset+=2*t,r},L.prototype.parseByteList=function(t){for(var r=Array(t),a=this.data,o=this.offset+this.relativeOffset,n=0;n<t;n++)r[n]=a.getUint8(o++);return this.relativeOffset+=t,r},L.prototype.parseList=function(t,r){var o=this;r||(r=t,t=this.parseUShort());for(var n=Array(t),i=0;i<t;i++)n[i]=r.call(o);return n},L.prototype.parseList32=function(t,r){var o=this;r||(r=t,t=this.parseULong());for(var n=Array(t),i=0;i<t;i++)n[i]=r.call(o);return n},L.prototype.parseRecordList=function(t,r){var o=this;r||(r=t,t=this.parseUShort());for(var n=Array(t),s=Object.keys(r),e=0;e<t;e++){for(var l={},p=0;p<s.length;p++){var d=s[p],i=r[d];l[d]=i.call(o)}n[e]=l}return n},L.prototype.parseRecordList32=function(t,r){var o=this;r||(r=t,t=this.parseULong());for(var n=Array(t),s=Object.keys(r),e=0;e<t;e++){for(var l={},p=0;p<s.length;p++){var d=s[p],i=r[d];l[d]=i.call(o)}n[e]=l}return n},L.prototype.parseStruct=function(t){var r=this;if("function"==typeof t)return t.call(this);for(var a=Object.keys(t),o={},n=0;n<a.length;n++){var i=a[n],s=t[i];o[i]=s.call(r)}return o},L.prototype.parseValueRecord=function(e){if(void 0===e&&(e=this.parseUShort()),0!==e){var t={};return 1&e&&(t.xPlacement=this.parseShort()),2&e&&(t.yPlacement=this.parseShort()),4&e&&(t.xAdvance=this.parseShort()),8&e&&(t.yAdvance=this.parseShort()),16&e&&(t.xPlaDevice=void 0,this.parseShort()),32&e&&(t.yPlaDevice=void 0,this.parseShort()),64&e&&(t.xAdvDevice=void 0,this.parseShort()),128&e&&(t.yAdvDevice=void 0,this.parseShort()),t}},L.prototype.parseValueRecordList=function(){for(var t=this,r=this.parseUShort(),a=this.parseUShort(),o=Array(a),n=0;n<a;n++)o[n]=t.parseValueRecord(r);return o},L.prototype.parsePointer=function(e){var t=this.parseOffset16();if(0<t)return new L(this.data,this.offset+t).parseStruct(e)},L.prototype.parsePointer32=function(e){var t=this.parseOffset32();if(0<t)return new L(this.data,this.offset+t).parseStruct(e)},L.prototype.parseListOfLists=function(t){for(var r=this,a=this.parseOffset16List(),o=a.length,n=this.relativeOffset,e=Array(o),s=0,l;s<o;s++)if(l=a[s],0===l)e[s]=void 0;else if(r.relativeOffset=l,t){for(var p=r.parseOffset16List(),i=Array(p.length),d=0;d<p.length;d++)r.relativeOffset=l+p[d],i[d]=t.call(r);e[s]=i}else e[s]=r.parseUShortList();return this.relativeOffset=n,e},L.prototype.parseCoverage=function(){var t=this,r=this.offset+this.relativeOffset,a=this.parseUShort(),o=this.parseUShort();if(1===a)return{format:1,glyphs:this.parseUShortList(o)};if(2===a){for(var n=Array(o),e=0;e<o;e++)n[e]={start:t.parseUShort(),end:t.parseUShort(),index:t.parseUShort()};return{format:2,ranges:n}}throw new Error("0x"+r.toString(16)+": Coverage format must be 1 or 2.")},L.prototype.parseClassDef=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(2===t)return{format:2,ranges:this.parseRecordList({start:L.uShort,end:L.uShort,classId:L.uShort})};throw new Error("0x"+e.toString(16)+": ClassDef format must be 1 or 2.")},L.list=function(e,t){return function(){return this.parseList(e,t)}},L.list32=function(e,t){return function(){return this.parseList32(e,t)}},L.recordList=function(e,t){return function(){return this.parseRecordList(e,t)}},L.recordList32=function(e,t){return function(){return this.parseRecordList32(e,t)}},L.pointer=function(e){return function(){return this.parsePointer(e)}},L.pointer32=function(e){return function(){return this.parsePointer32(e)}},L.tag=L.prototype.parseTag,L.byte=L.prototype.parseByte,L.uShort=L.offset16=L.prototype.parseUShort,L.uShortList=L.prototype.parseUShortList,L.uLong=L.offset32=L.prototype.parseULong,L.uLongList=L.prototype.parseULongList,L.struct=L.prototype.parseStruct,L.coverage=L.prototype.parseCoverage,L.classDef=L.prototype.parseClassDef;var Je={reserved:L.uShort,reqFeatureIndex:L.uShort,featureIndexes:L.uShortList};L.prototype.parseScriptList=function(){return this.parsePointer(L.recordList({tag:L.tag,script:L.pointer({defaultLangSys:L.pointer(Je),langSysRecords:L.recordList({tag:L.tag,langSys:L.pointer(Je)})})}))||[]},L.prototype.parseFeatureList=function(){return this.parsePointer(L.recordList({tag:L.tag,feature:L.pointer({featureParams:L.offset16,lookupListIndexes:L.uShortList})}))||[]},L.prototype.parseLookupList=function(e){return this.parsePointer(L.list(L.pointer(function(){var t=this.parseUShort();we.argument(1<=t&&9>=t,"GPOS/GSUB lookup type "+t+" unknown.");var r=this.parseUShort();return{lookupType:t,lookupFlag:r,subtables:this.parseList(L.pointer(e[t])),markFilteringSet:16&r?this.parseUShort():void 0}})))||[]},L.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var e=this.parseUShort(),t=this.parseUShort();return we.argument(1===e&&1>t,"GPOS/GSUB feature variations table unknown."),this.parseRecordList32({conditionSetOffset:L.offset32,featureTableSubstitutionOffset:L.offset32})})||[]};var Ke={getByte:F,getCard8:F,getUShort:G,getCard16:G,getShort:function(e,t){return e.getInt16(t,!1)},getULong:I,getFixed:z,getTag:function(e,t){for(var r="",a=t;a<t+4;a+=1)r+=oe(e.getInt8(a));return r},getOffset:function(t,r,a){for(var o=0,n=0;n<a;n+=1)o<<=8,o+=t.getUint8(r+n);return o},getBytes:function(t,r,a){for(var o=[],n=r;n<a;n+=1)o.push(t.getUint8(n));return o},bytesToString:function(e){for(var t="",r=0;r<e.length;r+=1)t+=oe(e[r]);return t},Parser:L},Le={parse:function(t,r){var a={};a.version=Ke.getUShort(t,r),we.argument(0===a.version,"cmap table version should be 0."),a.numTables=Ke.getUShort(t,r+2);for(var o=-1,n=a.numTables-1;0<=n;n-=1){var i=Ke.getUShort(t,r+4+8*n),s=Ke.getUShort(t,r+4+8*n+2);if(3===i&&(0===s||1===s||10===s)||0===i&&(0===s||1===s||2===s||3===s||4===s)){o=Ke.getULong(t,r+4+8*n+4);break}}if(-1===o)throw new Error("No valid cmap sub-tables found.");var l=new Ke.Parser(t,r+o);if(a.format=l.parseUShort(),12===a.format)H(a,l);else{if(4!==a.format)throw new Error("Only format 4 and 12 cmap tables are supported (found format "+a.format+").");R(a,l,t,r,o)}return a},make:function(t){var r=!0,a;for(a=t.length-1;0<a;a-=1)if(65535<t.get(a).unicode){console.log("Adding CMAP format 12 (needed!)"),r=!1;break}var s=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:r?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:r?12:20}];r||(s=s.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),s=s.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var u=new He.Table("cmap",s);for(u.segments=[],a=0;a<t.length;a+=1){for(var e=t.get(a),y=0;y<e.unicodes.length;y+=1)W(u,e.unicodes[y],a);u.segments=u.segments.sort(function(e,t){return e.start-t.start})}Q(u);var f=u.segments.length,h=0,_=[],x=[],v=[],T=[],C=[],E=[];for(a=0;a<f;a+=1){var R=u.segments[a];65535>=R.end&&65535>=R.start?(_=_.concat({name:"end_"+a,type:"USHORT",value:R.end}),x=x.concat({name:"start_"+a,type:"USHORT",value:R.start}),v=v.concat({name:"idDelta_"+a,type:"SHORT",value:R.delta}),T=T.concat({name:"idRangeOffset_"+a,type:"USHORT",value:R.offset}),void 0!==R.glyphId&&(C=C.concat({name:"glyph_"+a,type:"USHORT",value:R.glyphId}))):h+=1,r||void 0===R.glyphIndex||(E=E.concat({name:"cmap12Start_"+a,type:"ULONG",value:R.start}),E=E.concat({name:"cmap12End_"+a,type:"ULONG",value:R.end}),E=E.concat({name:"cmap12Glyph_"+a,type:"ULONG",value:R.glyphIndex}))}if(u.segCountX2=2*(f-h),u.searchRange=2*te(2,S(ee(f-h)/ee(2))),u.entrySelector=ee(u.searchRange/2)/ee(2),u.rangeShift=u.segCountX2-u.searchRange,u.fields=u.fields.concat(_),u.fields.push({name:"reservedPad",type:"USHORT",value:0}),u.fields=u.fields.concat(x),u.fields=u.fields.concat(v),u.fields=u.fields.concat(T),u.fields=u.fields.concat(C),u.cmap4Length=14+2*_.length+2+2*x.length+2*v.length+2*T.length+2*C.length,!r){var p=16+4*E.length;u.cmap12Offset=20+u.cmap4Length,u.fields=u.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:p},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:E.length/3}]),u.fields=u.fields.concat(E)}return u}},Me=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Ne=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Oe=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],Pe=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];V.prototype.charToGlyphIndex=function(t){var r=t.codePointAt(0),a=this.font.glyphs;if(a)for(var o=0;o<a.length;o+=1)for(var n=a.get(o),e=0;e<n.unicodes.length;e+=1)if(n.unicodes[e]===r)return o;return null},j.prototype.charToGlyphIndex=function(e){return this.cmap.glyphIndexMap[e.codePointAt(0)]||0},Y.prototype.charToGlyphIndex=function(e){var t=e.codePointAt(0),r=this.encoding[t];return this.charset.indexOf(r)},q.prototype.nameToGlyphIndex=function(e){return this.names.indexOf(e)},q.prototype.glyphIndexToName=function(e){return this.names[e]};var Qe={line:function(t,r,a,o,n){t.beginPath(),t.moveTo(r,a),t.lineTo(o,n),t.stroke()}};ie.prototype.bindConstructorValues=function(e){this.index=e.index||0,this.name=e.name||null,this.unicode=e.unicode||void 0,this.unicodes=e.unicodes||void 0!==e.unicode?[e.unicode]:[],e.xMin&&(this.xMin=e.xMin),e.yMin&&(this.yMin=e.yMin),e.xMax&&(this.xMax=e.xMax),e.yMax&&(this.yMax=e.yMax),e.advanceWidth&&(this.advanceWidth=e.advanceWidth),Object.defineProperty(this,"path",J(this,e.path))},ie.prototype.addUnicode=function(e){0===this.unicodes.length&&(this.unicode=e),this.unicodes.push(e)},ie.prototype.getBoundingBox=function(){return this.path.getBoundingBox()},ie.prototype.getPath=function(t,r,o,n,s){t=void 0===t?0:t,r=void 0===r?0:r,o=void 0===o?72:o;var e,p;n||(n={});var u=n.xScale,y=n.yScale;if(n.hinting&&s&&s.hinting&&(p=this.path&&s.hinting.exec(this,o)),p)e=s.hinting.getCommands(p),t=$(t),r=$(r),u=y=1;else{e=this.path.commands;var _=1/this.path.unitsPerEm*o;void 0===u&&(u=_),void 0===y&&(y=_)}for(var x=new N,v=0,S;v<e.length;v+=1)S=e[v],"M"===S.type?x.moveTo(t+S.x*u,r+-S.y*y):"L"===S.type?x.lineTo(t+S.x*u,r+-S.y*y):"Q"===S.type?x.quadraticCurveTo(t+S.x1*u,r+-S.y1*y,t+S.x*u,r+-S.y*y):"C"===S.type?x.curveTo(t+S.x1*u,r+-S.y1*y,t+S.x2*u,r+-S.y2*y,t+S.x*u,r+-S.y*y):"Z"===S.type&&x.closePath();return x},ie.prototype.getContours=function(){var t=this;if(void 0===this.points)return[];for(var r=[],a=[],o=0,n;o<this.points.length;o+=1)n=t.points[o],a.push(n),n.lastPointOfContour&&(r.push(a),a=[]);return we.argument(0===a.length,"There are still points left in the current contour."),r},ie.prototype.getMetrics=function(){for(var t=this.path.commands,r=[],a=[],o=0,n;o<t.length;o+=1)n=t[o],"Z"!==n.type&&(r.push(n.x),a.push(n.y)),"Q"!==n.type&&"C"!==n.type||(r.push(n.x1),a.push(n.y1)),"C"===n.type&&(r.push(n.x2),a.push(n.y2));var i={xMin:U.apply(null,r),yMin:U.apply(null,a),xMax:T.apply(null,r),yMax:T.apply(null,a),leftSideBearing:this.leftSideBearing};return isFinite(i.xMin)||(i.xMin=0),isFinite(i.xMax)||(i.xMax=this.advanceWidth),isFinite(i.yMin)||(i.yMin=0),isFinite(i.yMax)||(i.yMax=0),i.rightSideBearing=this.advanceWidth-i.leftSideBearing-(i.xMax-i.xMin),i},ie.prototype.draw=function(t,r,a,o,n){this.getPath(r,a,o,n).draw(t)},ie.prototype.drawPoints=function(t,r,a,o){function n(r,a,o,n){t.beginPath();for(var e=0;e<r.length;e+=1)t.moveTo(a+r[e].x*n,o+r[e].y*n),t.arc(a+r[e].x*n,o+r[e].y*n,2,0,2*X,!1);t.closePath(),t.fill()}r=void 0===r?0:r,a=void 0===a?0:a,o=void 0===o?24:o;for(var e=1/this.path.unitsPerEm*o,s=[],l=[],p=this.path,i=0,u;i<p.commands.length;i+=1)u=p.commands[i],void 0!==u.x&&s.push({x:u.x,y:-u.y}),void 0!==u.x1&&l.push({x:u.x1,y:-u.y1}),void 0!==u.x2&&l.push({x:u.x2,y:-u.y2});t.fillStyle="blue",n(s,r,a,e),t.fillStyle="red",n(l,r,a,e)},ie.prototype.drawMetrics=function(t,r,a,o){var n;r=void 0===r?0:r,a=void 0===a?0:a,o=void 0===o?24:o,n=1/this.path.unitsPerEm*o,t.lineWidth=1,t.strokeStyle="black",Qe.line(t,r,-1e4,r,1e4),Qe.line(t,-1e4,a,1e4,a);var s=this.xMin||0,l=this.yMin||0,p=this.xMax||0,u=this.yMax||0,i=this.advanceWidth||0;t.strokeStyle="blue",Qe.line(t,r+s*n,-1e4,r+s*n,1e4),Qe.line(t,r+p*n,-1e4,r+p*n,1e4),Qe.line(t,-1e4,a+-l*n,1e4,a+-l*n),Qe.line(t,-1e4,a+-u*n,1e4,a+-u*n),t.strokeStyle="green",Qe.line(t,r+i*n,-1e4,r+i*n,1e4)},be.prototype.get=function(e){return"function"==typeof this.glyphs[e]&&(this.glyphs[e]=this.glyphs[e]()),this.glyphs[e]},be.prototype.push=function(e,t){this.glyphs[e]=t,this.length++};var Re={GlyphSet:be,glyphLoader:function(e,t){return new ie({index:t,font:e})},ttfGlyphLoader:function(t,r,a,o,n,e){return function(){var i=new ie({index:r,font:t});return i.path=function(){a(i,o,n);var r=e(t.glyphs,i);return r.unitsPerEm=t.unitsPerEm,r},ye(i,"xMin","_xMin"),ye(i,"xMax","_xMax"),ye(i,"yMin","_yMin"),ye(i,"yMax","_yMax"),i}},cffGlyphLoader:function(t,r,a,o){return function(){var n=new ie({index:r,font:t});return n.path=function(){var e=a(t,n,o);return e.unitsPerEm=t.unitsPerEm,e},n}}},Se=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],Te=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}],Ue={parse:function(y,a,_){_.tables.cff={};var c=st(y,a),d=et(y,c.endOffset,Ke.bytesToString),e=et(y,d.endOffset),f=et(y,e.endOffset,Ke.bytesToString),g=et(y,f.endOffset);_.gsubrs=g.objects,_.gsubrsBias=je(_.gsubrs);var h=dt(y,a,e.objects,f.objects);if(1!==h.length)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+h.length);var i=h[0];if(_.tables.cff.topDict=i,i._privateDict&&(_.defaultWidthX=i._privateDict.defaultWidthX,_.nominalWidthX=i._privateDict.nominalWidthX),void 0!==i.ros[0]&&void 0!==i.ros[1]&&(_.isCIDFont=!0),_.isCIDFont){var b=i.fdArray,x=i.fdSelect;if(0===b||0===x)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");b+=a;var S=et(y,b),m=dt(y,a,S.objects,f.objects);i._fdArray=m,x+=a,i._fdSelect=ht(y,x,_.numGlyphs,m.length)}var n=a+i.private[1],o=pt(y,n,i.private[0],f.objects);if(_.defaultWidthX=o.defaultWidthX,_.nominalWidthX=o.nominalWidthX,0!==o.subrs){var p=n+o.subrs,T=et(y,p);_.subrs=T.objects,_.subrsBias=je(_.subrs)}else _.subrs=[],_.subrsBias=0;var r=et(y,a+i.charStrings);_.nGlyphs=r.objects.length;var s=ct(y,a+i.charset,_.nGlyphs,f.objects);_.cffEncoding=0===i.encoding?new Y(Ne,s):1===i.encoding?new Y(Oe,s):ut(y,a+i.encoding,s),_.encoding=_.encoding||_.cffEncoding,_.glyphs=new Re.GlyphSet(_);for(var t=0,C;t<_.nGlyphs;t+=1)C=r.objects[t],_.glyphs.push(t,Re.cffGlyphLoader(_,t,mt,C))},make:function(t,r){for(var a=new He.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),o=1/r.unitsPerEm,e={version:r.version,fullName:r.fullName,familyName:r.familyName,weight:r.weightName,fontBBox:r.fontBBox||[0,0,0,0],fontMatrix:[o,0,0,o,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},n={},s=[],p=1,d;p<t.length;p+=1)d=t.get(p),s.push(d.name);var u=[];a.header=yt(),a.nameIndex=ft([r.postScriptName]);var m=bt(e,u);a.topDictIndex=xt(m),a.globalSubrIndex=St(),a.charsets=Tt(s,u),a.charStringsIndex=Et(t),a.privateDict=Rt(n,u),a.stringIndex=vt(u);var h=a.header.sizeOf()+a.nameIndex.sizeOf()+a.topDictIndex.sizeOf()+a.stringIndex.sizeOf()+a.globalSubrIndex.sizeOf();return e.charset=h,e.encoding=0,e.charStrings=e.charset+a.charsets.sizeOf(),e.private[1]=e.charStrings+a.charStringsIndex.sizeOf(),m=bt(e,u),a.topDictIndex=xt(m),a}},Ve={parse:function(e,t){var r={},a=new Ke.Parser(e,t);return r.version=a.parseVersion(),r.fontRevision=$(1e3*a.parseFixed())/1e3,r.checkSumAdjustment=a.parseULong(),r.magicNumber=a.parseULong(),we.argument(1594834165===r.magicNumber,"Font header has wrong magic number."),r.flags=a.parseUShort(),r.unitsPerEm=a.parseUShort(),r.created=a.parseLongDateTime(),r.modified=a.parseLongDateTime(),r.xMin=a.parseShort(),r.yMin=a.parseShort(),r.xMax=a.parseShort(),r.yMax=a.parseShort(),r.macStyle=a.parseUShort(),r.lowestRecPPEM=a.parseUShort(),r.fontDirectionHint=a.parseShort(),r.indexToLocFormat=a.parseShort(),r.glyphDataFormat=a.parseShort(),r},make:function(e){var t=$(new Date().getTime()/1e3)+2082844800,r=t;return e.createdTimestamp&&(r=e.createdTimestamp+2082844800),new He.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:r},{name:"modified",type:"LONGDATETIME",value:t},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],e)}},We={parse:function(e,t){var r={},a=new Ke.Parser(e,t);return r.version=a.parseVersion(),r.ascender=a.parseShort(),r.descender=a.parseShort(),r.lineGap=a.parseShort(),r.advanceWidthMax=a.parseUShort(),r.minLeftSideBearing=a.parseShort(),r.minRightSideBearing=a.parseShort(),r.xMaxExtent=a.parseShort(),r.caretSlopeRise=a.parseShort(),r.caretSlopeRun=a.parseShort(),r.caretOffset=a.parseShort(),a.relativeOffset+=8,r.metricDataFormat=a.parseShort(),r.numberOfHMetrics=a.parseUShort(),r},make:function(e){return new He.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],e)}},Xe={parse:function(t,r,a,o,n){for(var e=new Ke.Parser(t,r),s=0,l,p;s<o;s+=1){s<a&&(l=e.parseUShort(),p=e.parseShort());var d=n.get(s);d.advanceWidth=l,d.leftSideBearing=p}},make:function(t){for(var r=new He.Table("hmtx",[]),a=0;a<t.length;a+=1){var o=t.get(a),n=o.advanceWidth||0,e=o.leftSideBearing||0;r.fields.push({name:"advanceWidth_"+a,type:"USHORT",value:n}),r.fields.push({name:"leftSideBearing_"+a,type:"SHORT",value:e})}return r}},Ye={make:function(t){for(var r=new He.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),a="",o=12+4*t.length,n=0,i;n<t.length;++n)i=a.indexOf(t[n]),0>i&&(i=a.length,a+=t[n]),r.fields.push({name:"offset "+n,type:"USHORT",value:o+i}),r.fields.push({name:"length "+n,type:"USHORT",value:t[n].length});return r.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),r},parse:function(t,r){var a=new Ke.Parser(t,r),o=a.parseULong();we.argument(1===o,"Unsupported ltag table version."),a.skip("uLong",1);for(var n=a.parseULong(),e=[],s=0;s<n;s++){for(var l="",p=r+a.parseUShort(),i=a.parseUShort(),d=p;d<p+i;++d)l+=oe(t.getInt8(d));e.push(l)}return e}},Ze={parse:function(e,t){var r={},a=new Ke.Parser(e,t);return r.version=a.parseVersion(),r.numGlyphs=a.parseUShort(),1===r.version&&(r.maxPoints=a.parseUShort(),r.maxContours=a.parseUShort(),r.maxCompositePoints=a.parseUShort(),r.maxCompositeContours=a.parseUShort(),r.maxZones=a.parseUShort(),r.maxTwilightPoints=a.parseUShort(),r.maxStorage=a.parseUShort(),r.maxFunctionDefs=a.parseUShort(),r.maxInstructionDefs=a.parseUShort(),r.maxStackElements=a.parseUShort(),r.maxSizeOfInstructions=a.parseUShort(),r.maxComponentElements=a.parseUShort(),r.maxComponentDepth=a.parseUShort()),r},make:function(e){return new He.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:e}])}},$e=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],_e={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},ta={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},ra={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"},aa="utf-16",oa={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},na={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"},ia={parse:function(u,a,y){for(var c={},d=new Ke.Parser(u,a),e=d.parseUShort(),f=d.parseUShort(),g=d.offset+d.parseUShort(),h=0;h<f;h++){var _=d.parseUShort(),b=d.parseUShort(),x=d.parseUShort(),l=d.parseUShort(),m=$e[l]||l,n=d.parseUShort(),o=d.parseUShort(),p=Lt(_,x,y),v=Pt(_,b,x);if(void 0!==v&&void 0!==p){var r=void 0;if(r=v===aa?xe.UTF16(u,g+o,n):xe.MACSTRING(u,g+o,n,v)){var S=c[m];void 0===S&&(S=c[m]={}),S[p]=r}}}return 1===e&&d.parseUShort(),c},make:function(_,a){var b=[],d={},e=wt($e),f;for(var S in _){var g=e[S];if(void 0===g&&(g=S),f=parseInt(g),isNaN(f))throw new Error("Name table entry \""+S+"\" does not exist, see nameTableNames for complete list.");d[f]=_[S],b.push(f)}for(var T=wt(_e),i=wt(ra),C=[],E=[],l=0;l<b.length;l++){f=b[l];var R=d[f];for(var n in R){var o=R[n],p=1,L=T[n],P=ta[L],I=Pt(p,P,L),t=Ae.MACSTRING(o,I);void 0===t&&(p=0,L=a.indexOf(n),0>L&&(L=a.length,a.push(n)),P=4,t=Ae.UTF16(o));var D=Mt(t,E);C.push(It(p,P,L,f,t.length,D));var v=i[n];if(void 0!==v){var w=Ae.UTF16(o),x=Mt(w,E);C.push(It(3,1,v,f,w.length,x))}}}C.sort(function(e,t){return e.platformID-t.platformID||e.encodingID-t.encodingID||e.languageID-t.languageID||e.nameID-t.nameID});for(var y=new He.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:C.length},{name:"stringOffset",type:"USHORT",value:6+12*C.length}]),M=0;M<C.length;M++)y.fields.push({name:"record_"+M,type:"RECORD",value:C[M]});return y.fields.push({name:"strings",type:"LITERAL",value:E}),y}},sa=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}],la={parse:function(t,r){var a={},o=new Ke.Parser(t,r);a.version=o.parseUShort(),a.xAvgCharWidth=o.parseShort(),a.usWeightClass=o.parseUShort(),a.usWidthClass=o.parseUShort(),a.fsType=o.parseUShort(),a.ySubscriptXSize=o.parseShort(),a.ySubscriptYSize=o.parseShort(),a.ySubscriptXOffset=o.parseShort(),a.ySubscriptYOffset=o.parseShort(),a.ySuperscriptXSize=o.parseShort(),a.ySuperscriptYSize=o.parseShort(),a.ySuperscriptXOffset=o.parseShort(),a.ySuperscriptYOffset=o.parseShort(),a.yStrikeoutSize=o.parseShort(),a.yStrikeoutPosition=o.parseShort(),a.sFamilyClass=o.parseShort(),a.panose=[];for(var n=0;10>n;n++)a.panose[n]=o.parseByte();return a.ulUnicodeRange1=o.parseULong(),a.ulUnicodeRange2=o.parseULong(),a.ulUnicodeRange3=o.parseULong(),a.ulUnicodeRange4=o.parseULong(),a.achVendID=oe(o.parseByte(),o.parseByte(),o.parseByte(),o.parseByte()),a.fsSelection=o.parseUShort(),a.usFirstCharIndex=o.parseUShort(),a.usLastCharIndex=o.parseUShort(),a.sTypoAscender=o.parseShort(),a.sTypoDescender=o.parseShort(),a.sTypoLineGap=o.parseShort(),a.usWinAscent=o.parseUShort(),a.usWinDescent=o.parseUShort(),1<=a.version&&(a.ulCodePageRange1=o.parseULong(),a.ulCodePageRange2=o.parseULong()),2<=a.version&&(a.sxHeight=o.parseShort(),a.sCapHeight=o.parseShort(),a.usDefaultChar=o.parseUShort(),a.usBreakChar=o.parseUShort(),a.usMaxContent=o.parseUShort()),a},make:function(e){return new He.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],e)},unicodeRanges:sa,getUnicodeRange:function(e){for(var t=0,r;t<sa.length;t+=1)if(r=sa[t],e>=r.begin&&e<r.end)return t;return-1}},pa={parse:function(t,r){var a={},o=new Ke.Parser(t,r);switch(a.version=o.parseVersion(),a.italicAngle=o.parseFixed(),a.underlinePosition=o.parseShort(),a.underlineThickness=o.parseShort(),a.isFixedPitch=o.parseULong(),a.minMemType42=o.parseULong(),a.maxMemType42=o.parseULong(),a.minMemType1=o.parseULong(),a.maxMemType1=o.parseULong(),a.version){case 1:a.names=Pe.slice();break;case 2:a.numberOfGlyphs=o.parseUShort(),a.glyphNameIndex=Array(a.numberOfGlyphs);for(var n=0;n<a.numberOfGlyphs;n++)a.glyphNameIndex[n]=o.parseUShort();a.names=[];for(var i=0;i<a.numberOfGlyphs;i++)if(a.glyphNameIndex[i]>=Pe.length){var s=o.parseChar();a.names.push(o.parseString(s))}break;case 2.5:a.numberOfGlyphs=o.parseUShort(),a.offset=Array(a.numberOfGlyphs);for(var l=0;l<a.numberOfGlyphs;l++)a.offset[l]=o.parseChar();}return a},make:function(){return new He.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}},da=Array(9);da[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(L.coverage),deltaGlyphId:this.parseUShort()}:2===t?{substFormat:2,coverage:this.parsePointer(L.coverage),substitute:this.parseOffset16List()}:void we.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")},da[2]=function(){var e=this.parseUShort();return we.argument(1===e,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(L.coverage),sequences:this.parseListOfLists()}},da[3]=function(){var e=this.parseUShort();return we.argument(1===e,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(L.coverage),alternateSets:this.parseListOfLists()}},da[4]=function(){var e=this.parseUShort();return we.argument(1===e,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(L.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var ca={sequenceIndex:L.uShort,lookupListIndex:L.uShort};da[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(1===t)return{substFormat:t,coverage:this.parsePointer(L.coverage),ruleSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{input:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ca)}})};if(2===t)return{substFormat:t,coverage:this.parsePointer(L.coverage),classDef:this.parsePointer(L.classDef),classSets:this.parseListOfLists(function(){var e=this.parseUShort(),t=this.parseUShort();return{classes:this.parseUShortList(e-1),lookupRecords:this.parseRecordList(t,ca)}})};if(3===t){var r=this.parseUShort(),a=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,L.pointer(L.coverage)),lookupRecords:this.parseRecordList(a,ca)}}we.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")},da[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{substFormat:1,coverage:this.parsePointer(L.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ca)}})}:2===t?{substFormat:2,coverage:this.parsePointer(L.coverage),backtrackClassDef:this.parsePointer(L.classDef),inputClassDef:this.parsePointer(L.classDef),lookaheadClassDef:this.parsePointer(L.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(ca)}})}:3===t?{substFormat:3,backtrackCoverage:this.parseList(L.pointer(L.coverage)),inputCoverage:this.parseList(L.pointer(L.coverage)),lookaheadCoverage:this.parseList(L.pointer(L.coverage)),lookupRecords:this.parseRecordList(ca)}:void we.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")},da[7]=function(){var e=this.parseUShort();we.argument(1===e,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new L(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:da[t].call(r)}},da[8]=function(){var e=this.parseUShort();return we.argument(1===e,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(L.coverage),backtrackCoverage:this.parseList(L.pointer(L.coverage)),lookaheadCoverage:this.parseList(L.pointer(L.coverage)),substitutes:this.parseUShortList()}};var ua=Array(9);ua[1]=function(e){return 1===e.substFormat?new He.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new He.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new He.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new He.Coverage(e.coverage)}].concat(He.ushortList("substitute",e.substitute)))},ua[3]=function(e){return we.assert(1===e.substFormat,"Lookup type 3 substFormat must be 1."),new He.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new He.Coverage(e.coverage)}].concat(He.tableList("altSet",e.alternateSets,function(e){return new He.Table("alternateSetTable",He.ushortList("alternate",e))})))},ua[4]=function(e){return we.assert(1===e.substFormat,"Lookup type 4 substFormat must be 1."),new He.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new He.Coverage(e.coverage)}].concat(He.tableList("ligSet",e.ligatureSets,function(e){return new He.Table("ligatureSetTable",He.tableList("ligature",e,function(e){return new He.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:e.ligGlyph}].concat(He.ushortList("component",e.components,e.components.length+1)))}))})))};var ma={parse:function(e,t){t=t||0;var r=new L(e,t),a=r.parseVersion(1);return we.argument(1===a||1.1===a,"Unsupported GSUB table version."),1===a?{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(da)}:{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(da),variations:r.parseFeatureVariationsList()}},make:function(e){return new He.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new He.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new He.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new He.LookupList(e.lookups,ua)}])}},ha={parse:function(t,r){var a=new Ke.Parser(t,r),o=a.parseULong();we.argument(1===o,"Unsupported META table version."),a.parseULong(),a.parseULong();for(var n=a.parseULong(),e={},s=0;s<n;s++){var l=a.parseTag(),p=a.parseULong(),i=a.parseULong(),d=xe.UTF8(t,r+p,i);e[l]=d}return e},make:function(t){var r=Object.keys(t).length,a="",o=16+12*r,n=new He.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:o},{name:"numTags",type:"ULONG",value:r}]);for(var e in t){var i=a.length;a+=t[e],n.fields.push({name:"tag "+e,type:"TAG",value:e}),n.fields.push({name:"offset "+e,type:"ULONG",value:o+i}),n.fields.push({name:"length "+e,type:"ULONG",value:t[e].length})}return n.fields.push({name:"stringPool",type:"CHARARRAY",value:a}),n}},ga={make:Ot,fontToTable:function(V){for(var a=[],c=[],d=[],e=[],f=[],g=[],h=[],i=0,W=0,Y=0,X=0,Z=0,ee=0,te;ee<V.glyphs.length;ee+=1){var re=V.glyphs.get(ee),p=0|re.unicode;if(isNaN(re.advanceWidth))throw new Error("Glyph "+re.name+" ("+ee+"): advanceWidth is not a number.");(te>p||void 0===te)&&0<p&&(te=p),i<p&&(i=p);var q=la.getUnicodeRange(p);if(32>q)W|=1<<q;else if(64>q)Y|=1<<q-32;else if(96>q)X|=1<<q-64;else{if(!(123>q))throw new Error("Unicode ranges bits > 123 are reserved for internal usage");Z|=1<<q-96}if(".notdef"!==re.name){var r=re.getMetrics();a.push(r.xMin),c.push(r.yMin),d.push(r.xMax),e.push(r.yMax),g.push(r.leftSideBearing),h.push(r.rightSideBearing),f.push(re.advanceWidth)}}var s={xMin:U.apply(null,a),yMin:U.apply(null,c),xMax:T.apply(null,d),yMax:T.apply(null,e),advanceWidthMax:T.apply(null,f),advanceWidthAvg:Ft(f),minLeftSideBearing:U.apply(null,g),maxLeftSideBearing:T.apply(null,g),minRightSideBearing:U.apply(null,h),ascender:V.ascender,descender:V.descender},t=Ve.make({flags:3,unitsPerEm:V.unitsPerEm,xMin:s.xMin,yMin:s.yMin,xMax:s.xMax,yMax:s.yMax,lowestRecPPEM:3,createdTimestamp:V.createdTimestamp}),u=We.make({ascender:s.ascender,descender:s.descender,advanceWidthMax:s.advanceWidthMax,minLeftSideBearing:s.minLeftSideBearing,minRightSideBearing:s.minRightSideBearing,xMaxExtent:s.maxLeftSideBearing+(s.xMax-s.xMin),numberOfHMetrics:V.glyphs.length}),v=Ze.make(V.glyphs.length),w=la.make({xAvgCharWidth:$(s.advanceWidthAvg),usWeightClass:V.tables.os2.usWeightClass,usWidthClass:V.tables.os2.usWidthClass,usFirstCharIndex:te,usLastCharIndex:i,ulUnicodeRange1:W,ulUnicodeRange2:Y,ulUnicodeRange3:X,ulUnicodeRange4:Z,fsSelection:V.tables.os2.fsSelection,sTypoAscender:s.ascender,sTypoDescender:s.descender,sTypoLineGap:0,usWinAscent:s.yMax,usWinDescent:_(s.yMin),ulCodePageRange1:1,sxHeight:Bt(V,"xyvw",{yMax:$(s.ascender/2)}).yMax,sCapHeight:Bt(V,"HIKLEFJMNTZBDPRAGOQSUVWXY",s).yMax,usDefaultChar:V.hasChar(" ")?32:0,usBreakChar:V.hasChar(" ")?32:0}),x=Xe.make(V.glyphs),y=Le.make(V.glyphs),z=V.getEnglishName("fontFamily"),A=V.getEnglishName("fontSubfamily"),B=z+" "+A,C=V.getEnglishName("postScriptName");C||(C=z.replace(/\s/g,"")+"-"+A);var ae={};for(var E in V.names)ae[E]=V.names[E];ae.uniqueID||(ae.uniqueID={en:V.getEnglishName("manufacturer")+":"+B}),ae.postScriptName||(ae.postScriptName={en:C}),ae.preferredFamily||(ae.preferredFamily=V.names.fontFamily),ae.preferredSubfamily||(ae.preferredSubfamily=V.names.fontSubfamily);var F=[],G=ia.make(ae,F),H=0<F.length?Ye.make(F):void 0,I=pa.make(),J=Ue.make(V.glyphs,{version:V.getEnglishName("version"),fullName:B,familyName:z,weightName:A,postScriptName:C,unitsPerEm:V.unitsPerEm,fontBBox:[0,s.yMin,s.ascender,s.advanceWidthMax]}),K=V.metas&&0<Object.keys(V.metas).length?ha.make(V.metas):void 0,L=[t,u,v,w,G,y,I,J,x];H&&L.push(H),V.tables.gsub&&L.push(ma.make(V.tables.gsub)),K&&L.push(K);for(var M=Ot(L),N=M.encode(),O=At(N),P=M.fields,Q=!1,oe=0;oe<P.length;oe+=1)if("head table"===P[oe].name){P[oe].value.checkSumAdjustment=2981146554-O,Q=!0;break}if(!Q)throw new Error("Could not find head table with checkSum to adjust.");return M},computeCheckSum:At};zt.prototype={searchTag:Gt,binSearch:Nt,getTable:function(e){var t=this.font.tables[this.tableName];return!t&&e&&(t=this.font.tables[this.tableName]=this.createDefaultTable()),t},getScriptNames:function(){var e=this.getTable();return e?e.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var e=this.getTable();if(e){for(var t=!1,r=0,a;r<e.scripts.length;r++){if(a=e.scripts[r].tag,"DFLT"===a)return a;"latn"===a&&(t=!0)}return t?"latn":void 0}},getScriptTable:function(t,r){var o=this.getTable(r);if(o){t=t||"DFLT";var n=o.scripts,i=Gt(o.scripts,t);if(0<=i)return n[i].script;if(r){var e={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return n.splice(-1-i,0,e),e.script}}},getLangSysTable:function(t,r,a){var o=this.getScriptTable(t,a);if(o){if(!r||"dflt"===r||"DFLT"===r)return o.defaultLangSys;var n=Gt(o.langSysRecords,r);if(0<=n)return o.langSysRecords[n].langSys;if(a){var e={tag:r,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return o.langSysRecords.splice(-1-n,0,e),e.langSys}}},getFeatureTable:function(t,r,a,o){var n=this.getLangSysTable(t,r,o);if(n){for(var e=n.featureIndexes,s=this.font.tables[this.tableName].features,l=0,p;l<e.length;l++)if(p=s[e[l]],p.tag===a)return p.feature;if(o){var d=s.length;return we.assert(0===d||a>=s[d-1].tag,"Features must be added in alphabetical order."),p={tag:a,feature:{params:0,lookupListIndexes:[]}},s.push(p),e.push(d),p.feature}}},getLookupTables:function(t,r,a,o,n){var e=this.getFeatureTable(t,r,a,n),s=[];if(e){for(var p=e.lookupListIndexes,i=this.font.tables[this.tableName].lookups,d=0,c;d<p.length;d++)c=i[p[d]],c.lookupType===o&&s.push(c);if(0===s.length&&n){c={lookupType:o,lookupFlag:0,subtables:[],markFilteringSet:void 0};var u=i.length;return i.push(c),p.push(u),[c]}}return s},getGlyphClass:function(e,t){switch(e.format){case 1:return e.startGlyph<=t&&t<e.startGlyph+e.classes.length?e.classes[t-e.startGlyph]:0;case 2:var r=Vt(e.ranges,t);return r?r.classId:0;}},getCoverageIndex:function(e,t){switch(e.format){case 1:var r=Nt(e.glyphs,t);return 0<=r?r:-1;case 2:var a=Vt(e.ranges,t);return a?a.index+t-a.start:-1;}},expandCoverage:function(t){if(1===t.format)return t.glyphs;for(var r=[],a=t.ranges,o=0;o<a.length;o++)for(var n=a[o],e=n.start,i=n.end,s=e;s<=i;s++)r.push(s);return r}},Ht.prototype=zt.prototype,Ht.prototype.init=function(){var e=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(e)},Ht.prototype.getKerningValue=function(t,r,a){for(var s=this,p=0;p<t.length;p++)for(var d=t[p].subtables,c=0;c<d.length;c++){var u=d[c],h=s.getCoverageIndex(u.coverage,r);if(!(0>h))switch(u.posFormat){case 1:for(var i=u.pairSets[h],y=0,f;y<i.length;y++)if(f=i[y],f.secondGlyph===a)return f.value1&&f.value1.xAdvance||0;break;case 2:var _=s.getGlyphClass(u.classDef1,r),m=s.getGlyphClass(u.classDef2,a),n=u.classRecords[_][m];return n.value1&&n.value1.xAdvance||0;}}return 0},Ht.prototype.getKerningTables=function(e,t){if(this.font.tables.gpos)return this.getLookupTables(e,t,"kern",2)},Wt.prototype=zt.prototype,Wt.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}},Wt.prototype.getSingle=function(t,r,a){for(var s=this,p=[],e=this.getLookupTables(r,a,t,1),d=0;d<e.length;d++)for(var c=e[d].subtables,u=0;u<c.length;u++){var h=c[u],y=s.expandCoverage(h.coverage),f=void 0;if(1===h.substFormat){var _=h.deltaGlyphId;for(f=0;f<y.length;f++){var m=y[f];p.push({sub:m,by:m+_})}}else{var n=h.substitute;for(f=0;f<y.length;f++)p.push({sub:y[f],by:n[f]})}}return p},Wt.prototype.getAlternates=function(t,r,a){for(var o=this,n=[],e=this.getLookupTables(r,a,t,3),s=0;s<e.length;s++)for(var p=e[s].subtables,d=0;d<p.length;d++)for(var c=p[d],u=o.expandCoverage(c.coverage),h=c.alternateSets,l=0;l<u.length;l++)n.push({sub:u[l],by:h[l]});return n},Wt.prototype.getLigatures=function(t,r,a){for(var s=this,d=[],e=this.getLookupTables(r,a,t,4),c=0;c<e.length;c++)for(var u=e[c].subtables,h=0;h<u.length;h++)for(var y=u[h],f=s.expandCoverage(y.coverage),_=y.ligatureSets,l=0;l<f.length;l++)for(var b=f[l],n=_[l],o=0,x;o<n.length;o++)x=n[o],d.push({sub:[b].concat(x.components),by:x.ligGlyph});return d},Wt.prototype.addSingle=function(t,r,a,o){var n=this.getLookupTables(a,o,t,1,!0)[0],e=Yt(n,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});we.assert(1===e.coverage.format,"Ligature: unable to modify coverage table format "+e.coverage.format);var i=r.sub,s=this.binSearch(e.coverage.glyphs,i);0>s&&(s=-1-s,e.coverage.glyphs.splice(s,0,i),e.substitute.splice(s,0,0)),e.substitute[s]=r.by},Wt.prototype.addAlternate=function(t,r,a,o){var n=this.getLookupTables(a,o,t,3,!0)[0],e=Yt(n,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});we.assert(1===e.coverage.format,"Ligature: unable to modify coverage table format "+e.coverage.format);var i=r.sub,s=this.binSearch(e.coverage.glyphs,i);0>s&&(s=-1-s,e.coverage.glyphs.splice(s,0,i),e.alternateSets.splice(s,0,0)),e.alternateSets[s]=r.by},Wt.prototype.addLigature=function(t,r,a,o){var n=this.getLookupTables(a,o,t,4,!0)[0],e=n.subtables[0];e||(e={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},n.subtables[0]=e),we.assert(1===e.coverage.format,"Ligature: unable to modify coverage table format "+e.coverage.format);var s=r.sub[0],p=r.sub.slice(1),d={ligGlyph:r.by,components:p},i=this.binSearch(e.coverage.glyphs,s);if(0<=i){for(var c=e.ligatureSets[i],u=0;u<c.length;u++)if(jt(c[u].components,p))return;c.push(d)}else i=-1-i,e.coverage.glyphs.splice(i,0,s),e.ligatureSets.splice(i,0,[d])},Wt.prototype.getFeature=function(e,t,r){if(/ss\d\d/.test(e))return this.getSingle(e,t,r);return"aalt"===e||"salt"===e?this.getSingle(e,t,r).concat(this.getAlternates(e,t,r)):"dlig"===e||"liga"===e||"rlig"===e?this.getLigatures(e,t,r):void 0},Wt.prototype.add=function(e,t,r,a){if(/ss\d\d/.test(e))return this.addSingle(e,t,r,a);return"aalt"===e||"salt"===e?"number"==typeof t.by?this.addSingle(e,t,r,a):this.addAlternate(e,t,r,a):"dlig"===e||"liga"===e||"rlig"===e?this.addLigature(e,t,r,a):void 0};var ya={getPath:tr,parse:function(t,r,a,o){for(var n=new Re.GlyphSet(o),e=0,i;e<a.length-1;e+=1)i=a[e],i===a[e+1]?n.push(e,Re.glyphLoader(o,e)):n.push(e,Re.ttfGlyphLoader(o,e,Jt,t,r+i,rr));return n}},fa=function(t){var r=this.srPeriod,o=this.srPhase,n=this.srThreshold,i=1;return 0>t&&(t=-t,i=-1),t+=n-o,t=he(t/r)*r,t+=o,0>t?o*i:t*i},_a={x:1,y:0,axis:"x",distance:function(e,t,r,a){return(r?e.xo:e.x)-(a?t.xo:t.x)},interpolate:function(t,r,a,o){var n,s,l,p,d,c,u;return o&&o!==this?(n=o.distance(t,r,!0,!0),s=o.distance(t,a,!0,!0),d=o.distance(r,r,!1,!0),c=o.distance(a,a,!1,!0),l=_(n),p=_(s),0===(u=l+p)?void _a.setRelative(t,t,(d+c)/2,o,!0):void _a.setRelative(t,t,(d*p+c*l)/u,o,!0)):(n=t.xo-r.xo,s=t.xo-a.xo,d=r.x-r.xo,c=a.x-a.xo,l=_(n),p=_(s),0===(u=l+p)?void(t.x=t.xo+(d+c)/2):void(t.x=t.xo+(d*p+c*l)/u))},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,r,a,o,n){if(!o||o===this)return void(t.x=(n?r.xo:r.x)+a);var e=n?r.xo:r.x,s=n?r.yo:r.y,l=e+a*o.x,p=s+a*o.y;t.x=l+(t.y-p)/o.normalSlope},slope:0,touch:function(e){e.xTouched=!0},touched:function(e){return e.xTouched},untouch:function(e){e.xTouched=!1}},ba={x:0,y:1,axis:"y",distance:function(e,t,r,a){return(r?e.yo:e.y)-(a?t.yo:t.y)},interpolate:function(t,r,a,o){var n,s,l,p,d,c,u;return o&&o!==this?(n=o.distance(t,r,!0,!0),s=o.distance(t,a,!0,!0),d=o.distance(r,r,!1,!0),c=o.distance(a,a,!1,!0),l=_(n),p=_(s),0===(u=l+p)?void ba.setRelative(t,t,(d+c)/2,o,!0):void ba.setRelative(t,t,(d*p+c*l)/u,o,!0)):(n=t.yo-r.yo,s=t.yo-a.yo,d=r.y-r.yo,c=a.y-a.yo,l=_(n),p=_(s),0===(u=l+p)?void(t.y=t.yo+(d+c)/2):void(t.y=t.yo+(d*p+c*l)/u))},normalSlope:0,setRelative:function(t,r,a,o,n){if(!o||o===this)return void(t.y=(n?r.yo:r.y)+a);var e=n?r.xo:r.x,s=n?r.yo:r.y,l=e+a*o.x,p=s+a*o.y;t.y=p+o.normalSlope*(t.x-l)},slope:Number.POSITIVE_INFINITY,touch:function(e){e.yTouched=!0},touched:function(e){return e.yTouched},untouch:function(e){e.yTouched=!1}},xa,va,Sa,Ta;Object.freeze(_a),Object.freeze(ba),dr.prototype.distance=function(e,t,r,a){return this.x*_a.distance(e,t,r,a)+this.y*ba.distance(e,t,r,a)},dr.prototype.interpolate=function(t,r,a,o){var n,s,l,p,d,c,u;return(l=o.distance(t,r,!0,!0),p=o.distance(t,a,!0,!0),n=o.distance(r,r,!1,!0),s=o.distance(a,a,!1,!0),d=_(l),c=_(p),0===(u=d+c))?void this.setRelative(t,t,(n+s)/2,o,!0):void this.setRelative(t,t,(n*c+s*d)/u,o,!0)},dr.prototype.setRelative=function(t,r,a,o,n){o=o||this;var e=n?r.xo:r.x,s=n?r.yo:r.y,p=e+a*o.x,c=s+a*o.y,i=o.normalSlope,u=this.slope,h=t.x,l=t.y;t.x=(u*h-i*p+c-l)/(u-i),t.y=u*(t.x-h)+l},dr.prototype.touch=function(e){e.xTouched=!0,e.yTouched=!0},ur.prototype.nextTouched=function(e){for(var t=this.nextPointOnContour;!e.touched(t)&&t!==this;)t=t.nextPointOnContour;return t},ur.prototype.prevTouched=function(e){for(var t=this.prevPointOnContour;!e.touched(t)&&t!==this;)t=t.prevPointOnContour;return t};var Ca=Object.freeze(new ur(0,0)),Ea={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};ar.prototype.exec=function(t,r){if("number"!=typeof r)throw new Error("Point size is not a number!");if(!(2<this._errorState)){var a=this.font,o=this._prepState;if(!o||o.ppem!==r){var n=this._fpgmState;if(!n){mr.prototype=Ea,n=this._fpgmState=new mr("fpgm",a.tables.fpgm),n.funcs=[],n.font=a,P.DEBUG&&(console.log("---EXEC FPGM---"),n.step=-1);try{va(n)}catch(e){return console.log("Hinting error in FPGM:"+e),void(this._errorState=3)}}mr.prototype=n,o=this._prepState=new mr("prep",a.tables.prep),o.ppem=r;var s=a.tables.cvt;if(s)for(var l=o.cvt=Array(s.length),p=r/a.unitsPerEm,i=0;i<s.length;i++)l[i]=s[i]*p;else o.cvt=[];P.DEBUG&&(console.log("---EXEC PREP---"),o.step=-1);try{va(o)}catch(e){2>this._errorState&&console.log("Hinting error in PREP:"+e),this._errorState=2}}if(!(1<this._errorState))try{return Sa(t,o)}catch(e){return 1>this._errorState&&(console.log("Hinting error:"+e),console.log("Note: further hinting errors are silenced")),void(this._errorState=1)}}},Sa=function(a,y){var c=y.ppem/y.font.unitsPerEm,g=c,h=a.components,i,_,b;if(mr.prototype=y,h){var x=y.font;_=[],i=[];for(var v=0;v<h.length;v++){var S=h[v],l=x.glyphs.get(S.glyphIndex);b=new mr("glyf",l.instructions),P.DEBUG&&(console.log("---EXEC COMP "+v+"---"),b.step=-1),Ta(l,b,c,g);for(var m=$(S.dx*c),n=$(S.dy*g),o=b.gZone,p=b.contours,T=0,C;T<o.length;T++)C=o[T],C.xTouched=C.yTouched=!1,C.xo=C.x+=m,C.yo=C.y+=n;var E=_.length;_.push.apply(_,o);for(var t=0;t<p.length;t++)i.push(p[t]+E)}a.instructions&&!b.inhibitGridFit&&(b=new mr("glyf",a.instructions),b.gZone=b.z0=b.z1=b.z2=_,b.contours=i,_.push(new ur(0,0),new ur($(a.advanceWidth*c),0)),P.DEBUG&&(console.log("---EXEC COMPOSITE---"),b.step=-1),va(b),_.length-=2)}else b=new mr("glyf",a.instructions),P.DEBUG&&(console.log("---EXEC GLYPH---"),b.step=-1),Ta(a,b,c,g),_=b.gZone;return _},Ta=function(t,r,a,s){for(var e=t.points||[],d=e.length,c=r.gZone=r.z0=r.z1=r.z2=[],i=r.contours=[],u=0,h;u<d;u++)h=e[u],c[u]=new ur(h.x*a,h.y*s,h.lastPointOfContour,h.onCurve);for(var g=0,y,_;g<d;g++)h=c[g],y||(y=h,i.push(g)),h.lastPointOfContour?(h.nextPointOnContour=y,y.prevPointOnContour=h,y=void 0):(_=c[g+1],h.nextPointOnContour=_,_.prevPointOnContour=h);if(!r.inhibitGridFit){if(P.DEBUG){console.log("PROCESSING GLYPH",r.stack);for(var b=0;b<d;b++)console.log(b,c[b].x,c[b].y)}if(c.push(new ur(0,0),new ur($(t.advanceWidth*a),0)),va(r),c.length-=2,P.DEBUG){console.log("FINISHED GLYPH",r.stack);for(var x=0;x<d;x++)console.log(x,c[x].x,c[x].y)}}},va=function(t){var r=t.prog;if(r){var a=r.length,e;for(t.ip=0;t.ip<a;t.ip++){if(P.DEBUG&&t.step++,!(e=xa[r[t.ip]]))throw new Error("unknown instruction: 0x"+(+r[t.ip]).toString(16));e(t)}}},xa=[yr.bind(void 0,ba),yr.bind(void 0,_a),fr.bind(void 0,ba),fr.bind(void 0,_a),_r.bind(void 0,ba),_r.bind(void 0,_a),br.bind(void 0,0),br.bind(void 0,1),xr.bind(void 0,0),xr.bind(void 0,1),function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"SPVFS[]",a,o),t.pv=t.dpv=cr(o,a)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"SPVFS[]",a,o),t.fv=cr(o,a)},function(e){var t=e.stack,r=e.pv;P.DEBUG&&console.log(e.step,"GPV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){var t=e.stack,r=e.fv;P.DEBUG&&console.log(e.step,"GFV[]"),t.push(16384*r.x),t.push(16384*r.y)},function(e){e.fv=e.pv,P.DEBUG&&console.log(e.step,"SFVTPV[]")},function(a){var _=a.stack,c=_.pop(),d=_.pop(),e=_.pop(),f=_.pop(),g=_.pop(),h=a.z0,i=a.z1,b=h[c],S=h[d],l=i[e],m=i[f],n=a.z2[g];P.DEBUG&&console.log("ISECT[], ",c,d,e,f,g);var o=b.x,p=b.y,T=S.x,r=S.y,s=l.x,t=l.y,u=m.x,v=m.y,C=(o-T)*(t-v)-(p-r)*(s-u),x=o*r-p*T,y=s*v-t*u;n.x=(x*(s-u)-y*(o-T))/C,n.y=(x*(t-v)-y*(p-r))/C},function(e){e.rp0=e.stack.pop(),P.DEBUG&&console.log(e.step,"SRP0[]",e.rp0)},function(e){e.rp1=e.stack.pop(),P.DEBUG&&console.log(e.step,"SRP1[]",e.rp1)},function(e){e.rp2=e.stack.pop(),P.DEBUG&&console.log(e.step,"SRP2[]",e.rp2)},function(e){var t=e.stack.pop();switch(P.DEBUG&&console.log(e.step,"SZP0[]",t),e.zp0=t,t){case 0:e.tZone||hr(e),e.z0=e.tZone;break;case 1:e.z0=e.gZone;break;default:throw new Error("Invalid zone pointer");}},function(e){var t=e.stack.pop();switch(P.DEBUG&&console.log(e.step,"SZP1[]",t),e.zp1=t,t){case 0:e.tZone||hr(e),e.z1=e.tZone;break;case 1:e.z1=e.gZone;break;default:throw new Error("Invalid zone pointer");}},function(e){var t=e.stack.pop();switch(P.DEBUG&&console.log(e.step,"SZP2[]",t),e.zp2=t,t){case 0:e.tZone||hr(e),e.z2=e.tZone;break;case 1:e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer");}},function(e){var t=e.stack.pop();switch(P.DEBUG&&console.log(e.step,"SZPS[]",t),e.zp0=e.zp1=e.zp2=t,t){case 0:e.tZone||hr(e),e.z0=e.z1=e.z2=e.tZone;break;case 1:e.z0=e.z1=e.z2=e.gZone;break;default:throw new Error("Invalid zone pointer");}},function(e){e.loop=e.stack.pop(),P.DEBUG&&console.log(e.step,"SLOOP[]",e.loop)},function(e){P.DEBUG&&console.log(e.step,"RTG[]"),e.round=nr},function(e){P.DEBUG&&console.log(e.step,"RTHG[]"),e.round=sr},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"SMD[]",t),e.minDis=t/64},function(e){P.DEBUG&&console.log(e.step,"ELSE[]"),gr(e,!1)},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"JMPR[]",t),e.ip+=t-1},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"SCVTCI[]",t),e.cvCutIn=t/64},void 0,void 0,function(e){var t=e.stack;P.DEBUG&&console.log(e.step,"DUP[]"),t.push(t[t.length-1])},vr,function(e){P.DEBUG&&console.log(e.step,"CLEAR[]"),e.stack.length=0},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"SWAP[]"),r.push(a),r.push(o)},function(e){var t=e.stack;P.DEBUG&&console.log(e.step,"DEPTH[]"),t.push(t.length)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"CINDEX[]",r),t.push(t[t.length-r])},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"MINDEX[]",r),t.push(t.splice(t.length-r,1)[0])},void 0,void 0,void 0,Sr,Tr,function(t){if("fpgm"!==t.env)throw new Error("FDEF not allowed here");var r=t.stack,a=t.prog,o=t.ip,n=r.pop(),i=o;for(P.DEBUG&&console.log(t.step,"FDEF[]",n);45!==a[++o];);t.ip=o,t.funcs[n]=a.slice(i+1,o)},void 0,Cr.bind(void 0,0),Cr.bind(void 0,1),Er.bind(void 0,ba),Er.bind(void 0,_a),Rr.bind(void 0,0),Rr.bind(void 0,1),Lr.bind(void 0,0),Lr.bind(void 0,1),Pr.bind(void 0,0),Pr.bind(void 0,1),function(t){for(var r=t.stack,a=t.loop,o=t.fv,e=r.pop()/64,n=t.z2;a--;){var s=r.pop(),l=n[s];P.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-a)+": ":"")+"SHPIX[]",s,e),o.setRelative(l,l,e),o.touch(l)}t.loop=1},function(t){for(var r=t.stack,a=t.rp1,o=t.rp2,e=t.loop,n=t.z0[a],s=t.z1[o],p=t.fv,i=t.dpv,d=t.z2;e--;){var c=r.pop(),l=d[c];P.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-e)+": ":"")+"IP[]",c,a,"<->",o),p.interpolate(l,n,s,i),p.touch(l)}t.loop=1},wr.bind(void 0,0),wr.bind(void 0,1),function(t){for(var r=t.stack,a=t.rp0,o=t.z0[a],e=t.loop,n=t.fv,s=t.pv,l=t.z1;e--;){var i=r.pop(),p=l[i];P.DEBUG&&console.log(t.step,(1<t.loop?"loop "+(t.loop-e)+": ":"")+"ALIGNRP[]",i),n.setRelative(p,o,0,s),n.touch(p)}t.loop=1},function(e){P.DEBUG&&console.log(e.step,"RTDG[]"),e.round=ir},Ir.bind(void 0,0),Ir.bind(void 0,1),function(t){var r=t.prog,a=t.ip,o=t.stack,e=r[++a];P.DEBUG&&console.log(t.step,"NPUSHB[]",e);for(var n=0;n<e;n++)o.push(r[++a]);t.ip=a},function(t){var r=t.ip,a=t.prog,o=t.stack,e=a[++r];P.DEBUG&&console.log(t.step,"NPUSHW[]",e);for(var n=0,i;n<e;n++)i=a[++r]<<8|a[++r],32768&i&&(i=-(1+(65535^i))),o.push(i);t.ip=r},function(t){var r=t.stack,a=t.store;a||(a=t.store=[]);var o=r.pop(),e=r.pop();P.DEBUG&&console.log(t.step,"WS",o,e),a[e]=o},function(t){var r=t.stack,a=t.store,o=r.pop();P.DEBUG&&console.log(t.step,"RS",o);var e=a&&a[o]||0;r.push(e)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"WCVTP",a,o),t.cvt[o]=a/64},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"RCVT",r),t.push(64*e.cvt[r])},Dr.bind(void 0,0),Dr.bind(void 0,1),void 0,Mr.bind(void 0,0),Mr.bind(void 0,1),function(e){P.DEBUG&&console.log(e.step,"MPPEM[]"),e.stack.push(e.ppem)},void 0,function(e){P.DEBUG&&console.log(e.step,"FLIPON[]"),e.autoFlip=!0},void 0,void 0,function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"LT[]",a,o),r.push(o<a?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"LTEQ[]",a,o),r.push(o<=a?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"GT[]",a,o),r.push(o>a?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"GTEQ[]",a,o),r.push(o>=a?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"EQ[]",a,o),r.push(a===o?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"NEQ[]",a,o),r.push(a===o?0:1)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"ODD[]",r),t.push(he(r)%2?1:0)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"EVEN[]",r),t.push(he(r)%2?0:1)},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"IF[]",t),t||(gr(e,!0),P.DEBUG&&console.log(e.step,"EIF[]"))},function(e){P.DEBUG&&console.log(e.step,"EIF[]")},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"AND[]",a,o),r.push(a&&o?1:0)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"OR[]",a,o),r.push(a||o?1:0)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"NOT[]",r),t.push(r?0:1)},kr.bind(void 0,1),function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"SDB[]",r),e.deltaBase=r},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"SDS[]",r),e.deltaShift=te(.5,r)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"ADD[]",a,o),r.push(o+a)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"SUB[]",a,o),r.push(o-a)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"DIV[]",a,o),r.push(64*o/a)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"MUL[]",a,o),r.push(o*a/64)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"ABS[]",r),t.push(_(r))},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"NEG[]",r),t.push(-r)},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"FLOOR[]",r),t.push(64*S(r/64))},function(e){var t=e.stack,r=t.pop();P.DEBUG&&console.log(e.step,"CEILING[]",r),t.push(64*v(r/64))},Ar.bind(void 0,0),Ar.bind(void 0,1),Ar.bind(void 0,2),Ar.bind(void 0,3),void 0,void 0,void 0,void 0,function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"WCVTF[]",a,o),t.cvt[o]=a*t.ppem/t.font.unitsPerEm},kr.bind(void 0,2),kr.bind(void 0,3),Ur.bind(void 0,1),Ur.bind(void 0,2),Ur.bind(void 0,3),function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"SROUND[]",t),e.round=fa;var r;switch(192&t){case 0:r=.5;break;case 64:r=1;break;case 128:r=2;break;default:throw new Error("invalid SROUND value");}switch(e.srPeriod=r,48&t){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid SROUND value");}t&=15,e.srThreshold=0===t?0:(t/8-.5)*r},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"S45ROUND[]",t),e.round=fa;var r;switch(192&t){case 0:r=Z(2)/2;break;case 64:r=Z(2);break;case 128:r=2*Z(2);break;default:throw new Error("invalid S45ROUND value");}switch(e.srPeriod=r,48&t){case 0:e.srPhase=0;break;case 16:e.srPhase=.25*r;break;case 32:e.srPhase=.5*r;break;case 48:e.srPhase=.75*r;break;default:throw new Error("invalid S45ROUND value");}t&=15,e.srThreshold=0===t?0:(t/8-.5)*r},void 0,void 0,function(e){P.DEBUG&&console.log(e.step,"ROFF[]"),e.round=or},void 0,function(e){P.DEBUG&&console.log(e.step,"RUTG[]"),e.round=lr},function(e){P.DEBUG&&console.log(e.step,"RDTG[]"),e.round=pr},vr,vr,void 0,void 0,void 0,void 0,void 0,function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"SCANCTRL[]",t)},Or.bind(void 0,0),Or.bind(void 0,1),function(t){var r=t.stack,a=r.pop(),o=0;P.DEBUG&&console.log(t.step,"GETINFO[]",a),1&a&&(o=35),32&a&&(o|=4096),r.push(o)},void 0,function(t){var r=t.stack,a=r.pop(),o=r.pop(),e=r.pop();P.DEBUG&&console.log(t.step,"ROLL[]"),r.push(o),r.push(a),r.push(e)},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"MAX[]",a,o),r.push(T(o,a))},function(t){var r=t.stack,a=r.pop(),o=r.pop();P.DEBUG&&console.log(t.step,"MIN[]",a,o),r.push(U(o,a))},function(e){var t=e.stack.pop();P.DEBUG&&console.log(e.step,"SCANTYPE[]",t)},function(e){var t=e.stack.pop(),r=e.stack.pop();switch(P.DEBUG&&console.log(e.step,"INSTCTRL[]",t,r),t){case 1:return void(e.inhibitGridFit=!!r);case 2:return void(e.ignoreCvt=!!r);default:throw new Error("invalid INSTCTRL[] selector");}},void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Br.bind(void 0,1),Br.bind(void 0,2),Br.bind(void 0,3),Br.bind(void 0,4),Br.bind(void 0,5),Br.bind(void 0,6),Br.bind(void 0,7),Br.bind(void 0,8),Fr.bind(void 0,1),Fr.bind(void 0,2),Fr.bind(void 0,3),Fr.bind(void 0,4),Fr.bind(void 0,5),Fr.bind(void 0,6),Fr.bind(void 0,7),Fr.bind(void 0,8),Gr.bind(void 0,0,0,0,0,0),Gr.bind(void 0,0,0,0,0,1),Gr.bind(void 0,0,0,0,0,2),Gr.bind(void 0,0,0,0,0,3),Gr.bind(void 0,0,0,0,1,0),Gr.bind(void 0,0,0,0,1,1),Gr.bind(void 0,0,0,0,1,2),Gr.bind(void 0,0,0,0,1,3),Gr.bind(void 0,0,0,1,0,0),Gr.bind(void 0,0,0,1,0,1),Gr.bind(void 0,0,0,1,0,2),Gr.bind(void 0,0,0,1,0,3),Gr.bind(void 0,0,0,1,1,0),Gr.bind(void 0,0,0,1,1,1),Gr.bind(void 0,0,0,1,1,2),Gr.bind(void 0,0,0,1,1,3),Gr.bind(void 0,0,1,0,0,0),Gr.bind(void 0,0,1,0,0,1),Gr.bind(void 0,0,1,0,0,2),Gr.bind(void 0,0,1,0,0,3),Gr.bind(void 0,0,1,0,1,0),Gr.bind(void 0,0,1,0,1,1),Gr.bind(void 0,0,1,0,1,2),Gr.bind(void 0,0,1,0,1,3),Gr.bind(void 0,0,1,1,0,0),Gr.bind(void 0,0,1,1,0,1),Gr.bind(void 0,0,1,1,0,2),Gr.bind(void 0,0,1,1,0,3),Gr.bind(void 0,0,1,1,1,0),Gr.bind(void 0,0,1,1,1,1),Gr.bind(void 0,0,1,1,1,2),Gr.bind(void 0,0,1,1,1,3),Gr.bind(void 0,1,0,0,0,0),Gr.bind(void 0,1,0,0,0,1),Gr.bind(void 0,1,0,0,0,2),Gr.bind(void 0,1,0,0,0,3),Gr.bind(void 0,1,0,0,1,0),Gr.bind(void 0,1,0,0,1,1),Gr.bind(void 0,1,0,0,1,2),Gr.bind(void 0,1,0,0,1,3),Gr.bind(void 0,1,0,1,0,0),Gr.bind(void 0,1,0,1,0,1),Gr.bind(void 0,1,0,1,0,2),Gr.bind(void 0,1,0,1,0,3),Gr.bind(void 0,1,0,1,1,0),Gr.bind(void 0,1,0,1,1,1),Gr.bind(void 0,1,0,1,1,2),Gr.bind(void 0,1,0,1,1,3),Gr.bind(void 0,1,1,0,0,0),Gr.bind(void 0,1,1,0,0,1),Gr.bind(void 0,1,1,0,0,2),Gr.bind(void 0,1,1,0,0,3),Gr.bind(void 0,1,1,0,1,0),Gr.bind(void 0,1,1,0,1,1),Gr.bind(void 0,1,1,0,1,2),Gr.bind(void 0,1,1,0,1,3),Gr.bind(void 0,1,1,1,0,0),Gr.bind(void 0,1,1,1,0,1),Gr.bind(void 0,1,1,1,0,2),Gr.bind(void 0,1,1,1,0,3),Gr.bind(void 0,1,1,1,1,0),Gr.bind(void 0,1,1,1,1,1),Gr.bind(void 0,1,1,1,1,2),Gr.bind(void 0,1,1,1,1,3)];var Ra=Array.from||function(e){return e.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]?|[^\uD800-\uDFFF]|./g)||[]};Nr.prototype.hasChar=function(e){return null!==this.encoding.charToGlyphIndex(e)},Nr.prototype.charToGlyphIndex=function(e){return this.encoding.charToGlyphIndex(e)},Nr.prototype.charToGlyph=function(e){var t=this.charToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Nr.prototype.stringToGlyphs=function(t,a){var u=this;a=a||this.defaultRenderOptions;for(var c=Ra(t),d=[],e=0,y;e<c.length;e+=1)y=c[e],d.push(u.charToGlyphIndex(y));var _=d.length;if(a.features){var x=a.script||this.substitution.getDefaultScriptName(),i=[];a.features.liga&&(i=i.concat(this.substitution.getFeature("liga",x,a.language))),a.features.rlig&&(i=i.concat(this.substitution.getFeature("rlig",x,a.language)));for(var v=0;v<_;v+=1)for(var S=0;S<i.length;S++){for(var T=i[S],m=T.sub,n=m.length,o=0;o<n&&m[o]===d[v+o];)o++;o===n&&(d.splice(v,n,T.by),_=_-n+1)}}for(var C=Array(_),E=this.glyphs.get(0),r=0;r<_;r+=1)C[r]=u.glyphs.get(d[r])||E;return C},Nr.prototype.nameToGlyphIndex=function(e){return this.glyphNames.nameToGlyphIndex(e)},Nr.prototype.nameToGlyph=function(e){var t=this.nameToGlyphIndex(e),r=this.glyphs.get(t);return r||(r=this.glyphs.get(0)),r},Nr.prototype.glyphIndexToName=function(e){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(e):""},Nr.prototype.getKerningValue=function(e,t){e=e.index||e,t=t.index||t;var r=this.position.defaultKerningTables;return r?this.position.getKerningValue(r,e,t):this.kerningPairs[e+","+t]||0},Nr.prototype.defaultRenderOptions={kerning:!0,features:{liga:!0,rlig:!0}},Nr.prototype.forEachGlyph=function(t,r,a,o,n,s){var p=this;r=void 0===r?0:r,a=void 0===a?0:a,o=void 0===o?72:o,n=n||this.defaultRenderOptions;var u=1/this.unitsPerEm*o,i=this.stringToGlyphs(t,n),g;if(n.kerning){var y=n.script||this.position.getDefaultScriptName();g=this.position.getKerningTables(y,n.language)}for(var f=0,_;f<i.length;f+=1)_=i[f],(s.call(p,_,r,a,o,n),_.advanceWidth&&(r+=_.advanceWidth*u),n.kerning&&f<i.length-1)&&(r+=(g?p.position.getKerningValue(g,_.index,i[f+1].index):p.getKerningValue(_,i[f+1]))*u),n.letterSpacing?r+=n.letterSpacing*o:n.tracking&&(r+=n.tracking/1e3*o);return r},Nr.prototype.getPath=function(t,r,a,o,n){var e=new N;return this.forEachGlyph(t,r,a,o,n,function(t,r,a,o){var i=t.getPath(r,a,o,n,this);e.extend(i)}),e},Nr.prototype.getPaths=function(t,r,a,o,n){var e=[];return this.forEachGlyph(t,r,a,o,n,function(t,r,a,o){var i=t.getPath(r,a,o,n,this);e.push(i)}),e},Nr.prototype.getAdvanceWidth=function(e,t,r){return this.forEachGlyph(e,0,0,t,r,function(){})},Nr.prototype.draw=function(t,r,a,o,n,e){this.getPath(r,a,o,n,e).draw(t)},Nr.prototype.drawPoints=function(t,r,a,o,n,e){this.forEachGlyph(r,a,o,n,e,function(r,a,o,n){r.drawPoints(t,a,o,n)})},Nr.prototype.drawMetrics=function(t,r,a,o,n,e){this.forEachGlyph(r,a,o,n,e,function(r,a,o,n){r.drawMetrics(t,a,o,n)})},Nr.prototype.getEnglishName=function(e){var t=this.names[e];if(t)return t.en},Nr.prototype.validate=function(){function e(){}function t(t){var a=r.getEnglishName(t);e(a&&0<a.trim().length,"No English "+t+" specified.")}var r=this;t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),e(0<this.unitsPerEm,"No unitsPerEm specified.")},Nr.prototype.toTables=function(){return ga.fontToTable(this)},Nr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()},Nr.prototype.toArrayBuffer=function(){for(var t=this.toTables(),r=t.encode(),a=new ArrayBuffer(r.length),o=new Uint8Array(a),n=0;n<r.length;n++)o[n]=r[n];return a},Nr.prototype.download=function(r){var o=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");r=r||o.replace(/\s/g,"")+"-"+n+".otf";var i=this.toArrayBuffer();if(Xt())window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.requestFileSystem(window.TEMPORARY,i.byteLength,function(e){e.root.getFile(r,{create:!0},function(e){e.createWriter(function(t){var r=new DataView(i),a=new Blob([r],{type:"font/opentype"});t.write(a),t.addEventListener("writeend",function(){location.href=e.toURL()},!1)})})},function(e){throw new Error(e.name+": "+e.message)});else{var e=t("fs"),s=Zt(i);e.writeFileSync(r,s)}},Nr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512},Nr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9},Nr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var La={make:function(t,r){var a=new He.Table("fvar",[{name:"version",type:"ULONG",value:65536},{name:"offsetToData",type:"USHORT",value:0},{name:"countSizePairs",type:"USHORT",value:2},{name:"axisCount",type:"USHORT",value:t.axes.length},{name:"axisSize",type:"USHORT",value:20},{name:"instanceCount",type:"USHORT",value:t.instances.length},{name:"instanceSize",type:"USHORT",value:4+4*t.axes.length}]);a.offsetToData=a.sizeOf();for(var o=0;o<t.axes.length;o++)a.fields=a.fields.concat(zr(o,t.axes[o],r));for(var n=0;n<t.instances.length;n++)a.fields=a.fields.concat(Wr(n,t.instances[n],t.axes,r));return a},parse:function(t,r,a){var n=new Ke.Parser(t,r),s=n.parseULong();we.argument(65536===s,"Unsupported fvar table version.");var e=n.parseOffset16();n.skip("uShort",1);for(var p=n.parseUShort(),d=n.parseUShort(),c=n.parseUShort(),i=n.parseUShort(),u=[],h=0;h<p;h++)u.push(Hr(t,r+e+h*d,a));for(var g=[],m=0;m<c;m++)g.push(jr(t,r+e+p*d+m*i,u,a));return{axes:u,instances:g}}},Pa=Array(10);Pa[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();return 1===t?{posFormat:1,coverage:this.parsePointer(L.coverage),value:this.parseValueRecord()}:2===t?{posFormat:2,coverage:this.parsePointer(L.coverage),values:this.parseValueRecordList()}:void we.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")},Pa[2]=function(){var t=this.offset+this.relativeOffset,r=this.parseUShort();we.assert(1===r||2===r,"0x"+t.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var a=this.parsePointer(L.coverage),o=this.parseUShort(),n=this.parseUShort();if(1===r)return{posFormat:r,coverage:a,valueFormat1:o,valueFormat2:n,pairSets:this.parseList(L.pointer(L.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(o),value2:this.parseValueRecord(n)}})))};if(2===r){var e=this.parsePointer(L.classDef),s=this.parsePointer(L.classDef),l=this.parseUShort(),p=this.parseUShort();return{posFormat:r,coverage:a,valueFormat1:o,valueFormat2:n,classDef1:e,classDef2:s,class1Count:l,class2Count:p,classRecords:this.parseList(l,L.list(p,function(){return{value1:this.parseValueRecord(o),value2:this.parseValueRecord(n)}}))}}},Pa[3]=function(){return{error:"GPOS Lookup 3 not supported"}},Pa[4]=function(){return{error:"GPOS Lookup 4 not supported"}},Pa[5]=function(){return{error:"GPOS Lookup 5 not supported"}},Pa[6]=function(){return{error:"GPOS Lookup 6 not supported"}},Pa[7]=function(){return{error:"GPOS Lookup 7 not supported"}},Pa[8]=function(){return{error:"GPOS Lookup 8 not supported"}},Pa[9]=function(){return{error:"GPOS Lookup 9 not supported"}};var wa=Array(10),Ia={parse:function(e,t){t=t||0;var r=new L(e,t),a=r.parseVersion(1);return we.argument(1===a||1.1===a,"Unsupported GPOS table version "+a),1===a?{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Pa)}:{version:a,scripts:r.parseScriptList(),features:r.parseFeatureList(),lookups:r.parseLookupList(Pa),variations:r.parseFeatureVariationsList()}},make:function(e){return new He.Table("GPOS",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new He.ScriptList(e.scripts)},{name:"features",type:"TABLE",value:new He.FeatureList(e.features)},{name:"lookups",type:"TABLE",value:new He.LookupList(e.lookups,wa)}])}},Da={parse:function(e,t){var r=new Ke.Parser(e,t),a=r.parseUShort();if(0===a)return Yr(r);if(1===a)return Xr(r);throw new Error("Unsupported kern table version ("+a+").")}},Ma={parse:function(t,r,a,o){for(var n=new Ke.Parser(t,r),e=o?n.parseUShort:n.parseULong,s=[],l=0,p;l<a+1;l+=1)p=e.call(n),o&&(p*=2),s.push(p);return s}};P.Font=Nr,P.Glyph=ie,P.Path=N,P.BoundingBox=n,P._parse=Ke,P.parse=ge,P.load=function(e,t){("undefined"==typeof window?qr:ce)(e,function(e,r){if(e)return t(e);var a;try{a=ge(r)}catch(e){return t(e,null)}return t(null,a)})},P.loadSync=function(e){return ge(qt(t("fs").readFileSync(e)))},Object.defineProperty(P,"__esModule",{value:!0})})}).call(this,t("buffer").Buffer)},{buffer:3,fs:2}],11:[function(t,a){function s(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}function c(e){if(f===clearTimeout)return clearTimeout(e);if((f===d||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){x&&S&&(x=!1,S.length?_=S.concat(_):v=-1,_.length&&h())}function h(){if(!x){var t=e(u);x=!0;for(var r=_.length;r;){for(S=_,_=[];++v<r;)S&&S[v].run();v=-1,r=_.length}S=null,x=!1,c(t)}}function i(e,t){this.fun=e,this.array=t}function g(){}var y=a.exports={},n,f;!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{f="function"==typeof clearTimeout?clearTimeout:d}catch(e){f=d}}();var _=[],x=!1,v=-1,S;y.nextTick=function(t){var r=arguments,a=Array(arguments.length-1);if(1<arguments.length)for(var o=1;o<arguments.length;o++)a[o-1]=r[o];_.push(new i(t,a)),1!==_.length||x||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},y.title="browser",y.browser=!0,y.env={},y.argv=[],y.version="",y.versions={},y.on=g,y.addListener=g,y.once=g,y.off=g,y.removeListener=g,y.removeAllListeners=g,y.emit=g,y.prependListener=g,y.prependOnceListener=g,y.listeners=function(){return[]},y.binding=function(){throw new Error("process.binding is not supported")},y.cwd=function(){return"/"},y.chdir=function(){throw new Error("process.chdir is not supported")},y.umask=function(){return 0}},{}],12:[function(){!function(y){function _(e){if("string"!=typeof e&&(e=e+""),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function b(e){return"string"!=typeof e&&(e=e+""),e}function c(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return S.iterable&&(t[Symbol.iterator]=function(){return t}),t}function d(e){this.map={},e instanceof d?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function e(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function f(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function a(e){var t=new FileReader,r=f(t);return t.readAsArrayBuffer(e),r}function h(e){var t=new FileReader,r=f(t);return t.readAsText(e),r}function i(e){for(var t=new Uint8Array(e),r=Array(t.length),a=0;a<t.length;a++)r[a]=oe(t[a]);return r.join("")}function g(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function x(){return this.bodyUsed=!1,this._initBody=function(e){if(!(this._bodyInit=e,e))this._bodyText="";else if("string"==typeof e)this._bodyText=e;else if(S.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(S.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(S.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(S.arrayBuffer&&S.blob&&s(e))this._bodyArrayBuffer=g(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!S.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!t(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=g(e)}this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):S.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},S.blob&&(this.blob=function(){var t=e(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?e(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var t=e(this);if(t)return t;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(i(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},S.formData&&(this.formData=function(){return this.text().then(n)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(e){var t=e.toUpperCase();return-1<u.indexOf(t)?t:e}function m(e,t){t=t||{};var r=t.body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new d(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=e+"";if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new d(t.headers)),this.method=l(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function n(e){var t=new FormData;return e.trim().split("&").forEach(function(r){if(r){var a=r.split("="),o=a.shift().replace(/\+/g," "),n=a.join("=").replace(/\+/g," ");t.append(decodeURIComponent(o),decodeURIComponent(n))}}),t}function o(e){var t=new d;return e.split(/\r?\n/).forEach(function(r){var a=r.split(":"),o=a.shift().trim();if(o){var n=a.join(":").trim();t.append(o,n)}}),t}function p(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=200<=this.status&&300>this.status,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new d(t.headers),this.url=t.url||"",this._initBody(e)}if(!y.fetch){var S={searchParams:"URLSearchParams"in y,iterable:"Symbol"in y&&"iterator"in Symbol,blob:"FileReader"in y&&"Blob"in y&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in y,arrayBuffer:"ArrayBuffer"in y};if(S.arrayBuffer)var r=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(e){return e&&DataView.prototype.isPrototypeOf(e)},t=ArrayBuffer.isView||function(e){return e&&-1<r.indexOf(Object.prototype.toString.call(e))};d.prototype.append=function(t,r){t=_(t),r=b(r);var o=this.map[t];this.map[t]=o?o+","+r:r},d.prototype.delete=function(e){delete this.map[_(e)]},d.prototype.get=function(e){return e=_(e),this.has(e)?this.map[e]:null},d.prototype.has=function(e){return this.map.hasOwnProperty(_(e))},d.prototype.set=function(e,t){this.map[_(e)]=b(t)},d.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},d.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),c(e)},d.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),c(e)},d.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),c(e)},S.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);var u=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},x.call(m.prototype),x.call(p.prototype),p.prototype.clone=function(){return new p(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},p.error=function(){var e=new p(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];p.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new p(null,{status:t,headers:{location:e}})},y.Headers=d,y.Request=m,y.Response=p,y.fetch=function(t,r){return new Promise(function(n,a){var i=new m(t,r),e=new XMLHttpRequest;e.onload=function(){var t={status:e.status,statusText:e.statusText,headers:o(e.getAllResponseHeaders()||"")};t.url="responseURL"in e?e.responseURL:t.headers.get("X-Request-URL");var r="response"in e?e.response:e.responseText;n(new p(r,t))},e.onerror=function(){a(new TypeError("Network request failed"))},e.ontimeout=function(){a(new TypeError("Network request failed"))},e.open(i.method,i.url,!0),"include"===i.credentials&&(e.withCredentials=!0),"responseType"in e&&S.blob&&(e.responseType="blob"),i.headers.forEach(function(t,r){e.setRequestHeader(r,t)}),e.send(void 0===i._bodyInit?null:i._bodyInit)})},y.fetch.polyfill=!0}}("undefined"==typeof self?this:self)},{}],13:[function(e,t){var r=e("./core/main");e("./core/constants"),e("./core/environment"),e("./core/error_helpers"),e("./core/helpers"),e("./core/legacy"),e("./core/p5.Element"),e("./core/p5.Graphics"),e("./core/p5.Renderer"),e("./core/p5.Renderer2D"),e("./core/rendering"),e("./core/shim"),e("./core/structure"),e("./core/transform"),e("./core/shape/2d_primitives"),e("./core/shape/attributes"),e("./core/shape/curves"),e("./core/shape/vertex"),e("./color/color_conversion"),e("./color/creating_reading"),e("./color/p5.Color"),e("./color/setting"),e("./data/p5.TypedDict"),e("./events/acceleration"),e("./events/keyboard"),e("./events/mouse"),e("./events/touch"),e("./image/filters"),e("./image/image"),e("./image/loading_displaying"),e("./image/p5.Image"),e("./image/pixels"),e("./io/files"),e("./io/p5.Table"),e("./io/p5.TableRow"),e("./io/p5.XML"),e("./math/calculation"),e("./math/math"),e("./math/noise"),e("./math/p5.Vector"),e("./math/random"),e("./math/trigonometry"),e("./typography/attributes"),e("./typography/loading_displaying"),e("./typography/p5.Font"),e("./utilities/array_functions"),e("./utilities/conversion"),e("./utilities/string_functions"),e("./utilities/time_date"),e("./webgl/3d_primitives"),e("./webgl/interaction"),e("./webgl/light"),e("./webgl/loading"),e("./webgl/material"),e("./webgl/p5.Camera"),e("./webgl/p5.Geometry"),e("./webgl/p5.Matrix"),e("./webgl/p5.RendererGL.Immediate"),e("./webgl/p5.RendererGL"),e("./webgl/p5.RendererGL.Retained"),e("./webgl/p5.Shader"),e("./webgl/p5.Texture"),e("./webgl/text"),e("./core/init"),t.exports=r},{"./color/color_conversion":14,"./color/creating_reading":15,"./color/p5.Color":16,"./color/setting":17,"./core/constants":18,"./core/environment":19,"./core/error_helpers":20,"./core/helpers":21,"./core/init":22,"./core/legacy":23,"./core/main":24,"./core/p5.Element":25,"./core/p5.Graphics":26,"./core/p5.Renderer":27,"./core/p5.Renderer2D":28,"./core/rendering":29,"./core/shape/2d_primitives":30,"./core/shape/attributes":31,"./core/shape/curves":32,"./core/shape/vertex":33,"./core/shim":34,"./core/structure":35,"./core/transform":36,"./data/p5.TypedDict":37,"./events/acceleration":38,"./events/keyboard":39,"./events/mouse":40,"./events/touch":41,"./image/filters":42,"./image/image":43,"./image/loading_displaying":44,"./image/p5.Image":45,"./image/pixels":46,"./io/files":47,"./io/p5.Table":48,"./io/p5.TableRow":49,"./io/p5.XML":50,"./math/calculation":51,"./math/math":52,"./math/noise":53,"./math/p5.Vector":54,"./math/random":55,"./math/trigonometry":56,"./typography/attributes":57,"./typography/loading_displaying":58,"./typography/p5.Font":59,"./utilities/array_functions":60,"./utilities/conversion":61,"./utilities/string_functions":62,"./utilities/time_date":63,"./webgl/3d_primitives":64,"./webgl/interaction":65,"./webgl/light":66,"./webgl/loading":67,"./webgl/material":68,"./webgl/p5.Camera":69,"./webgl/p5.Geometry":70,"./webgl/p5.Matrix":71,"./webgl/p5.RendererGL":74,"./webgl/p5.RendererGL.Immediate":72,"./webgl/p5.RendererGL.Retained":73,"./webgl/p5.Shader":75,"./webgl/p5.Texture":76,"./webgl/text":77}],14:[function(e,t){var r=e("../core/main");r.ColorConversion={},r.ColorConversion._hsbaToHSLA=function(t){var r=t[0],a=t[1],o=t[2],n=(2-a)*o/2;return 0!=n&&(1==n?a=0:.5>n?a/=2-a:a=a*o/(2-2*n)),[r,a,n,t[3]]},r.ColorConversion._hsbaToRGBA=function(t){var r=6*t[0],a=t[1],o=t[2],n=[];if(0===a)n=[o,o,o,t[3]];else{var s=S(r),i=o*(1-a),p=o*(1-a*(r-s)),d=o*(1-a*(1+s-r)),l,c,u;1===s?(l=p,c=o,u=i):2===s?(l=i,c=o,u=d):3===s?(l=i,c=p,u=o):4===s?(l=d,c=i,u=o):5===s?(l=o,c=i,u=p):(l=o,c=d,u=i),n=[l,c,u,t[3]]}return n},r.ColorConversion._hslaToHSBA=function(t){var r=t[0],a=t[1],o=t[2],e;return e=.5>o?(1+a)*o:o+a-o*a,a=2*(e-o)/e,[r,a,e,t[3]]},r.ColorConversion._hslaToRGBA=function(t){var r=6*t[0],a=t[1],o=t[2],n=[];if(0===a)n=[o,o,o,t[3]];else{var i=.5>o?(1+a)*o:o+a-o*a;var s=2*o-i,l=function(e,t,r){return 0>e?e+=6:6<=e&&(e-=6),1>e?t+(r-t)*e:3>e?r:4>e?t+(r-t)*(4-e):t};n=[l(r+2,s,i),l(r,s,i),l(r-2,s,i),t[3]]}return n},r.ColorConversion._rgbaToHSBA=function(t){var r=t[0],a=t[1],e=t[2],o=T(r,a,e),n=o-U(r,a,e),i,s;return 0==n?(i=0,s=0):(s=n/o,r===o?i=(a-e)/n:a===o?i=2+(e-r)/n:e===o&&(i=4+(r-a)/n),0>i?i+=6:6<=i&&(i-=6)),[i/6,s,o,t[3]]},r.ColorConversion._rgbaToHSLA=function(t){var r=t[0],a=t[1],e=t[2],o=T(r,a,e),n=U(r,a,e),s=o+n,i=o-n,l,p;return 0==i?(l=0,p=0):(p=1>s?i/s:i/(2-s),r===o?l=(a-e)/i:a===o?l=2+(e-r)/i:e===o&&(l=4+(r-a)/i),0>l?l+=6:6<=l&&(l-=6)),[l/6,p,s/2,t[3]]},t.exports=r.ColorConversion},{"../core/main":24}],15:[function(t,r){var o=t("../core/main"),n=t("../core/constants");t("./p5.Color"),t("../core/error_helpers"),o.prototype.alpha=function(e){return o._validateParameters("alpha",arguments),this.color(e)._getAlpha()},o.prototype.blue=function(e){return o._validateParameters("blue",arguments),this.color(e)._getBlue()},o.prototype.brightness=function(e){return o._validateParameters("brightness",arguments),this.color(e)._getBrightness()},o.prototype.color=function(){if(o._validateParameters("color",arguments),arguments[0]instanceof o.Color)return arguments[0];var e=arguments[0]instanceof Array?arguments[0]:arguments;return new o.Color(this,e)},o.prototype.green=function(e){return o._validateParameters("green",arguments),this.color(e)._getGreen()},o.prototype.hue=function(e){return o._validateParameters("hue",arguments),this.color(e)._getHue()},o.prototype.lerpColor=function(e,t,r){o._validateParameters("lerpColor",arguments);var a=this._colorMode,s=this._colorMaxes,l,p,d,u,m,y;if(a===n.RGB)m=e.levels.map(function(e){return e/255}),y=t.levels.map(function(e){return e/255});else if(a===n.HSB)e._getBrightness(),t._getBrightness(),m=e.hsba,y=t.hsba;else{if(a!==n.HSL)throw new Error(a+"cannot be used for interpolation.");e._getLightness(),t._getLightness(),m=e.hsla,y=t.hsla}return r=T(U(r,1),0),void 0===this.lerp&&(this.lerp=function(e,t,r){return r*(t-e)+e}),l=this.lerp(m[0],y[0],r),p=this.lerp(m[1],y[1],r),d=this.lerp(m[2],y[2],r),u=this.lerp(m[3],y[3],r),l*=s[a][0],p*=s[a][1],d*=s[a][2],u*=s[a][3],this.color(l,p,d,u)},o.prototype.lightness=function(e){return o._validateParameters("lightness",arguments),this.color(e)._getLightness()},o.prototype.red=function(e){return o._validateParameters("red",arguments),this.color(e)._getRed()},o.prototype.saturation=function(e){return o._validateParameters("saturation",arguments),this.color(e)._getSaturation()},r.exports=o},{"../core/constants":18,"../core/error_helpers":20,"../core/main":24,"./p5.Color":16}],16:[function(t,r){var o=t("../core/main"),s=t("../core/constants"),e=t("./color_conversion");o.Color=function(e,t){if(this._storeModeAndMaxes(e._colorMode,e._colorMaxes),this.mode!==s.RGB&&this.mode!==s.HSL&&this.mode!==s.HSB)throw new Error(this.mode+" is an invalid colorMode.");return this._array=o.Color._parseInputs.apply(this,t),this._calculateLevels(),this},o.Color.prototype.toString=function(t){this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsla||(this.hsla=e._rgbaToHSLA(this._array));var r=this.levels,a=this._array,o=a[3];switch(t){case"#rrggbb":return"#".concat(16>r[0]?"0".concat(r[0].toString(16)):r[0].toString(16),16>r[1]?"0".concat(r[1].toString(16)):r[1].toString(16),16>r[2]?"0".concat(r[2].toString(16)):r[2].toString(16));case"#rrggbbaa":return"#".concat(16>r[0]?"0".concat(r[0].toString(16)):r[0].toString(16),16>r[1]?"0".concat(r[1].toString(16)):r[1].toString(16),16>r[2]?"0".concat(r[2].toString(16)):r[2].toString(16),16>r[3]?"0".concat(r[2].toString(16)):r[3].toString(16));case"#rgb":return"#".concat($(15*a[0]).toString(16),$(15*a[1]).toString(16),$(15*a[2]).toString(16));case"#rgba":return"#".concat($(15*a[0]).toString(16),$(15*a[1]).toString(16),$(15*a[2]).toString(16),$(15*a[3]).toString(16));case"rgb":return"rgb(".concat(r[0],", ",r[1],", ",r[2],")");case"rgb%":return"rgb(".concat((100*a[0]).toPrecision(3),"%, ",(100*a[1]).toPrecision(3),"%, ",(100*a[2]).toPrecision(3),"%)");case"rgba%":return"rgba(".concat((100*a[0]).toPrecision(3),"%, ",(100*a[1]).toPrecision(3),"%, ",(100*a[2]).toPrecision(3),"%, ",(100*a[3]).toPrecision(3),"%)");case"hsb":case"hsv":return"hsb(".concat(this.hsba[0]*this.maxes[s.HSB][0],", ",this.hsba[1]*this.maxes[s.HSB][1],", ",this.hsba[2]*this.maxes[s.HSB][2],")");case"hsb%":case"hsv%":return"hsb(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%)");case"hsba":case"hsva":return"hsba(".concat(this.hsba[0]*this.maxes[s.HSB][0],", ",this.hsba[1]*this.maxes[s.HSB][1],", ",this.hsba[2]*this.maxes[s.HSB][2],", ",o,")");case"hsba%":case"hsva%":return"hsba(".concat((100*this.hsba[0]).toPrecision(3),"%, ",(100*this.hsba[1]).toPrecision(3),"%, ",(100*this.hsba[2]).toPrecision(3),"%, ",(100*o).toPrecision(3),"%)");case"hsl":return"hsl(".concat(this.hsla[0]*this.maxes[s.HSL][0],", ",this.hsla[1]*this.maxes[s.HSL][1],", ",this.hsla[2]*this.maxes[s.HSL][2],")");case"hsl%":return"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%)");case"hsla":return"hsla(".concat(this.hsla[0]*this.maxes[s.HSL][0],", ",this.hsla[1]*this.maxes[s.HSL][1],", ",this.hsla[2]*this.maxes[s.HSL][2],", ",o,")");case"hsla%":return"hsl(".concat((100*this.hsla[0]).toPrecision(3),"%, ",(100*this.hsla[1]).toPrecision(3),"%, ",(100*this.hsla[2]).toPrecision(3),"%, ",(100*o).toPrecision(3),"%)");case"rgba":default:return"rgba("+r[0]+","+r[1]+","+r[2]+","+o+")";}},o.Color.prototype.setRed=function(e){this._array[0]=e/this.maxes[s.RGB][0],this._calculateLevels()},o.Color.prototype.setGreen=function(e){this._array[1]=e/this.maxes[s.RGB][1],this._calculateLevels()},o.Color.prototype.setBlue=function(e){this._array[2]=e/this.maxes[s.RGB][2],this._calculateLevels()},o.Color.prototype.setAlpha=function(e){this._array[3]=e/this.maxes[this.mode][3],this._calculateLevels()},o.Color.prototype._calculateLevels=function(){for(var e=this._array,t=this.levels=Array(e.length),r=e.length-1;0<=r;--r)t[r]=$(255*e[r])},o.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]},o.Color.prototype._storeModeAndMaxes=function(e,t){this.mode=e,this.maxes=t},o.Color.prototype._getMode=function(){return this.mode},o.Color.prototype._getMaxes=function(){return this.maxes},o.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[s.RGB][2]},o.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[s.HSB][2]},o.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[s.RGB][1]},o.Color.prototype._getHue=function(){return this.mode===s.HSB?(this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[s.HSB][0]):(this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[s.HSL][0])},o.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[s.HSL][2]},o.Color.prototype._getRed=function(){return this._array[0]*this.maxes[s.RGB][0]},o.Color.prototype._getSaturation=function(){return this.mode===s.HSB?(this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[s.HSB][1]):(this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[s.HSL][1])};var d={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},a=/\s*/,n=/(\d{1,3})/,i=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,p=new RegExp(i.source+"%"),c={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX4:/^#([a-f0-9])([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,HEX8:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",n.source,",",n.source,",",n.source,"\\)$"].join(a.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",p.source,",",p.source,",",p.source,"\\)$"].join(a.source),"i"),RGBA:new RegExp(["^rgba\\(",n.source,",",n.source,",",n.source,",",i.source,"\\)$"].join(a.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",p.source,",",p.source,",",p.source,",",i.source,"\\)$"].join(a.source),"i"),HSL:new RegExp(["^hsl\\(",n.source,",",p.source,",",p.source,"\\)$"].join(a.source),"i"),HSLA:new RegExp(["^hsla\\(",n.source,",",p.source,",",p.source,",",i.source,"\\)$"].join(a.source),"i"),HSB:new RegExp(["^hsb\\(",n.source,",",p.source,",",p.source,"\\)$"].join(a.source),"i"),HSBA:new RegExp(["^hsba\\(",n.source,",",p.source,",",p.source,",",i.source,"\\)$"].join(a.source),"i")};o.Color._parseInputs=function(t,r,a,l){var u=arguments.length,h=this.mode,g=this.maxes[h],m=[],y;if(3<=u){for(m[0]=t/g[0],m[1]=r/g[1],m[2]=a/g[2],m[3]="number"==typeof l?l/g[3]:1,y=m.length-1;0<=y;--y){var f=m[y];0>f?m[y]=0:1<f&&(m[y]=1)}return h===s.HSL?e._hslaToRGBA(m):h===s.HSB?e._hsbaToRGBA(m):m}if(1===u&&"string"==typeof t){var _=t.trim().toLowerCase();if(d[_])return o.Color._parseInputs.call(this,d[_]);if(c.HEX3.test(_))return m=c.HEX3.exec(_).slice(1).map(function(e){return parseInt(e+e,16)/255}),m[3]=1,m;if(c.HEX6.test(_))return m=c.HEX6.exec(_).slice(1).map(function(e){return parseInt(e,16)/255}),m[3]=1,m;if(c.HEX4.test(_))return m=c.HEX4.exec(_).slice(1).map(function(e){return parseInt(e+e,16)/255});if(c.HEX8.test(_))return m=c.HEX8.exec(_).slice(1).map(function(e){return parseInt(e,16)/255});if(c.RGB.test(_))return m=c.RGB.exec(_).slice(1).map(function(e){return e/255}),m[3]=1,m;if(c.RGB_PERCENT.test(_))return m=c.RGB_PERCENT.exec(_).slice(1).map(function(e){return parseFloat(e)/100}),m[3]=1,m;if(c.RGBA.test(_))return m=c.RGBA.exec(_).slice(1).map(function(e,t){return 3===t?parseFloat(e):e/255});if(c.RGBA_PERCENT.test(_))return m=c.RGBA_PERCENT.exec(_).slice(1).map(function(e,t){return 3===t?parseFloat(e):parseFloat(e)/100});if(c.HSL.test(_)?(m=c.HSL.exec(_).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}),m[3]=1):c.HSLA.test(_)&&(m=c.HSLA.exec(_).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),m=m.map(function(e){return T(U(e,1),0)}),m.length)return e._hslaToRGBA(m);if(c.HSB.test(_)?(m=c.HSB.exec(_).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:parseInt(e,10)/100}),m[3]=1):c.HSBA.test(_)&&(m=c.HSBA.exec(_).slice(1).map(function(e,t){return 0===t?parseInt(e,10)/360:3===t?parseFloat(e):parseInt(e,10)/100})),m.length){for(y=m.length-1;0<=y;--y)m[y]=T(U(m[y],1),0);return e._hsbaToRGBA(m)}m=[1,1,1,1]}else{if(1!==u&&2!==u||"number"!=typeof t)throw new Error(arguments+"is not a valid color representation.");m[0]=t/g[2],m[1]=t/g[2],m[2]=t/g[2],m[3]="number"==typeof r?r/g[3]:1,m=m.map(function(e){return T(U(e,1),0)})}return m},r.exports=o.Color},{"../core/constants":18,"../core/main":24,"./color_conversion":14}],17:[function(t,r){var o=t("../core/main"),n=t("../core/constants");t("./p5.Color"),o.prototype.background=function(){return arguments[0]instanceof o.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this},o.prototype.clear=function(){return this._renderer.clear(),this},o.prototype.colorMode=function(e,t,r,a,i){if(o._validateParameters("colorMode",arguments),e===n.RGB||e===n.HSB||e===n.HSL){this._colorMode=e;var s=this._colorMaxes[e];2===arguments.length?(s[0]=t,s[1]=t,s[2]=t,s[3]=t):4===arguments.length?(s[0]=t,s[1]=r,s[2]=a):5===arguments.length&&(s[0]=t,s[1]=r,s[2]=a,s[3]=i)}return this},o.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this},o.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this},o.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this},o.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this},r.exports=o},{"../core/constants":18,"../core/main":24,"./p5.Color":16}],18:[function(e,t){var r=X;t.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:r/2,PI:r,QUARTER_PI:r/4,TAU:2*r,TWO_PI:2*r,DEGREES:"degrees",RADIANS:"radians",DEG_TO_RAD:r/180,RAD_TO_DEG:180/r,CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:0,LINES:1,LINE_STRIP:3,LINE_LOOP:2,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"source-over",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"copy",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",STROKE:"stroke",FILL:"fill",TEXTURE:"texture",IMMEDIATE:"immediate",NEAREST:"nearest",REPEAT:"repeat",CLAMP:"clamp",MIRROR:"mirror",LANDSCAPE:"landscape",PORTRAIT:"portrait",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF",GRID:"grid",AXES:"axes"}},{}],19:[function(t,r){function o(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth||0}function n(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight||0}function e(e){if(!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled))throw new Error("Fullscreen not enabled in this browser.");e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function s(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var l=t("./main"),a=t("./constants"),i=[a.ARROW,a.CROSS,a.HAND,a.MOVE,a.TEXT,a.WAIT];l.prototype._frameRate=0,l.prototype._lastFrameTime=window.performance.now(),l.prototype._targetFrameRate=60;var p=window.print;l.prototype.print=function(){arguments.length?console.log.apply(console,arguments):p()},l.prototype.frameCount=0,l.prototype.focused=document.hasFocus(),l.prototype.cursor=function(t,r,a){var o="auto",n=this._curElement.elt;if(-1<i.indexOf(t))o=t;else if("string"==typeof t){var e="";r&&a&&"number"==typeof r&&"number"==typeof a&&(e=r+" "+a),o="http://"===t.substring(0,7)||"https://"===t.substring(0,8)?"url("+t+") "+e+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(t)?"url("+t+") "+e+", auto":t}n.style.cursor=o},l.prototype.frameRate=function(e){return l._validateParameters("frameRate",arguments),"number"!=typeof e||0>e?this._frameRate:(this._setProperty("_targetFrameRate",e),this._runFrames(),this)},l.prototype.getFrameRate=function(){return this.frameRate()},l.prototype.setFrameRate=function(e){return this.frameRate(e)},l.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"},l.prototype.displayWidth=screen.width,l.prototype.displayHeight=screen.height,l.prototype.windowWidth=o(),l.prototype.windowHeight=n(),l.prototype._onresize=function(e){this._setProperty("windowWidth",o()),this._setProperty("windowHeight",n());var t=this._isGlobal?window:this,r;"function"==typeof t.windowResized&&(void 0===(r=t.windowResized(e))||r||e.preventDefault())},l.prototype.width=0,l.prototype.height=0,l.prototype.fullscreen=function(t){return(l._validateParameters("fullscreen",arguments),void 0===t)?document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement:void(t?e(document.documentElement):s())},l.prototype.pixelDensity=function(e){l._validateParameters("pixelDensity",arguments);var t;return"number"==typeof e?(e!==this._pixelDensity&&(this._pixelDensity=e,this._pixelsDirty=!0),t=this,this.resizeCanvas(this.width,this.height,!0)):t=this._pixelDensity,t},l.prototype.displayDensity=function(){return window.devicePixelRatio},l.prototype.getURL=function(){return location.href},l.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(e){return""!==e})},l.prototype.getURLParams=function(){for(var e=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,t={},r;null!=(r=e.exec(location.search));)r.index===e.lastIndex&&e.lastIndex++,t[r[1]]=r[2];return t},r.exports=l},{"./constants":18,"./main":24}],20:[function(t,r){var a=t("./main");t("./constants"),a._validateParameters=a._friendlyFileLoadError=function(){};var o=null,n=function(){var e={},r=function(t){return Object.getOwnPropertyNames(t).filter(function(t){return"_"!==t[0]&&!(t in e)&&(e[t]=!0,!0)}).map(function(e){var r;return r="function"==typeof t[e]?"function":e===e.toUpperCase()?"constant":"variable",{name:e,type:r}})};o=[].concat(r(a.prototype),r(t("./constants"))),o.sort(function(e,t){return t.name.length-e.name.length})},i=function(e,t){t||(t=console.log.bind(console)),o||n(),o.some(function(r){if(e.message&&null!==e.message.match("\\W?"+r.name+"\\W"))return t("Did you just try to use p5.js's "+r.name+("function"===r.type?"() ":" ")+r.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: https://github.com/processing/p5.js/wiki/p5.js-overview#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup"),!0})};a.prototype._helpForMisusedAtTopLevelCode=i,"complete"!==document.readyState&&(window.addEventListener("error",i,!1),window.addEventListener("load",function(){window.removeEventListener("error",i,!1)})),r.exports=a},{"../../docs/reference/data.json":void 0,"./constants":18,"./main":24}],21:[function(e,t){var r=e("./constants");t.exports={modeAdjust:function(t,a,o,n,e){return e===r.CORNER?{x:t,y:a,w:o,h:n}:e===r.CORNERS?{x:t,y:a,w:o-t,h:n-a}:e===r.RADIUS?{x:t-o,y:a-n,w:2*o,h:2*n}:e===r.CENTER?{x:t-.5*o,y:a-.5*n,w:o,h:n}:void 0}}},{"./constants":18}],22:[function(t){var r=t("../core/main"),a=function(){window.mocha||(window.setup&&"function"==typeof window.setup||window.draw&&"function"==typeof window.draw)&&!r.instance&&new r};"complete"===document.readyState?a():window.addEventListener("load",a,!1)},{"../core/main":24}],23:[function(e,t){var r=e("./main");r.prototype.exit=function(){throw new Error("exit() not implemented, see remove()")},r.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()")},r.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()")},r.prototype.size=function(){var e="size() is not a valid p5 function, to set the size of the ";throw e+="drawing canvas, please use createCanvas() instead",new Error(e)},t.exports=r},{"./main":24}],24:[function(t,r){t("./shim");var a=t("./constants"),o=function(e,t,r){var a=Math.hasOwnProperty;"boolean"==typeof t&&void 0===r&&(r=t,t=void 0),this._setupDone=!1,this._pixelDensity=v(window.devicePixelRatio)||1,this._userNode=t,this._curElement=null,this._elements=[],this._requestAnimId=0,this._preloadCount=0,this._isGlobal=!1,this._loop=!0,this._initializeInstanceVariables(),this._defaultCanvasSize={width:100,height:100},this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,dblclick:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null},this._events.wheel=null,this._loadingScreenId="p5_loading",this._registeredMethods={};for(var s=Object.getOwnPropertyNames(o.prototype._registeredMethods),d=0,u;d<s.length;d++)u=s[d],this._registeredMethods[u]=o.prototype._registeredMethods[u].slice();window.DeviceOrientationEvent&&(this._events.deviceorientation=null),window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null),this._start=function(){this._userNode&&"string"==typeof this._userNode&&(this._userNode=document.getElementById(this._userNode));var e=this._isGlobal?window:this,t=e.preload;if(t){var r=document.getElementById(this._loadingScreenId);r||(r=document.createElement("div"),r.innerHTML="Loading...",r.style.position="absolute",r.id=this._loadingScreenId,(this._userNode||document.body).appendChild(r));var a=this._preloadMethods;for(var n in a){a[n]=a[n]||o;var i=a[n];i!==o.prototype&&i!==o||(this._isGlobal&&(window[n]=this._wrapPreload(this,n)),i=this),this._registeredPreloadMethods[n]=i[n],i[n]=this._wrapPreload(i,n)}t(),this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this),this._runIfPreloadsAreDone=function(){var e=this._isGlobal?window:this;if(0===e._preloadCount){var t=document.getElementById(e._loadingScreenId);t&&t.parentNode.removeChild(t),e._setup(),e._runFrames(),e._draw()}},this._decrementPreload=function(){var e=this._isGlobal?window:this;"function"==typeof e.preload&&(e._setProperty("_preloadCount",e._preloadCount-1),e._runIfPreloadsAreDone())},this._wrapPreload=function(e,t){return function(){return this._incrementPreload(),this._registeredPreloadMethods[t].apply(e,arguments)}.bind(this)},this._incrementPreload=function(){var e=this._isGlobal?window:this;e._setProperty("_preloadCount",e._preloadCount+1)},this._setup=function(){this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d");var t=this._isGlobal?window:this;if("function"==typeof t.preload)for(var r in this._preloadMethods)t[r]=this._preloadMethods[r][r],t[r]&&this&&(t[r]=t[r].bind(this));"function"==typeof t.setup&&t.setup();for(var a=document.getElementsByTagName("canvas"),o=0,n;o<a.length;o++)n=a[o],"true"===n.dataset.hidden&&(n.style.visibility="",delete n.dataset.hidden);this._setupDone=!0}.bind(this),this._draw=function(){var e=window.performance.now(),t=e-this._lastFrameTime,r=1e3/this._targetFrameRate;(!this._loop||t>=r-5)&&(this.redraw(),this._frameRate=1e3/(e-this._lastFrameTime),this._lastFrameTime=e,void 0!==this._updateMouseCoords&&this._updateMouseCoords()),this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this),this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this),this._setProperty=function(e,t){this[e]=t,this._isGlobal&&(window[e]=t)}.bind(this),this.remove=function(){var e=document.getElementById(this._loadingScreenId);if(e&&(e.parentNode.removeChild(e),this._incrementPreload()),this._curElement){for(var t in this._loop=!1,this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId),this._events)window.removeEventListener(t,this._events[t]);for(var r=0,a;r<this._elements.length;r++)for(var n in a=this._elements[r],a.elt.parentNode&&a.elt.parentNode.removeChild(a.elt),a._events)a.elt.removeEventListener(n,a._events[n]);var s=this;this._registeredMethods.remove.forEach(function(e){void 0!==e&&e.call(s)})}if(this._isGlobal){for(var l in o.prototype)try{delete window[l]}catch(e){window[l]=void 0}for(var p in this)if(this.hasOwnProperty(p))try{delete window[p]}catch(e){window[p]=void 0}o.instance=null}}.bind(this),this._registeredMethods.init.forEach(function(e){void 0!==e&&e.call(this)},this);var y=this._createFriendlyGlobalFunctionBinder();if(e)e(this);else{for(var h in this._isGlobal=!0,o.instance=this,o.prototype)if("function"==typeof o.prototype[h]){var i=h.substring(2);this._events.hasOwnProperty(i)||(a(h)&&Math[h]===o.prototype[h]?y(h,o.prototype[h]):y(h,o.prototype[h].bind(this)))}else y(h,o.prototype[h]);for(var _ in this)this.hasOwnProperty(_)&&y(_,this[_])}for(var x in this._events){var l=this["_on"+x];if(l){var m=l.bind(this);window.addEventListener(x,m,{passive:!1}),this._events[x]=m}}var n=function(){this._setProperty("focused",!0)}.bind(this),S=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",n),window.addEventListener("blur",S),this.registerMethod("remove",function(){window.removeEventListener("focus",n),window.removeEventListener("blur",S)}),r?this._start():"complete"===document.readyState?this._start():window.addEventListener("load",this._start.bind(this),!1)};for(var e in o.prototype._initializeInstanceVariables=function(){this._styles=[],this._bezierDetail=20,this._curveDetail=20,this._colorMode=a.RGB,this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]},this._pixelsDirty=!0},o.instance=null,o.disableFriendlyErrors=!1,a)o.prototype[e]=a[e];o.prototype._preloadMethods={loadJSON:o.prototype,loadImage:o.prototype,loadStrings:o.prototype,loadXML:o.prototype,loadBytes:o.prototype,loadTable:o.prototype,loadFont:o.prototype,loadModel:o.prototype,loadShader:o.prototype},o.prototype._registeredMethods={init:[],pre:[],post:[],remove:[]},o.prototype._registeredPreloadMethods={},o.prototype.registerPreloadMethod=function(e,t){o.prototype._preloadMethods.hasOwnProperty(e)||(o.prototype._preloadMethods[e]=t)},o.prototype.registerMethod=function(e,t){var r=this||o.prototype;r._registeredMethods.hasOwnProperty(e)||(r._registeredMethods[e]=[]),r._registeredMethods[e].push(t)},o.prototype._createFriendlyGlobalFunctionBinder=function(e){e=e||{};var t=e.globalObject||window,r=e.log||console.log.bind(console);return function(e,r){t[e]=r}},r.exports=o},{"./constants":18,"./shim":34}],25:[function(t,r){function o(t,r,a){return!1===r?e(t,a):n(t,r,a),this}function n(t,r,a){a._events[t]&&e(t,a);var o=r.bind(a);a.elt.addEventListener(t,o,!1),a._events[t]=o}function e(e,t){var r=t._events[e];t.elt.removeEventListener(e,r,!1),t._events[e]=null}var i=t("./main");i.Element=function(e,t){this.elt=e,this._pInst=t,this._events={},this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight},i.Element.prototype.parent=function(e){return void 0===e?this.elt.parentNode:("string"==typeof e?("#"===e[0]&&(e=e.substring(1)),e=document.getElementById(e)):e instanceof i.Element&&(e=e.elt),e.appendChild(this.elt),this)},i.Element.prototype.id=function(e){return void 0===e?this.elt.id:(this.elt.id=e,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)},i.Element.prototype.class=function(e){return void 0===e?this.elt.className:(this.elt.className=e,this)},i.Element.prototype.mousePressed=function(e){return o("mousedown",function(t){return this._pInst._setProperty("mouseIsPressed",!0),this._pInst._setMouseButton(t),e()},this),this},i.Element.prototype.doubleClicked=function(e){return o("dblclick",e,this),this},i.Element.prototype.mouseWheel=function(e){return o("wheel",e,this),this},i.Element.prototype.mouseReleased=function(e){return o("mouseup",e,this),this},i.Element.prototype.mouseClicked=function(e){return o("click",e,this),this},i.Element.prototype.mouseMoved=function(e){return o("mousemove",e,this),this},i.Element.prototype.mouseOver=function(e){return o("mouseover",e,this),this},i.Element.prototype.changed=function(e){return o("change",e,this),this},i.Element.prototype.input=function(e){return o("input",e,this),this},i.Element.prototype.mouseOut=function(e){return o("mouseout",e,this),this},i.Element.prototype.touchStarted=function(e){return o("touchstart",e,this),this},i.Element.prototype.touchMoved=function(e){return o("touchmove",e,this),this},i.Element.prototype.touchEnded=function(e){return o("touchend",e,this),this},i.Element.prototype.dragOver=function(e){return o("dragover",e,this),this},i.Element.prototype.dragLeave=function(e){return o("dragleave",e,this),this},i.Element.prototype.drop=function(e,t){function r(t){var r=new i.File(t);return function(t){r.data=t.target.result,e(r)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(n("dragover",function(e){e.stopPropagation(),e.preventDefault()},this),n("dragleave",function(e){e.stopPropagation(),e.preventDefault()},this),void 0!==t&&n("drop",t,this),n("drop",function(t){t.stopPropagation(),t.preventDefault();for(var a=t.dataTransfer.files,o=0;o<a.length;o++){var n=a[o],e=new FileReader;e.onload=r(n),-1<n.type.indexOf("text")?e.readAsText(n):e.readAsDataURL(n)}},this)):console.log("The File APIs are not fully supported in this browser."),this},i.Element.prototype._setProperty=function(e,t){this[e]=t},r.exports=i.Element},{"./main":24}],26:[function(t,r){var o=t("./main"),n=t("./constants");o.Graphics=function(e,t,r,a){var i=r||n.P2D;for(var s in this.canvas=document.createElement("canvas"),(a._userNode||document.body).appendChild(this.canvas),o.Element.call(this,this.canvas,a,!1),o.prototype)this[s]||("function"==typeof o.prototype[s]?this[s]=o.prototype[s].bind(this):this[s]=o.prototype[s]);return o.prototype._initializeInstanceVariables.apply(this),this.width=e,this.height=t,this._pixelDensity=a._pixelDensity,this._renderer=i===n.WEBGL?new o.RendererGL(this.canvas,this,!1):new o.Renderer2D(this.canvas,this,!1),a._elements.push(this),this._renderer.resize(e,t),this._renderer._applyDefaults(),this},o.Graphics.prototype=Object.create(o.Element.prototype),o.Graphics.prototype.remove=function(){this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);var e=this._pInst._elements.indexOf(this);for(var t in-1!==e&&this._pInst._elements.splice(e,1),this._events)this.elt.removeEventListener(t,this._events[t])},r.exports=o.Graphics},{"./constants":18,"./main":24}],27:[function(t,r){function o(e){var t=0,r=0;if(e.offsetParent)do t+=e.offsetLeft,r+=e.offsetTop;while(e=e.offsetParent);else t+=e.offsetLeft,r+=e.offsetTop;return[t,r]}var n=t("./main"),u=t("../core/constants");n.Renderer=function(e,t,r){n.Element.call(this,e,t),this.canvas=e,r?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]),this._textSize=12,this._textLeading=15,this._textFont="sans-serif",this._textStyle=u.NORMAL,this._textAscent=null,this._textDescent=null,this._textAlign=u.LEFT,this._textBaseline=u.BASELINE,this._rectMode=u.CORNER,this._ellipseMode=u.CENTER,this._curveTightness=0,this._imageMode=u.CORNER,this._tint=null,this._doStroke=!0,this._doFill=!0,this._strokeSet=!1,this._fillSet=!1},n.Renderer.prototype=Object.create(n.Element.prototype),n.Renderer.prototype.push=function(){return{properties:{_doStroke:this._doStroke,_strokeSet:this._strokeSet,_doFill:this._doFill,_fillSet:this._fillSet,_tint:this._tint,_imageMode:this._imageMode,_rectMode:this._rectMode,_ellipseMode:this._ellipseMode,_textFont:this._textFont,_textLeading:this._textLeading,_textSize:this._textSize,_textAlign:this._textAlign,_textBaseline:this._textBaseline,_textStyle:this._textStyle}}},n.Renderer.prototype.pop=function(e){e.properties&&Object.assign(this,e.properties)},n.Renderer.prototype.resize=function(e,t){this.width=e,this.height=t,this.elt.width=e*this._pInst._pixelDensity,this.elt.height=t*this._pInst._pixelDensity,this.elt.style.width=e+"px",this.elt.style.height=t+"px",this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))},n.Renderer.prototype.textLeading=function(e){return"number"==typeof e?(this._setProperty("_textLeading",e),this._pInst):this._textLeading},n.Renderer.prototype.textSize=function(e){return"number"==typeof e?(this._setProperty("_textSize",e),this._setProperty("_textLeading",e*u._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize},n.Renderer.prototype.textStyle=function(e){return e?(e!==u.NORMAL&&e!==u.ITALIC&&e!==u.BOLD||this._setProperty("_textStyle",e),this._applyTextProperties()):this._textStyle},n.Renderer.prototype.textAscent=function(){return null===this._textAscent&&this._updateTextMetrics(),this._textAscent},n.Renderer.prototype.textDescent=function(){return null===this._textDescent&&this._updateTextMetrics(),this._textDescent},n.Renderer.prototype.textAlign=function(e,t){return void 0===e?{horizontal:this._textAlign,vertical:this._textBaseline}:(this._setProperty("_textAlign",e),void 0!==t&&this._setProperty("_textBaseline",t),this._applyTextProperties())},n.Renderer.prototype.text=function(y,f,_,x,d){var e=this._pInst,p=Number.MAX_VALUE,v,S,T,C,E,R,L,P,w;if((this._doFill||this._doStroke)&&void 0!==y){if("string"!=typeof y&&(y=y.toString()),y=y.replace(/(\t)/g,"  "),v=y.split("\n"),void 0!==x){for(w=0,T=0;T<v.length;T++)for(E="",P=v[T].split(" "),S=0;S<P.length;S++)R=E+P[S]+" ",L=this.textWidth(R),L>x?(E=P[S]+" ",w+=e.textLeading()):E=R;switch(this._rectMode===u.CENTER&&(f-=x/2,_-=d/2),this._textAlign){case u.CENTER:f+=x/2;break;case u.RIGHT:f+=x;}var I=!1;if(void 0!==d){switch(this._textBaseline){case u.BOTTOM:_+=d-w;break;case u.CENTER:_+=(d-w)/2;break;case u.BASELINE:I=!0,this._textBaseline=u.TOP;}p=_+d-e.textAscent()}for(T=0;T<v.length;T++){for(E="",P=v[T].split(" "),S=0;S<P.length;S++)R=E+P[S]+" ",L=this.textWidth(R),L>x&&0<E.length?(this._renderText(e,E,f,_,p),E=P[S]+" ",_+=e.textLeading()):E=R;this._renderText(e,E,f,_,p),_+=e.textLeading(),I&&(this._textBaseline=u.BASELINE)}}else{var D=0,M=e.textAlign().vertical;for(M===u.CENTER?D=(v.length-1)*e.textLeading()/2:M===u.BOTTOM&&(D=(v.length-1)*e.textLeading()),C=0;C<v.length;C++)this._renderText(e,v[C],f,_-D,p),_+=e.textLeading()}return e}},n.Renderer.prototype._applyDefaults=function(){return this},n.Renderer.prototype._isOpenType=function(e){return"object"==typeof(e=e||this._textFont)&&e.font&&e.font.supported},n.Renderer.prototype._updateTextMetrics=function(){if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;var t=document.createElement("span");t.style.fontFamily=this._textFont,t.style.fontSize=this._textSize+"px",t.innerHTML="ABCjgq|";var r=document.createElement("div");r.style.display="inline-block",r.style.width="1px",r.style.height="0px";var a=document.createElement("div");a.appendChild(t),a.appendChild(r),a.style.height="0px",a.style.overflow="hidden",document.body.appendChild(a),r.style.verticalAlign="baseline";var n=o(r),i=o(t),s=n[1]-i[1];r.style.verticalAlign="bottom",n=o(r),i=o(t);var l=n[1]-i[1];return document.body.removeChild(a),this._setProperty("_textAscent",s),this._setProperty("_textDescent",l-s),this},r.exports=n.Renderer},{"../core/constants":18,"./main":24}],28:[function(t,r){var s=t("./main"),p=t("./constants"),o=t("../image/filters");t("./p5.Renderer");s.Renderer2D=function(e,t,r){return s.Renderer.call(this,e,t,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this},s.Renderer2D.prototype=Object.create(s.Renderer.prototype),s.Renderer2D.prototype._applyDefaults=function(){this._cachedFillStyle=this._cachedStrokeStyle=void 0,this._setFill(p._DEFAULT_FILL),this._setStroke(p._DEFAULT_STROKE),this.drawingContext.lineCap=p.ROUND,this.drawingContext.font="normal 12px sans-serif"},s.Renderer2D.prototype.resize=function(e,t){s.Renderer.prototype.resize.call(this,e,t),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)},s.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.resetMatrix(),arguments[0]instanceof s.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var e=this._getFill(),t=this._pInst.color.apply(this._pInst,arguments),r=t.toString();this._setFill(r),this.drawingContext.fillRect(0,0,this.width,this.height),this._setFill(e)}this.drawingContext.restore(),this._pInst._pixelsDirty=!0},s.Renderer2D.prototype.clear=function(){this.drawingContext.save(),this.resetMatrix(),this.drawingContext.clearRect(0,0,this.width,this.height),this.drawingContext.restore(),this._pInst._pixelsDirty=!0},s.Renderer2D.prototype.fill=function(){var e=this._pInst.color.apply(this._pInst,arguments);this._setFill(e.toString())},s.Renderer2D.prototype.stroke=function(){var e=this._pInst.color.apply(this._pInst,arguments);this._setStroke(e.toString())},s.Renderer2D.prototype.image=function(t,r,a,o,e,n,p,d,i){var c;try{this._tint&&(s.MediaElement&&t instanceof s.MediaElement&&t.loadPixels(),t.canvas&&(c=this._getTintedImageCanvas(t))),c||(c=t.canvas||t.elt);var u=1;t.width&&0<t.width&&(u=c.width/t.width),this.drawingContext.drawImage(c,u*r,u*a,u*o,u*e,n,p,d,i)}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e}this._pInst._pixelsDirty=!0},s.Renderer2D.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var r=o._toPixels(t.canvas),a=document.createElement("canvas");a.width=t.canvas.width,a.height=t.canvas.height;for(var n=a.getContext("2d"),s=n.createImageData(t.canvas.width,t.canvas.height),e=s.data,p=0;p<r.length;p+=4){var d=r[p],i=r[p+1],c=r[p+2],u=r[p+3];e[p]=d*this._tint[0]/255,e[p+1]=i*this._tint[1]/255,e[p+2]=c*this._tint[2]/255,e[p+3]=u*this._tint[3]/255}return n.putImageData(s,0,0),a},s.Renderer2D.prototype.blendMode=function(e){this.drawingContext.globalCompositeOperation=e},s.Renderer2D.prototype.blend=function(){var e=this.drawingContext.globalCompositeOperation,t=arguments[arguments.length-1],r=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=t,this._pInst?this._pInst.copy.apply(this._pInst,r):this.copy.apply(this,r),this.drawingContext.globalCompositeOperation=e},s.Renderer2D.prototype.copy=function(){var t,r,o,n,l,p,d,u,m;if(9===arguments.length)t=arguments[0],r=arguments[1],o=arguments[2],n=arguments[3],l=arguments[4],p=arguments[5],d=arguments[6],u=arguments[7],m=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this._pInst,r=arguments[0],o=arguments[1],n=arguments[2],l=arguments[3],p=arguments[4],d=arguments[5],u=arguments[6],m=arguments[7]}s.Renderer2D._copyHelper(this,t,r,o,n,l,p,d,u,m),this._pInst._pixelsDirty=!0},s.Renderer2D._copyHelper=function(t,r,a,o,n,e,s,l,p,i){r.loadPixels();var d=r.canvas.width/r.width;t.drawingContext.drawImage(r.canvas,d*a,d*o,d*n,d*e,s,l,p,i)},s.Renderer2D.prototype.get=function(t,r,l,d){if(void 0===l&&void 0===d&&(void 0===t&&void 0===r?(t=r=0,l=this.width,d=this.height):l=d=1),0>t+l||0>r+d||t>=this.width||r>=this.height)return[0,0,0,255];var u=this._pInst||this,m=u._pixelDensity;t=S(t),r=S(r),l=S(l),d=S(d);var g=t*m,h=r*m;if(1!==l||1!==d||this instanceof s.RendererGL){var i=U(l,u.width),y=U(d,u.height),f=new s.Image(i,y);return f.canvas.getContext("2d").drawImage(this.canvas,g,h,i*m,y*m,0,0,i,y),f}var n,_;return u._pixelsDirty?(n=this.drawingContext.getImageData(g,h,1,1).data,_=0):(n=u.pixels,_=4*(g+h*this.width*m)),[n[_+0],n[_+1],n[_+2],n[_+3]]},s.Renderer2D.prototype.loadPixels=function(){var t=this._pInst||this;if(t._pixelsDirty){t._pixelsDirty=!1;var r=t._pixelDensity,a=this.width*r,o=this.height*r,n=this.drawingContext.getImageData(0,0,a,o);t._setProperty("imageData",n),t._setProperty("pixels",n.data)}},s.Renderer2D.prototype.set=function(t,r,o){t=S(t),r=S(r);var n=this._pInst||this;if(o instanceof s.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(n._pixelDensity,n._pixelDensity),this.drawingContext.drawImage(o.canvas,t,r),this.drawingContext.restore(),n._pixelsDirty=!0;else{var e=0,p=0,d=0,c=0,u=4*(r*n._pixelDensity*(this.width*n._pixelDensity)+t*n._pixelDensity);if(n.imageData&&!n._pixelsDirty||n.loadPixels.call(n),"number"==typeof o)u<n.pixels.length&&(e=o,p=o,d=o,c=255);else if(o instanceof Array){if(4>o.length)throw new Error("pixel array must be of the form [R, G, B, A]");u<n.pixels.length&&(e=o[0],p=o[1],d=o[2],c=o[3])}else o instanceof s.Color&&u<n.pixels.length&&(e=o.levels[0],p=o.levels[1],d=o.levels[2],c=o.levels[3]);for(var m=0;m<n._pixelDensity;m++)for(var y=0;y<n._pixelDensity;y++)u=4*((r*n._pixelDensity+y)*this.width*n._pixelDensity+(t*n._pixelDensity+m)),n.pixels[u]=e,n.pixels[u+1]=p,n.pixels[u+2]=d,n.pixels[u+3]=c}},s.Renderer2D.prototype.updatePixels=function(t,r,o,n){var i=this._pInst||this,e=i._pixelDensity;void 0===t&&void 0===r&&void 0===o&&void 0===n&&(t=0,r=0,o=this.width,n=this.height),o*=e,n*=e,this.drawingContext.putImageData(i.imageData,t,r,0,0,o,n),0===t&&0===r&&o===this.width&&n===this.height||(i._pixelsDirty=!0)},s.Renderer2D.prototype._acuteArcToBezier=function(t,r){var a=r/2,o=Y(a),n=W(a),e=1/V(a),s=t+a,l=Y(s),p=W(s),i=(4-o)/3,d=n+(o-i)*e;return{ax:Y(t),ay:W(t),bx:i*l+d*p,by:i*p-d*l,cx:i*l-d*p,cy:i*p+d*l,dx:Y(t+r),dy:W(t+r)}},s.Renderer2D.prototype.arc=function(e,t,r,o,s,l,d){var u=this.drawingContext,i=r/2,h=o/2,c=0,g=[];for(e+=i,t+=h;l-s>1e-5;)c=U(l-s,p.HALF_PI),g.push(this._acuteArcToBezier(s,c)),s+=c;return this._doFill&&(u.beginPath(),g.forEach(function(r,a){0===a&&u.moveTo(e+r.ax*i,t+r.ay*h),u.bezierCurveTo(e+r.bx*i,t+r.by*h,e+r.cx*i,t+r.cy*h,e+r.dx*i,t+r.dy*h)}),d!==p.PIE&&null!=d||u.lineTo(e,t),u.closePath(),u.fill()),this._doStroke&&(u.beginPath(),g.forEach(function(r,a){0===a&&u.moveTo(e+r.ax*i,t+r.ay*h),u.bezierCurveTo(e+r.bx*i,t+r.by*h,e+r.cx*i,t+r.cy*h,e+r.dx*i,t+r.dy*h)}),d===p.PIE?(u.lineTo(e,t),u.closePath()):d===p.CHORD&&u.closePath(),u.stroke()),this},s.Renderer2D.prototype.ellipse=function(t){var r=this.drawingContext,a=this._doFill,s=this._doStroke,d=t[0],e=t[1],c=t[2],u=t[3];if(a&&!s){if("rgba(0,0,0,0)"===this._getFill())return this;}else if(!a&&s&&this._getStroke()==="rgba(0,0,0,0)")return this;var i=.5522847498,h=c/2*i,g=u/2*i,l=d+c,m=e+u,n=d+c/2,o=e+u/2;r.beginPath(),r.moveTo(d,o),r.bezierCurveTo(d,o-g,n-h,e,n,e),r.bezierCurveTo(n+h,e,l,o-g,l,o),r.bezierCurveTo(l,o+g,n+h,m,n,m),r.bezierCurveTo(n-h,m,d,o+g,d,o),r.closePath(),a&&r.fill(),s&&r.stroke()},s.Renderer2D.prototype.line=function(t,r,a,o){var n=this.drawingContext;return this._doStroke?this._getStroke()==="rgba(0,0,0,0)"?this:(1==n.lineWidth%2&&n.translate(.5,.5),n.beginPath(),n.moveTo(t,r),n.lineTo(a,o),n.stroke(),1==n.lineWidth%2&&n.translate(-.5,-.5),this):this},s.Renderer2D.prototype.point=function(e,t){var r=this.drawingContext;if(!this._doStroke)return this;if("rgba(0,0,0,0)"===this._getStroke())return this;var o=this._getStroke(),n=this._getFill();e=$(e),t=$(t),this._setFill(o),1<r.lineWidth?(r.beginPath(),r.arc(e,t,r.lineWidth/2,0,p.TWO_PI,!1),r.fill()):r.fillRect(e,t,1,1),this._setFill(n)},s.Renderer2D.prototype.quad=function(t,r,a,o,n,e,s,p){var i=this.drawingContext,d=this._doFill,c=this._doStroke;if(d&&!c){if("rgba(0,0,0,0)"===this._getFill())return this;}else if(!d&&c&&this._getStroke()==="rgba(0,0,0,0)")return this;return i.beginPath(),i.moveTo(t,r),i.lineTo(a,o),i.lineTo(n,e),i.lineTo(s,p),i.closePath(),d&&i.fill(),c&&i.stroke(),this},s.Renderer2D.prototype.rect=function(t){var r=t[0],a=t[1],s=t[2],p=t[3],e=t[4],d=t[5],c=t[6],u=t[7],g=this.drawingContext,y=this._doFill,l=this._doStroke;if(y&&!l){if("rgba(0,0,0,0)"===this._getFill())return this;}else if(!y&&l&&this._getStroke()==="rgba(0,0,0,0)")return this;if(this._doStroke&&1==g.lineWidth%2&&g.translate(.5,.5),g.beginPath(),void 0===e)g.rect(r,a,s,p);else{void 0===d&&(d=e),void 0===c&&(c=d),void 0===u&&(u=c);var m=s/2,n=p/2;s<2*e&&(e=m),p<2*e&&(e=n),s<2*d&&(d=m),p<2*d&&(d=n),s<2*c&&(c=m),p<2*c&&(c=n),s<2*u&&(u=m),p<2*u&&(u=n),g.beginPath(),g.moveTo(r+e,a),g.arcTo(r+s,a,r+s,a+p,d),g.arcTo(r+s,a+p,r,a+p,c),g.arcTo(r,a+p,r,a,u),g.arcTo(r,a,r+s,a,e),g.closePath()}return this._doFill&&g.fill(),this._doStroke&&g.stroke(),this._doStroke&&1==g.lineWidth%2&&g.translate(-.5,-.5),this},s.Renderer2D.prototype.triangle=function(t){var r=this.drawingContext,a=this._doFill,o=this._doStroke,n=t[0],e=t[1],s=t[2],l=t[3],i=t[4],p=t[5];if(a&&!o){if("rgba(0,0,0,0)"===this._getFill())return this;}else if(!a&&o&&this._getStroke()==="rgba(0,0,0,0)")return this;r.beginPath(),r.moveTo(n,e),r.lineTo(s,l),r.lineTo(i,p),r.closePath(),a&&r.fill(),o&&r.stroke()},s.Renderer2D.prototype.endShape=function(e,t,r,a,s,u,y){if(0===t.length)return this;if(!this._doStroke&&!this._doFill)return this;var h=e===p.CLOSE,_;h&&!u&&t.push(t[0]);var b=t.length,m,x;if(!r||y!==p.POLYGON&&null!==y){if(a&&(y===p.POLYGON||null===y)){for(this.drawingContext.beginPath(),m=0;m<b;m++)t[m].isVert?t[m].moveTo?this.drawingContext.moveTo(t[m][0],t[m][1]):this.drawingContext.lineTo(t[m][0],t[m][1]):this.drawingContext.bezierCurveTo(t[m][0],t[m][1],t[m][2],t[m][3],t[m][4],t[m][5]);this._doFillStrokeClose()}else if(s&&(y===p.POLYGON||null===y)){for(this.drawingContext.beginPath(),m=0;m<b;m++)t[m].isVert?t[m].moveTo?this.drawingContext.moveTo([0],t[m][1]):this.drawingContext.lineTo(t[m][0],t[m][1]):this.drawingContext.quadraticCurveTo(t[m][0],t[m][1],t[m][2],t[m][3]);this._doFillStrokeClose()}else if(y===p.POINTS)for(m=0;m<b;m++)_=t[m],this._doStroke&&this._pInst.stroke(_[6]),this._pInst.point(_[0],_[1]);else if(y===p.LINES)for(m=0;m+1<b;m+=2)_=t[m],this._doStroke&&this._pInst.stroke(t[m+1][6]),this._pInst.line(_[0],_[1],t[m+1][0],t[m+1][1]);else if(y===p.TRIANGLES)for(m=0;m+2<b;m+=3)_=t[m],this.drawingContext.beginPath(),this.drawingContext.moveTo(_[0],_[1]),this.drawingContext.lineTo(t[m+1][0],t[m+1][1]),this.drawingContext.lineTo(t[m+2][0],t[m+2][1]),this.drawingContext.closePath(),this._doFill&&(this._pInst.fill(t[m+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[m+2][6]),this.drawingContext.stroke());else if(y===p.TRIANGLE_STRIP)for(m=0;m+1<b;m++)_=t[m],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[m+1][0],t[m+1][1]),this.drawingContext.lineTo(_[0],_[1]),this._doStroke&&this._pInst.stroke(t[m+1][6]),this._doFill&&this._pInst.fill(t[m+1][5]),m+2<b&&(this.drawingContext.lineTo(t[m+2][0],t[m+2][1]),this._doStroke&&this._pInst.stroke(t[m+2][6]),this._doFill&&this._pInst.fill(t[m+2][5])),this._doFillStrokeClose();else if(y===p.TRIANGLE_FAN){if(2<b){for(this.drawingContext.beginPath(),m=2;m<b;m++)_=t[m],this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[m-1][0],t[m-1][1]),this.drawingContext.lineTo(_[0],_[1]),this.drawingContext.lineTo(t[0][0],t[0][1]),m<b-1&&(this._doFill&&_[5]!==t[m+1][5]||this._doStroke&&_[6]!==t[m+1][6])&&(this._doFill&&(this._pInst.fill(_[5]),this.drawingContext.fill(),this._pInst.fill(t[m+1][5])),this._doStroke&&(this._pInst.stroke(_[6]),this.drawingContext.stroke(),this._pInst.stroke(t[m+1][6])),this.drawingContext.closePath(),this.drawingContext.beginPath());this._doFillStrokeClose()}}else if(y===p.QUADS)for(m=0;m+3<b;m+=4){for(_=t[m],this.drawingContext.beginPath(),this.drawingContext.moveTo(_[0],_[1]),x=1;4>x;x++)this.drawingContext.lineTo(t[m+x][0],t[m+x][1]);this.drawingContext.lineTo(_[0],_[1]),this._doFill&&this._pInst.fill(t[m+3][5]),this._doStroke&&this._pInst.stroke(t[m+3][6]),this._doFillStrokeClose()}else if(y!==p.QUAD_STRIP){for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),m=1;m<b;m++)_=t[m],_.isVert&&(_.moveTo?this.drawingContext.moveTo(_[0],_[1]):this.drawingContext.lineTo(_[0],_[1]));this._doFillStrokeClose()}else if(3<b)for(m=0;m+1<b;m+=2)_=t[m],this.drawingContext.beginPath(),m+3<b?(this.drawingContext.moveTo(t[m+2][0],t[m+2][1]),this.drawingContext.lineTo(_[0],_[1]),this.drawingContext.lineTo(t[m+1][0],t[m+1][1]),this.drawingContext.lineTo(t[m+3][0],t[m+3][1]),this._doFill&&this._pInst.fill(t[m+3][5]),this._doStroke&&this._pInst.stroke(t[m+3][6])):(this.drawingContext.moveTo(_[0],_[1]),this.drawingContext.lineTo(t[m+1][0],t[m+1][1])),this._doFillStrokeClose();}else if(3<b){var v=[],n=1-this._curveTightness;for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),m=1;m+2<b;m++)_=t[m],v[0]=[_[0],_[1]],v[1]=[_[0]+(n*t[m+1][0]-n*t[m-1][0])/6,_[1]+(n*t[m+1][1]-n*t[m-1][1])/6],v[2]=[t[m+1][0]+(n*t[m][0]-n*t[m+2][0])/6,t[m+1][1]+(n*t[m][1]-n*t[m+2][1])/6],v[3]=[t[m+1][0],t[m+1][1]],this.drawingContext.bezierCurveTo(v[1][0],v[1][1],v[2][0],v[2][1],v[3][0],v[3][1]);h&&this.drawingContext.lineTo(t[m+1][0],t[m+1][1]),this._doFillStrokeClose()}return r=!1,a=!1,s=!1,u=!1,h&&t.pop(),this._pInst._pixelsDirty=!0,this},s.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!1),this},s.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.imageSmoothingEnabled=!0),this},s.Renderer2D.prototype.strokeCap=function(e){return e!==p.ROUND&&e!==p.SQUARE&&e!==p.PROJECT||(this.drawingContext.lineCap=e),this},s.Renderer2D.prototype.strokeJoin=function(e){return e!==p.ROUND&&e!==p.BEVEL&&e!==p.MITER||(this.drawingContext.lineJoin=e),this},s.Renderer2D.prototype.strokeWeight=function(e){return this.drawingContext.lineWidth=void 0===e||0===e?1e-4:e,this},s.Renderer2D.prototype._getFill=function(){return this._cachedFillStyle||(this._cachedFillStyle=this.drawingContext.fillStyle),this._cachedFillStyle},s.Renderer2D.prototype._setFill=function(e){e!==this._cachedFillStyle&&(this.drawingContext.fillStyle=e,this._cachedFillStyle=e)},s.Renderer2D.prototype._getStroke=function(){return this._cachedStrokeStyle||(this._cachedStrokeStyle=this.drawingContext.strokeStyle),this._cachedStrokeStyle},s.Renderer2D.prototype._setStroke=function(e){e!==this._cachedStrokeStyle&&(this.drawingContext.strokeStyle=e,this._cachedStrokeStyle=e)},s.Renderer2D.prototype.bezier=function(t,r,a,o,n,e,i,s){return this._pInst.beginShape(),this._pInst.vertex(t,r),this._pInst.bezierVertex(a,o,n,e,i,s),this._pInst.endShape(),this},s.Renderer2D.prototype.curve=function(t,r,a,o,n,e,i,s){return this._pInst.beginShape(),this._pInst.curveVertex(t,r),this._pInst.curveVertex(a,o),this._pInst.curveVertex(n,e),this._pInst.curveVertex(i,s),this._pInst.endShape(),this},s.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill(),this._doStroke&&this.drawingContext.stroke(),this.drawingContext.closePath(),this._pInst._pixelsDirty=!0},s.Renderer2D.prototype.applyMatrix=function(t,r,a,o,n,e){this.drawingContext.transform(t,r,a,o,n,e)},s.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this},s.Renderer2D.prototype.rotate=function(e){this.drawingContext.rotate(e)},s.Renderer2D.prototype.scale=function(e,t){return this.drawingContext.scale(e,t),this},s.Renderer2D.prototype.shearX=function(e){return this.drawingContext.transform(1,0,V(e),1,0,0),this},s.Renderer2D.prototype.shearY=function(e){return this.drawingContext.transform(1,V(e),0,1,0,0),this},s.Renderer2D.prototype.translate=function(e,t){return e instanceof s.Vector&&(t=e.y,e=e.x),this.drawingContext.translate(e,t),this},s.Renderer2D.prototype.text=function(e,t,r,a,o){var n;void 0!==a&&void 0!==o&&this.drawingContext.textBaseline===p.BASELINE&&(n=!0,this.drawingContext.textBaseline=p.TOP);var l=s.Renderer.prototype.text.apply(this,arguments);return n&&(this.drawingContext.textBaseline=p.BASELINE),l},s.Renderer2D.prototype._renderText=function(e,t,r,a,o){if(!(a>=o))return e.push(),this._isOpenType()?this._textFont._renderPath(t,r,a,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,r,a),this._doFill&&(this._fillSet||this._setFill(p._DEFAULT_TEXT_FILL),this.drawingContext.fillText(t,r,a))),e.pop(),this._pInst._pixelsDirty=!0,e},s.Renderer2D.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):this.drawingContext.measureText(e).width},s.Renderer2D.prototype._applyTextProperties=function(){var e=this._pInst,t;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),t=this._textFont,this._isOpenType()&&(t=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=(this._textStyle||"normal")+" "+(this._textSize||12)+"px "+(t||"sans-serif"),this.drawingContext.textAlign=this._textAlign,this.drawingContext.textBaseline=this._textBaseline===p.CENTER?p._CTX_MIDDLE:this._textBaseline,e},s.Renderer2D.prototype.push=function(){return this.drawingContext.save(),s.Renderer.prototype.push.apply(this)},s.Renderer2D.prototype.pop=function(e){this.drawingContext.restore(),this._cachedFillStyle=this.drawingContext.fillStyle,this._cachedStrokeStyle=this.drawingContext.strokeStyle,s.Renderer.prototype.pop.call(this,e)},r.exports=s.Renderer2D},{"../image/filters":42,"./constants":18,"./main":24,"./p5.Renderer":27}],29:[function(t,r){var o=t("./main"),n=t("./constants");t("./p5.Graphics"),t("./p5.Renderer2D"),t("../webgl/p5.RendererGL");var e="defaultCanvas0";o.prototype.createCanvas=function(t,r,a){o._validateParameters("createCanvas",arguments);var s=a||n.P2D,i;if(s===n.WEBGL){if(i=document.getElementById(e)){i.parentNode.removeChild(i);var l=this._renderer;this._elements=this._elements.filter(function(e){return e!==l})}i=document.createElement("canvas"),i.id=e,i.classList.add("p5Canvas")}else if(this._defaultGraphicsCreated)i=this.canvas;else{i=document.createElement("canvas");for(var p=0;document.getElementById("defaultCanvas"+p);)p++;e="defaultCanvas"+p,i.id=e,i.classList.add("p5Canvas")}return this._setupDone||(i.dataset.hidden=!0,i.style.visibility="hidden"),this._userNode?this._userNode.appendChild(i):document.body.appendChild(i),s===n.WEBGL?(this._setProperty("_renderer",new o.RendererGL(i,this,!0)),this._elements.push(this._renderer)):this._defaultGraphicsCreated||(this._setProperty("_renderer",new o.Renderer2D(i,this,!0)),this._defaultGraphicsCreated=!0,this._elements.push(this._renderer)),this._renderer.resize(t,r),this._renderer._applyDefaults(),this._renderer},o.prototype.resizeCanvas=function(t,r,a){if(o._validateParameters("resizeCanvas",arguments),this._renderer){var n={};for(var e in this.drawingContext){var i=this.drawingContext[e];"object"!=typeof i&&"function"!=typeof i&&(n[e]=i)}for(var s in this._renderer.resize(t,r),this.width=t,this.height=r,n)try{this.drawingContext[s]=n[s]}catch(e){}a||this.redraw()}},o.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)},o.prototype.createGraphics=function(e,t,r){return o._validateParameters("createGraphics",arguments),new o.Graphics(e,t,r,this)},o.prototype.blendMode=function(e){if(o._validateParameters("blendMode",arguments),e!==n.BLEND&&e!==n.DARKEST&&e!==n.LIGHTEST&&e!==n.DIFFERENCE&&e!==n.MULTIPLY&&e!==n.EXCLUSION&&e!==n.SCREEN&&e!==n.REPLACE&&e!==n.OVERLAY&&e!==n.HARD_LIGHT&&e!==n.SOFT_LIGHT&&e!==n.DODGE&&e!==n.BURN&&e!==n.ADD&&e!==n.NORMAL)throw new Error("Mode "+e+" not recognized.");this._renderer.blendMode(e)},r.exports=o},{"../webgl/p5.RendererGL":74,"./constants":18,"./main":24,"./p5.Graphics":26,"./p5.Renderer2D":28}],30:[function(t,r){var o=t("../main"),n=t("../constants"),s=t("../helpers");t("../error_helpers"),o.prototype.arc=function(e,t,r,a,p,d,u,m){if(o._validateParameters("arc",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;for(p=this._toRadians(p),d=this._toRadians(d);0>p;)p+=n.TWO_PI;for(;0>d;)d+=n.TWO_PI;void 0!==p&&void 0!==d&&(d.toFixed(10)===p.toFixed(10)||_(d-p)===n.TWO_PI?(p%=n.TWO_PI,d%=n.TWO_PI,p+=n.TWO_PI):_(d-p)>n.TWO_PI&&(p%=n.TWO_PI,d%=n.TWO_PI,d+=n.TWO_PI)),p<=n.HALF_PI?p=C(r/a*V(p)):p>n.HALF_PI&&p<=3*n.HALF_PI&&(p=C(r/a*V(p))+n.PI),d<=n.HALF_PI?d=C(r/a*V(d)):d>n.HALF_PI&&d<=3*n.HALF_PI&&(d=C(r/a*V(d))+n.PI),p>d&&(d+=n.TWO_PI),r=_(r),a=_(a);var y=s.modeAdjust(e,t,r,a,this._renderer._ellipseMode);return this._renderer.arc(y.x,y.y,y.w,y.h,p,d,u,m),this},o.prototype.ellipse=function(t,r,a,n,i){if(o._validateParameters("ellipse",arguments),!this._renderer._doStroke&&!this._renderer._doFill)return this;0>a&&(a=_(a)),void 0===n?n=a:0>n&&(n=_(n));var l=s.modeAdjust(t,r,a,n,this._renderer._ellipseMode);return this._renderer.ellipse([l.x,l.y,l.w,l.h,i]),this},o.prototype.line=function(){return o._validateParameters("line",arguments),this._renderer._doStroke&&this._renderer.line.apply(this._renderer,arguments),this},o.prototype.point=function(){return o._validateParameters("point",arguments),this._renderer._doStroke&&this._renderer.point.apply(this._renderer,arguments),this},o.prototype.quad=function(){return o._validateParameters("quad",arguments),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.quad.apply(this._renderer,arguments),this},o.prototype.rect=function(){var e=arguments;if(o._validateParameters("rect",arguments),this._renderer._doStroke||this._renderer._doFill){for(var t=s.modeAdjust(arguments[0],arguments[1],arguments[2],arguments[3],this._renderer._rectMode),r=[t.x,t.y,t.w,t.h],a=4;a<arguments.length;a++)r[a]=e[a];this._renderer.rect(r)}return this},o.prototype.triangle=function(){return o._validateParameters("triangle",arguments),(this._renderer._doStroke||this._renderer._doFill)&&this._renderer.triangle(arguments),this},r.exports=o},{"../constants":18,"../error_helpers":20,"../helpers":21,"../main":24}],31:[function(t,r){var o=t("../main"),n=t("../constants");o.prototype.ellipseMode=function(e){return o._validateParameters("ellipseMode",arguments),e!==n.CORNER&&e!==n.CORNERS&&e!==n.RADIUS&&e!==n.CENTER||(this._renderer._ellipseMode=e),this},o.prototype.noSmooth=function(){return this._renderer.noSmooth(),this},o.prototype.rectMode=function(e){return o._validateParameters("rectMode",arguments),e!==n.CORNER&&e!==n.CORNERS&&e!==n.RADIUS&&e!==n.CENTER||(this._renderer._rectMode=e),this},o.prototype.smooth=function(){return this._renderer.smooth(),this},o.prototype.strokeCap=function(e){return o._validateParameters("strokeCap",arguments),e!==n.ROUND&&e!==n.SQUARE&&e!==n.PROJECT||this._renderer.strokeCap(e),this},o.prototype.strokeJoin=function(e){return o._validateParameters("strokeJoin",arguments),e!==n.ROUND&&e!==n.BEVEL&&e!==n.MITER||this._renderer.strokeJoin(e),this},o.prototype.strokeWeight=function(e){return o._validateParameters("strokeWeight",arguments),this._renderer.strokeWeight(e),this},r.exports=o},{"../constants":18,"../main":24}],32:[function(e,t){var r=e("../main");e("../error_helpers"),r.prototype.bezier=function(){return r._validateParameters("bezier",arguments),this._renderer._doStroke||this._renderer._doFill?(this._renderer.bezier.apply(this._renderer,arguments),this):this},r.prototype.bezierDetail=function(e){return r._validateParameters("bezierDetail",arguments),this._bezierDetail=e,this},r.prototype.bezierPoint=function(t,a,o,n,e){r._validateParameters("bezierPoint",arguments);var i=1-e;return te(i,3)*t+3*te(i,2)*e*a+3*i*te(e,2)*o+te(e,3)*n},r.prototype.bezierTangent=function(t,a,o,n,e){r._validateParameters("bezierTangent",arguments);var i=1-e;return 3*n*te(e,2)-3*o*te(e,2)+6*o*i*e-6*a*i*e+3*a*te(i,2)-3*t*te(i,2)},r.prototype.curve=function(){return r._validateParameters("curve",arguments),this._renderer._doStroke&&this._renderer.curve.apply(this._renderer,arguments),this},r.prototype.curveDetail=function(e){return r._validateParameters("curveDetail",arguments),this._curveDetail=3>e?3:e,this},r.prototype.curveTightness=function(e){return r._validateParameters("curveTightness",arguments),this._renderer._curveTightness=e,this},r.prototype.curvePoint=function(t,a,o,n,e){r._validateParameters("curvePoint",arguments);var i=e*e*e,s=e*e;return t*(-.5*i+s-.5*e)+a*(1.5*i-2.5*s+1)+o*(-1.5*i+2*s+.5*e)+n*(.5*i-.5*s)},r.prototype.curveTangent=function(t,a,o,n,e){r._validateParameters("curveTangent",arguments);var i=e*e;return t*(-3*i/2+2*e-.5)+a*(9*i/2-5*e)+o*(-9*i/2+4*e+.5)+n*(3*i/2-e)},t.exports=r},{"../error_helpers":20,"../main":24}],33:[function(t,r){var o=t("../main"),n=t("../constants"),e=null,s=[],p=[],d=!1,c=!1,u=!1,y=!1,_=!0;o.prototype.beginContour=function(){return p=[],y=!0,this},o.prototype.beginShape=function(t){return o._validateParameters("beginShape",arguments),this._renderer.isP3D?this._renderer.beginShape.apply(this._renderer,arguments):(e=t===n.POINTS||t===n.LINES||t===n.TRIANGLES||t===n.TRIANGLE_FAN||t===n.TRIANGLE_STRIP||t===n.QUADS||t===n.QUAD_STRIP?t:null,s=[],p=[]),this},o.prototype.bezierVertex=function(){var e=arguments;if(o._validateParameters("bezierVertex",arguments),this._renderer.isP3D)this._renderer.bezierVertex.apply(this._renderer,arguments);else{if(0===s.length)throw"vertex() must be used once before calling bezierVertex()";d=!0;for(var t=[],r=0;r<arguments.length;r++)t[r]=e[r];t.isVert=!1,y?p.push(t):s.push(t)}return this},o.prototype.curveVertex=function(){return o._validateParameters("curveVertex",arguments),this._renderer.isP3D?this._renderer.curveVertex.apply(this._renderer,arguments):(c=!0,this.vertex(arguments[0],arguments[1])),this},o.prototype.endContour=function(){var e=p[0].slice();e.isVert=p[0].isVert,e.moveTo=!1,p.push(e),_&&(s.push(s[0]),_=!1);for(var t=0;t<p.length;t++)s.push(p[t]);return this},o.prototype.endShape=function(t){if(o._validateParameters("endShape",arguments),this._renderer.isP3D)this._renderer.endShape(t,c,d,u,y,e);else{if(0===s.length)return this;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;var r=t===n.CLOSE;r&&!y&&s.push(s[0]),this._renderer.endShape(t,s,c,d,u,y,e),c=!1,d=!1,u=!1,y=!1,_=!0,r&&s.pop()}return this},o.prototype.quadraticVertex=function(){var e=arguments;if(o._validateParameters("quadraticVertex",arguments),this._renderer.isP3D)this._renderer.quadraticVertex.apply(this._renderer,arguments);else{if(this._contourInited){var t={};return t.x=arguments[0],t.y=arguments[1],t.x3=arguments[2],t.y3=arguments[3],t.type=n.QUADRATIC,this._contourVertices.push(t),this}if(!(0<s.length))throw new Error("vertex() must be used once before calling quadraticVertex()");u=!0;for(var r=[],a=0;a<arguments.length;a++)r[a]=e[a];r.isVert=!1,y?p.push(r):s.push(r)}return this},o.prototype.vertex=function(e,t,r){if(this._renderer.isP3D)this._renderer.vertex.apply(this._renderer,arguments);else{var a=[];a.isVert=!0,a[0]=e,a[1]=t,a[2]=0,a[3]=0,a[4]=0,a[5]=this._renderer._getFill(),a[6]=this._renderer._getStroke(),r&&(a.moveTo=r),y?(0===p.length&&(a.moveTo=!0),p.push(a)):s.push(a)}return this},r.exports=o},{"../constants":18,"../main":24}],34:[function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),function(){"undefined"==typeof Uint8ClampedArray||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}(),function(){if(!Object.assign){var t=Object.keys,r=Object.defineProperty,a=function(e){return void 0!==e&&null!==e},o="function"==typeof Symbol&&"symbol"==typeof Symbol(),n=Object.prototype.propertyIsEnumerable,e=function(e){return function(t){return n.call(e,t)}},i=function(r){if(!a(r))throw new TypeError("target must be an object");var n=Object(r),s,l,p,d;for(s=1;s<arguments.length;++s)for(l=Object(arguments[s]),d=t(l),o&&Object.getOwnPropertySymbols&&d.push.apply(d,Object.getOwnPropertySymbols(l).filter(e(l))),p=0;p<d.length;++p)n[d[p]]=l[d[p]];return n};r(Object,"assign",{value:i,configurable:!0,enumerable:!1,writable:!0})}}()},{}],35:[function(e,t){var r=e("./main");r.prototype.noLoop=function(){this._loop=!1},r.prototype.loop=function(){this._loop=!0,this._draw()},r.prototype.push=function(){this._styles.push({props:{_colorMode:this._colorMode},renderer:this._renderer.push()})},r.prototype.pop=function(){var e=this._styles.pop();e?(this._renderer.pop(e.renderer),Object.assign(this,e.props)):console.warn("pop() was called without matching push()")},r.prototype.redraw=function(t){var r=parseInt(t);(isNaN(r)||1>r)&&(r=1);var o=this._isGlobal?window:this,a=o.setup,n=o.draw;if("function"==typeof n){void 0===a&&o.scale(o._pixelDensity,o._pixelDensity);for(var e=function(e){e.call(o)},i=0;i<r;i++)o.resetMatrix(),o._renderer.isP3D&&o._renderer._update(),o._setProperty("frameCount",o.frameCount+1),o._registeredMethods.pre.forEach(e),n(),o._registeredMethods.post.forEach(e)}},t.exports=r},{"./main":24}],36:[function(e,t){var r=e("./main");r.prototype.applyMatrix=function(t,r,a,o,n,e){return this._renderer.applyMatrix(t,r,a,o,n,e),this},r.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()")},r.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented")},r.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()")},r.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this},r.prototype.rotate=function(e,t){return r._validateParameters("rotate",arguments),this._renderer.rotate(this._toRadians(e),t),this},r.prototype.rotateX=function(e){return this._assert3d("rotateX"),r._validateParameters("rotateX",arguments),this._renderer.rotateX(this._toRadians(e)),this},r.prototype.rotateY=function(e){return this._assert3d("rotateY"),r._validateParameters("rotateY",arguments),this._renderer.rotateY(this._toRadians(e)),this},r.prototype.rotateZ=function(e){return this._assert3d("rotateZ"),r._validateParameters("rotateZ",arguments),this._renderer.rotateZ(this._toRadians(e)),this},r.prototype.scale=function(t,o,n){if(r._validateParameters("scale",arguments),t instanceof r.Vector){var i=t;t=i.x,o=i.y,n=i.z}else if(t instanceof Array){var e=t;t=e[0],o=e[1],n=e[2]||1}return isNaN(o)?o=n=t:isNaN(n)&&(n=1),this._renderer.scale.call(this._renderer,t,o,n),this},r.prototype.shearX=function(e){return r._validateParameters("shearX",arguments),this._renderer.shearX(this._toRadians(e)),this},r.prototype.shearY=function(e){return r._validateParameters("shearY",arguments),this._renderer.shearY(this._toRadians(e)),this},r.prototype.translate=function(e,t,a){return r._validateParameters("translate",arguments),this._renderer.isP3D?this._renderer.translate(e,t,a):this._renderer.translate(e,t),this},t.exports=r},{"./main":24}],37:[function(e,t){var r=e("../core/main");r.prototype.createStringDict=function(e,t){return r._validateParameters("createStringDict",arguments),new r.StringDict(e,t)},r.prototype.createNumberDict=function(e,t){return r._validateParameters("createNumberDict",arguments),new r.NumberDict(e,t)},r.TypedDict=function(e,t){return e instanceof Object?this.data=e:(this.data={},this.data[e]=t),this},r.TypedDict.prototype.size=function(){return Object.keys(this.data).length},r.TypedDict.prototype.hasKey=function(e){return this.data.hasOwnProperty(e)},r.TypedDict.prototype.get=function(e){return this.data.hasOwnProperty(e)?this.data[e]:void console.log(e+" does not exist in this Dictionary")},r.TypedDict.prototype.set=function(e,t){this._validate(t)?this.data[e]=t:console.log("Those values dont work for this dictionary type.")},r.TypedDict.prototype._addObj=function(e){for(var t in e)this.set(t,e[t])},r.TypedDict.prototype.create=function(e,t){e instanceof Object&&void 0===t?this._addObj(e):void 0===e?console.log("In order to create a new Dictionary entry you must pass an object or a key, value pair"):this.set(e,t)},r.TypedDict.prototype.clear=function(){this.data={}},r.TypedDict.prototype.remove=function(e){if(!this.data.hasOwnProperty(e))throw new Error(e+" does not exist in this Dictionary");delete this.data[e]},r.TypedDict.prototype.print=function(){for(var e in this.data)console.log("key:"+e+" value:"+this.data[e])},r.TypedDict.prototype.saveTable=function(t){var a="";for(var o in this.data)a+=o+","+this.data[o]+"\n";var n=new Blob([a],{type:"text/csv"});r.prototype.downloadFile(n,t||"mycsv","csv")},r.TypedDict.prototype.saveJSON=function(e,t){r.prototype.saveJSON(this.data,e,t)},r.TypedDict.prototype._validate=function(){return!0},r.StringDict=function(){r.TypedDict.apply(this,arguments)},r.StringDict.prototype=Object.create(r.TypedDict.prototype),r.StringDict.prototype._validate=function(e){return"string"==typeof e},r.NumberDict=function(){r.TypedDict.apply(this,arguments)},r.NumberDict.prototype=Object.create(r.TypedDict.prototype),r.NumberDict.prototype._validate=function(e){return"number"==typeof e},r.NumberDict.prototype.add=function(e,t){this.data.hasOwnProperty(e)?this.data[e]+=t:console.log("The key - "+e+" does not exist in this dictionary.")},r.NumberDict.prototype.sub=function(e,t){this.add(e,-t)},r.NumberDict.prototype.mult=function(e,t){this.data.hasOwnProperty(e)?this.data[e]*=t:console.log("The key - "+e+" does not exist in this dictionary.")},r.NumberDict.prototype.div=function(e,t){this.data.hasOwnProperty(e)?this.data[e]/=t:console.log("The key - "+e+" does not exist in this dictionary.")},r.NumberDict.prototype._valueTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to search for a minimum or maximum value on an empty NumberDict");if(1===Object.keys(this.data).length)return this.data[Object.keys(this.data)[0]];var t=this.data[Object.keys(this.data)[0]];for(var r in this.data)this.data[r]*e<t*e&&(t=this.data[r]);return t},r.NumberDict.prototype.minValue=function(){return this._valueTest(1)},r.NumberDict.prototype.maxValue=function(){return this._valueTest(-1)},r.NumberDict.prototype._keyTest=function(e){if(0===Object.keys(this.data).length)throw new Error("Unable to use minValue on an empty NumberDict");if(1===Object.keys(this.data).length)return Object.keys(this.data)[0];for(var t=Object.keys(this.data)[0],r=1;r<Object.keys(this.data).length;r++)Object.keys(this.data)[r]*e<t*e&&(t=Object.keys(this.data)[r]);return t},r.NumberDict.prototype.minKey=function(){return this._keyTest(1)},r.NumberDict.prototype.maxKey=function(){return this._keyTest(-1)},t.exports=r.TypedDict},{"../core/main":24}],38:[function(t,r){var s=t("../core/main");s.prototype.deviceOrientation=void 0,s.prototype.accelerationX=0,s.prototype.accelerationY=0,s.prototype.accelerationZ=0,s.prototype.pAccelerationX=0,s.prototype.pAccelerationY=0,s.prototype.pAccelerationZ=0,s.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX),this._setProperty("pAccelerationY",this.accelerationY),this._setProperty("pAccelerationZ",this.accelerationZ)},s.prototype.rotationX=0,s.prototype.rotationY=0,s.prototype.rotationZ=0,s.prototype.pRotationX=0,s.prototype.pRotationY=0,s.prototype.pRotationZ=0;var a=0,u=0,y=0,x="clockwise",v="clockwise",S="clockwise",T,C,E;s.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX),this._setProperty("pRotationY",this.rotationY),this._setProperty("pRotationZ",this.rotationZ)},s.prototype.turnAxis=void 0;var R=.5,p=30;s.prototype.setMoveThreshold=function(e){s._validateParameters("setMoveThreshold",arguments),R=e},s.prototype.setShakeThreshold=function(e){s._validateParameters("setShakeThreshold",arguments),p=e},s.prototype._ondeviceorientation=function(e){this._updatePRotations(),this._setProperty("rotationX",e.beta),this._setProperty("rotationY",e.gamma),this._setProperty("rotationZ",e.alpha),this._handleMotion()},s.prototype._ondevicemotion=function(e){this._updatePAccelerations(),this._setProperty("accelerationX",2*e.acceleration.x),this._setProperty("accelerationY",2*e.acceleration.y),this._setProperty("accelerationZ",2*e.acceleration.z),this._handleMotion()},s.prototype._handleMotion=function(){90===window.orientation||-90===window.orientation?this._setProperty("deviceOrientation","landscape"):0===window.orientation?this._setProperty("deviceOrientation","portrait"):void 0===window.orientation&&this._setProperty("deviceOrientation","undefined");var e=this.deviceMoved||window.deviceMoved;"function"==typeof e&&(_(this.accelerationX-this.pAccelerationX)>R||_(this.accelerationY-this.pAccelerationY)>R||_(this.accelerationZ-this.pAccelerationZ)>R)&&e();var o=this.deviceTurned||window.deviceTurned;if("function"==typeof o){var n=this.rotationX+180,i=this.pRotationX+180,l=a+180;0<n-i&&270>n-i||-270>n-i?x="clockwise":(0>n-i||270<n-i)&&(x="counter-clockwise"),x!==T&&(l=n),90<_(n-l)&&270>_(n-l)&&(l=n,this._setProperty("turnAxis","X"),o()),T=x,a=l-180;var d=this.rotationY+180,c=this.pRotationY+180,r=u+180;0<d-c&&270>d-c||-270>d-c?v="clockwise":(0>d-c||270<d-this.pRotationY)&&(v="counter-clockwise"),v!==C&&(r=d),90<_(d-r)&&270>_(d-r)&&(r=d,this._setProperty("turnAxis","Y"),o()),C=v,u=r-180,0<this.rotationZ-this.pRotationZ&&270>this.rotationZ-this.pRotationZ||-270>this.rotationZ-this.pRotationZ?S="clockwise":(0>this.rotationZ-this.pRotationZ||270<this.rotationZ-this.pRotationZ)&&(S="counter-clockwise"),S!==E&&(y=this.rotationZ),90<_(this.rotationZ-y)&&270>_(this.rotationZ-y)&&(y=this.rotationZ,this._setProperty("turnAxis","Z"),o()),E=S,this._setProperty("turnAxis",void 0)}var m=this.deviceShaken||window.deviceShaken;if("function"==typeof m){var t,h;null!==this.pAccelerationX&&(t=_(this.accelerationX-this.pAccelerationX),h=_(this.accelerationY-this.pAccelerationY)),t+h>p&&m()}},r.exports=s},{"../core/main":24}],39:[function(t,r){function o(){for(var t in e)if(e.hasOwnProperty(t)&&!0===e[t])return!0;return!1}var n=t("../core/main"),e={};n.prototype.isKeyPressed=!1,n.prototype.keyIsPressed=!1,n.prototype.key="",n.prototype.keyCode=0,n.prototype._onkeydown=function(t){if(!e[t.which]){this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",t.which),e[t.which]=!0,this._setProperty("key",t.key||oe(t.which)||t.which);var r=this.keyPressed||window.keyPressed;"function"!=typeof r||t.charCode||!1!==r(t)||t.preventDefault()}},n.prototype._onkeyup=function(t){var r=this.keyReleased||window.keyReleased;(e[t.which]=!1,o()||(this._setProperty("isKeyPressed",!1),this._setProperty("keyIsPressed",!1)),this._setProperty("_lastKeyCodeTyped",null),this._setProperty("key",t.key||oe(t.which)||t.which),this._setProperty("keyCode",t.which),"function"==typeof r)&&!1===r(t)&&t.preventDefault()},n.prototype._onkeypress=function(e){if(e.which!==this._lastKeyCodeTyped){this._setProperty("keyCode",e.which),this._setProperty("_lastKeyCodeTyped",e.which),this._setProperty("key",oe(e.which));var t=this.keyTyped||window.keyTyped;"function"==typeof t&&!1===t(e)&&e.preventDefault()}},n.prototype._onblur=function(){e={}},n.prototype.keyIsDown=function(t){return n._validateParameters("keyIsDown",arguments),e[t]},r.exports=n},{"../core/main":24}],40:[function(t,r){function o(t,r,a,o){o&&!o.clientX&&(o.touches?o=o.touches[0]:o.changedTouches&&(o=o.changedTouches[0]));var n=t.getBoundingClientRect(),e=t.scrollWidth/r,i=t.scrollHeight/a;return{x:(o.clientX-n.left)/e,y:(o.clientY-n.top)/i,winX:o.clientX,winY:o.clientY,id:o.identifier}}var a=t("../core/main"),e=t("../core/constants");a.prototype._hasMouseInteracted=!1,a.prototype.mouseX=0,a.prototype.mouseY=0,a.prototype.pmouseX=0,a.prototype.pmouseY=0,a.prototype.winMouseX=0,a.prototype.winMouseY=0,a.prototype.pwinMouseX=0,a.prototype.pwinMouseY=0,a.prototype.mouseButton=0,a.prototype.mouseIsPressed=!1,a.prototype._updateNextMouseCoords=function(e){if(null!==this._curElement&&(!e.touches||0<e.touches.length)){var t=o(this._curElement.elt,this.width,this.height,e);this._setProperty("mouseX",t.x),this._setProperty("mouseY",t.y),this._setProperty("winMouseX",t.winX),this._setProperty("winMouseY",t.winY)}this._hasMouseInteracted||(this._updateMouseCoords(),this._setProperty("_hasMouseInteracted",!0))},a.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX),this._setProperty("pmouseY",this.mouseY),this._setProperty("pwinMouseX",this.winMouseX),this._setProperty("pwinMouseY",this.winMouseY),this._setProperty("_pmouseWheelDeltaY",this._mouseWheelDeltaY)},a.prototype._setMouseButton=function(t){1===t.button?this._setProperty("mouseButton",e.CENTER):2===t.button?this._setProperty("mouseButton",e.RIGHT):this._setProperty("mouseButton",e.LEFT)},a.prototype._onmousemove=function(e){var t=this._isGlobal?window:this;this._updateNextMouseCoords(e),this.mouseIsPressed?"function"==typeof t.mouseDragged?!1===t.mouseDragged(e)&&e.preventDefault():"function"==typeof t.touchMoved&&!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseMoved&&!1===t.mouseMoved(e)&&e.preventDefault()},a.prototype._onmousedown=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._setMouseButton(e),this._updateNextMouseCoords(e),"function"==typeof t.mousePressed?!1===t.mousePressed(e)&&e.preventDefault():"function"==typeof t.touchStarted&&!1===t.touchStarted(e)&&e.preventDefault()},a.prototype._onmouseup=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!1),"function"==typeof t.mouseReleased?!1===t.mouseReleased(e)&&e.preventDefault():"function"==typeof t.touchEnded&&!1===t.touchEnded(e)&&e.preventDefault()},a.prototype._ondragend=a.prototype._onmouseup,a.prototype._ondragover=a.prototype._onmousemove,a.prototype._onclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.mouseClicked&&!1===t.mouseClicked(e)&&e.preventDefault()},a.prototype._ondblclick=function(e){var t=this._isGlobal?window:this;"function"==typeof t.doubleClicked&&!1===t.doubleClicked(e)&&e.preventDefault()},a.prototype._mouseWheelDeltaY=0,a.prototype._pmouseWheelDeltaY=0,a.prototype._onwheel=function(e){var t=this._isGlobal?window:this;(this._setProperty("_mouseWheelDeltaY",e.deltaY),"function"==typeof t.mouseWheel)&&(e.delta=e.deltaY,!1===t.mouseWheel(e)&&e.preventDefault())},r.exports=a},{"../core/constants":18,"../core/main":24}],41:[function(t,r){function o(t,r,a,o,n){n=n||0;var s=t.getBoundingClientRect(),l=t.scrollWidth/r,p=t.scrollHeight/a,d=o.touches[n]||o.changedTouches[n];return{x:(d.clientX-s.left)/l,y:(d.clientY-s.top)/p,winX:d.clientX,winY:d.clientY,id:d.identifier}}var a=t("../core/main");a.prototype.touches=[],a.prototype._updateTouchCoords=function(e){if(null!==this._curElement){for(var t=[],r=0;r<e.touches.length;r++)t[r]=o(this._curElement.elt,this.width,this.height,e,r);this._setProperty("touches",t)}},a.prototype._ontouchstart=function(e){var t=this._isGlobal?window:this;this._setProperty("mouseIsPressed",!0),this._updateTouchCoords(e),this._updateNextMouseCoords(e),this._updateMouseCoords(),"function"==typeof t.touchStarted?!1===t.touchStarted(e)&&e.preventDefault():"function"==typeof t.mousePressed&&!1===t.mousePressed(e)&&e.preventDefault()},a.prototype._ontouchmove=function(e){var t=this._isGlobal?window:this;this._updateTouchCoords(e),this._updateNextMouseCoords(e),"function"==typeof t.touchMoved?!1===t.touchMoved(e)&&e.preventDefault():"function"==typeof t.mouseDragged&&!1===t.mouseDragged(e)&&e.preventDefault()},a.prototype._ontouchend=function(e){this._setProperty("mouseIsPressed",!1),this._updateTouchCoords(e),this._updateNextMouseCoords(e);var t=this._isGlobal?window:this;"function"==typeof t.touchEnded?!1===t.touchEnded(e)&&e.preventDefault():"function"==typeof t.mouseReleased&&!1===t.mouseReleased(e)&&e.preventDefault()},r.exports=a},{"../core/main":24}],42:[function(t,r){function _(t){var r=0|3.5*t;if(r=1>r?1:248>r?r:248,R!==r){R=r,a=1+R<<1,s=new Int32Array(a),p=Array(a);for(var i=0;i<a;i++)p[i]=new Int32Array(256);for(var u=1,h=r-1,g,y,_,x;u<r;u++){s[r+u]=s[h]=y=h*h,_=p[r+u],x=p[h--];for(var v=0;256>v;v++)_[v]=x[v]=y*v}g=s[r]=r*r,_=p[r];for(var S=0;256>S;S++)_[S]=g*S}}function o(i,d){for(var h=T._toPixels(i),c=i.width,e=i.height,g=c*e,l=new Int32Array(g),m=0;m<g;m++)l[m]=T._getARGB(h,m);var f=new Int32Array(g),y=new Int32Array(g),b=new Int32Array(g),S=new Int32Array(g),L=0,P,I,M,k,A,U,O,B,N,V;_(d);var z,W,j,Y;for(W=0;W<e;W++){for(z=0;z<c;z++){if(k=M=I=A=P=0,0>(U=z-R))V=-U,U=0;else{if(U>=c)break;V=0}for(j=V;j<a&&!(U>=c);j++){var X=l[U+L];Y=p[j],A+=Y[(-16777216&X)>>>24],I+=Y[(16711680&X)>>16],M+=Y[(65280&X)>>8],k+=Y[255&X],P+=s[j],U++}O=L+z,f[O]=A/P,y[O]=I/P,b[O]=M/P,S[O]=k/P}L+=c}for(L=0,B=-R,N=B*c,W=0;W<e;W++){for(z=0;z<c;z++){if(k=M=I=A=P=0,0>B)V=O=-B,U=z;else{if(B>=e)break;V=0,O=B,U=z+N}for(j=V;j<a&&!(O>=e);j++)Y=p[j],A+=Y[f[U]],I+=Y[y[U]],M+=Y[b[U]],k+=Y[S[U]],P+=s[j],O++,U+=c;l[z+L]=A/P<<24|I/P<<16|M/P<<8|k/P}L+=c,N+=c,B++}T._setPixels(h,l)}var T={};T._toPixels=function(e){return e instanceof ImageData?e.data:e.getContext("2d").getImageData(0,0,e.width,e.height).data},T._getARGB=function(e,t){var r=4*t;return 4278190080&e[r+3]<<24|16711680&e[r]<<16|65280&e[r+1]<<8|255&e[r+2]},T._setPixels=function(t,r){for(var a=0,o=0,n=t.length;o<n;o++)a=4*o,t[a+0]=(16711680&r[o])>>>16,t[a+1]=(65280&r[o])>>>8,t[a+2]=255&r[o],t[a+3]=(4278190080&r[o])>>>24},T._toImageData=function(e){return e instanceof ImageData?e:e.getContext("2d").getImageData(0,0,e.width,e.height)},T._createImageData=function(e,t){return T._tmpCanvas=document.createElement("canvas"),T._tmpCtx=T._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(e,t)},T.apply=function(t,r,a){var o=t.getContext("2d"),n=o.getImageData(0,0,t.width,t.height),e=r(n,a);e instanceof ImageData?o.putImageData(e,0,0,0,0,t.width,t.height):o.putImageData(n,0,0,0,0,t.width,t.height)},T.threshold=function(t,r){var a=T._toPixels(t);void 0===r&&(r=.5);for(var o=S(255*r),n=0;n<a.length;n+=4){var s=a[n],l=a[n+1],i=a[n+2],p;p=.2126*s+.7152*l+.0722*i>=o?255:0,a[n]=a[n+1]=a[n+2]=p}},T.gray=function(t){for(var r=T._toPixels(t),a=0;a<r.length;a+=4){var o=r[a],n=r[a+1],e=r[a+2];r[a]=r[a+1]=r[a+2]=.2126*o+.7152*n+.0722*e}},T.opaque=function(e){for(var t=T._toPixels(e),r=0;r<t.length;r+=4)t[r+3]=255;return t},T.invert=function(e){for(var t=T._toPixels(e),r=0;r<t.length;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2]},T.posterize=function(t,r){var a=T._toPixels(t);if(2>r||255<r)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(var o=r-1,n=0;n<a.length;n+=4){var s=a[n],l=a[n+1],p=a[n+2];a[n]=255*(s*r>>8)/o,a[n+1]=255*(l*r>>8)/o,a[n+2]=255*(p*r>>8)/o}},T.dilate=function(y){for(var a=T._toPixels(y),t=0,f=a.length?a.length/4:0,_=new Int32Array(f),x,v,S,C,E,R,L,P,w,I,D,M,A,U,O,B,F;t<f;)for(x=t,v=t+y.width;t<v;)S=C=T._getARGB(a,t),L=t-1,R=t+1,P=t-y.width,w=t+y.width,L<x&&(L=t),R>=v&&(R=t),0>P&&(P=0),w>=f&&(w=t),M=T._getARGB(a,P),D=T._getARGB(a,L),A=T._getARGB(a,w),I=T._getARGB(a,R),E=77*(255&S>>16)+151*(255&S>>8)+28*(255&S),O=77*(255&D>>16)+151*(255&D>>8)+28*(255&D),U=77*(255&I>>16)+151*(255&I>>8)+28*(255&I),B=77*(255&M>>16)+151*(255&M>>8)+28*(255&M),F=77*(255&A>>16)+151*(255&A>>8)+28*(255&A),O>E&&(C=D,E=O),U>E&&(C=I,E=U),B>E&&(C=M,E=B),F>E&&(C=A,E=F),_[t++]=C;T._setPixels(a,_)},T.erode=function(y){for(var a=T._toPixels(y),t=0,f=a.length?a.length/4:0,_=new Int32Array(f),x,v,S,C,E,R,L,P,w,I,D,M,A,U,O,B,F;t<f;)for(x=t,v=t+y.width;t<v;)S=C=T._getARGB(a,t),L=t-1,R=t+1,P=t-y.width,w=t+y.width,L<x&&(L=t),R>=v&&(R=t),0>P&&(P=0),w>=f&&(w=t),M=T._getARGB(a,P),D=T._getARGB(a,L),A=T._getARGB(a,w),I=T._getARGB(a,R),E=77*(255&S>>16)+151*(255&S>>8)+28*(255&S),O=77*(255&D>>16)+151*(255&D>>8)+28*(255&D),U=77*(255&I>>16)+151*(255&I>>8)+28*(255&I),B=77*(255&M>>16)+151*(255&M>>8)+28*(255&M),F=77*(255&A>>16)+151*(255&A>>8)+28*(255&A),O<E&&(C=D,E=O),U<E&&(C=I,E=U),B<E&&(C=M,E=B),F<E&&(C=A,E=F),_[t++]=C;T._setPixels(a,_)};var R,a,s,p;T.blur=function(e,t){o(e,t)},r.exports=T},{}],43:[function(t,r){var o=t("../core/main"),n=[];o.prototype.createImage=function(e,t){return o._validateParameters("createImage",arguments),new o.Image(e,t)},o.prototype.saveCanvas=function(){o._validateParameters("saveCanvas",arguments);var t=[].slice.call(arguments),e,r,n;arguments[0]instanceof HTMLCanvasElement?(e=arguments[0],t.shift()):arguments[0]instanceof o.Element?(e=arguments[0].elt,t.shift()):e=this._curElement&&this._curElement.elt,1<=t.length&&(r=t[0]),2<=t.length&&(n=t[1]),n=n||o.prototype._checkFileExtension(r,n)[1]||"png";var i;switch(n){default:i="image/png";break;case"jpeg":case"jpg":i="image/jpeg";}e.toBlob(function(e){o.prototype.downloadFile(e,r,n)},i)},o.prototype.saveFrames=function(e,t,r,a,s){o._validateParameters("saveFrames",arguments);var p=r||3;p=o.prototype.constrain(p,0,15),p*=1e3;var d=a||15;d=o.prototype.constrain(d,0,22);var c=0,u=o.prototype._makeFrame,g=this._curElement.elt,l=setInterval(function(){u(e+c,t,g),c++},1e3/d);setTimeout(function(){if(clearInterval(l),s)s(n);else for(var e=0,t;e<n.length;e++)t=n[e],o.prototype.downloadFile(t.imageData,t.filename,t.ext);n=[]},p+.01)},o.prototype._makeFrame=function(e,t,r){var a=this?this._curElement.elt:r;var o;if(t)switch(t.toLowerCase()){case"png":o="image/png";break;case"jpeg":case"jpg":o="image/jpeg";break;default:o="image/png";}else t="png",o="image/png";var i=a.toDataURL(o);i=i.replace(o,"image/octet-stream");var s={};s.imageData=i,s.filename=e,s.ext=t,n.push(s)},r.exports=o},{"../core/main":24}],44:[function(t,r){function o(e,t){return 0<e&&e<t?e:t}var p=t("../core/main"),n=t("./filters"),e=t("../core/helpers"),i=t("../core/constants");t("../core/error_helpers"),p.prototype.loadImage=function(e,t,r){p._validateParameters("loadImage",arguments);var o=new Image,a=new p.Image(1,1,this),n=this;return o.onload=function(){a.width=a.canvas.width=o.width,a.height=a.canvas.height=o.height,a.drawingContext.drawImage(o,0,0),a.modified=!0,"function"==typeof t&&t(a),n._decrementPreload()},o.onerror=function(e){p._friendlyFileLoadError(0,o.src),"function"==typeof r&&r(e)},0!==e.indexOf("data:image/")&&(o.crossOrigin="Anonymous"),o.src=e,a},p.prototype.image=function(d,a,g,c,y,h,i,f,_){p._validateParameters("image",arguments);var l=d.width,b=d.height;d.elt&&d.elt.videoWidth&&!d.canvas&&(l=d.elt.videoWidth,b=d.elt.videoHeight);var S=c||l,T=y||b,r=h||0,C=i||0,E=f||l,R=_||b;E=o(E,l),R=o(R,b);var L=1;d.elt&&!d.canvas&&d.elt.style.width&&(L=d.elt.videoWidth&&!c?d.elt.videoWidth:d.elt.width,L/=parseInt(d.elt.style.width,10)),r*=L,C*=L,R*=L,E*=L;var P=e.modeAdjust(a,g,S,T,this._renderer._imageMode);this._renderer.image(d,r,C,E,R,P.x,P.y,P.w,P.h)},p.prototype.tint=function(){p._validateParameters("tint",arguments);var e=this.color.apply(this,arguments);this._renderer._tint=e.levels},p.prototype.noTint=function(){this._renderer._tint=null},p.prototype._getTintedImageCanvas=function(t){if(!t.canvas)return t;var r=n._toPixels(t.canvas),a=document.createElement("canvas");a.width=t.canvas.width,a.height=t.canvas.height;for(var o=a.getContext("2d"),s=o.createImageData(t.canvas.width,t.canvas.height),e=s.data,p=0;p<r.length;p+=4){var d=r[p],i=r[p+1],c=r[p+2],u=r[p+3];e[p]=d*this._renderer._tint[0]/255,e[p+1]=i*this._renderer._tint[1]/255,e[p+2]=c*this._renderer._tint[2]/255,e[p+3]=u*this._renderer._tint[3]/255}return o.putImageData(s,0,0),a},p.prototype.imageMode=function(e){p._validateParameters("imageMode",arguments),e!==i.CORNER&&e!==i.CORNERS&&e!==i.CENTER||(this._renderer._imageMode=e)},r.exports=p},{"../core/constants":18,"../core/error_helpers":20,"../core/helpers":21,"../core/main":24,"./filters":42}],45:[function(t,r){var o=t("../core/main"),n=t("./filters");o.Image=function(e,t){this.width=e,this.height=t,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.drawingContext=this.canvas.getContext("2d"),this._pixelDensity=1,this._modified=!1,this._pixelsDirty=!0,this.pixels=[]},o.Image.prototype._setProperty=function(e,t){this[e]=t,this.setModified(!0)},o.Image.prototype.loadPixels=function(){o.Renderer2D.prototype.loadPixels.call(this),this.setModified(!0)},o.Image.prototype.updatePixels=function(t,r,a,n){o.Renderer2D.prototype.updatePixels.call(this,t,r,a,n),this.setModified(!0)},o.Image.prototype.get=function(t,r,a,n){return o.Renderer2D.prototype.get.call(this,t,r,a,n)},o.Image.prototype.set=function(e,t,r){o.Renderer2D.prototype.set.call(this,e,t,r),this.setModified(!0)},o.Image.prototype.resize=function(e,t){0===e&&0===t?(e=this.canvas.width,t=this.canvas.height):0===e?e=this.canvas.width*t/this.canvas.height:0===t&&(t=this.canvas.height*e/this.canvas.width),e=S(e),t=S(t);var r=document.createElement("canvas");r.width=e,r.height=t,r.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,r.width,r.height),this.canvas.width=this.width=e,this.canvas.height=this.height=t,this.drawingContext.drawImage(r,0,0,e,t,0,0,e,t),0<this.pixels.length&&this.loadPixels(),this.setModified(!0),this._pixelsDirty=!0},o.Image.prototype.copy=function(){var t,r,n,s,l,p,d,u,m;if(9===arguments.length)t=arguments[0],r=arguments[1],n=arguments[2],s=arguments[3],l=arguments[4],p=arguments[5],d=arguments[6],u=arguments[7],m=arguments[8];else{if(8!==arguments.length)throw new Error("Signature not supported");t=this,r=arguments[0],n=arguments[1],s=arguments[2],l=arguments[3],p=arguments[4],d=arguments[5],u=arguments[6],m=arguments[7]}o.Renderer2D._copyHelper(this,t,r,n,s,l,p,d,u,m),this._pixelsDirty=!0},o.Image.prototype.mask=function(t){void 0===t&&(t=this);var r=this.drawingContext.globalCompositeOperation,n=1;t instanceof o.Renderer&&(n=t._pInst._pixelDensity);var i=[t,0,0,n*t.width,n*t.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in",o.Image.prototype.copy.apply(this,i),this.drawingContext.globalCompositeOperation=r,this.setModified(!0)},o.Image.prototype.filter=function(e,t){n.apply(this.canvas,n[e.toLowerCase()],t),this.setModified(!0)},o.Image.prototype.blend=function(){o.prototype.blend.apply(this,arguments),this.setModified(!0)},o.Image.prototype.setModified=function(e){this._modified=e},o.Image.prototype.isModified=function(){return this._modified},o.Image.prototype.save=function(e,t){o.prototype.saveCanvas(this.canvas,e,t)},r.exports=o.Image},{"../core/main":24,"./filters":42}],46:[function(t,r){var o=t("../core/main"),n=t("./filters");t("../color/p5.Color"),o.prototype.pixels=[],o.prototype.blend=function(){o._validateParameters("blend",arguments),this._renderer?this._renderer.blend.apply(this._renderer,arguments):o.Renderer2D.prototype.blend.apply(this,arguments)},o.prototype.copy=function(){o._validateParameters("copy",arguments),o.Renderer2D.prototype.copy.apply(this._renderer,arguments)},o.prototype.filter=function(e,t){o._validateParameters("filter",arguments),void 0===this.canvas?n.apply(this.elt,n[e.toLowerCase()],t):n.apply(this.canvas,n[e.toLowerCase()],t)},o.prototype.get=function(e,t,r,a){return this._renderer.get(e,t,r,a)},o.prototype.loadPixels=function(){o._validateParameters("loadPixels",arguments),this._renderer.loadPixels()},o.prototype.set=function(e,t,r){this._renderer.set(e,t,r)},o.prototype.updatePixels=function(t,r,a,n){o._validateParameters("updatePixels",arguments),0!==this.pixels.length&&this._renderer.updatePixels(t,r,a,n)},r.exports=o},{"../color/p5.Color":16,"../core/main":24,"./filters":42}],47:[function(t,r){function a(t,r){var a={};if(void 0===(r=r||[]))for(var o=0;o<t.length;o++)r[o.toString()]=o;for(var n=0;n<r.length;n++){var i=r[n],s=t[n];a[i]=s}return a}function o(e){var t=new u.XML,r=e.childNodes;if(r&&r.length){for(var a=0,n;a<r.length;a++)n=o(r[a]),t.addChild(n);t.setName(e.nodeName),t._setCont(e.textContent),t._setAttributes(e);for(var i=0;i<t.children.length;i++)t.children[i].parent=t;return t}return t.setName(e.nodeName),t._setCont(e.textContent),t._setAttributes(e),t}function l(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function n(e,t){t&&!0!==t&&"true"!==t||(t=""),e||(e="untitled");var r="";return e&&-1<e.indexOf(".")&&(r=e.split(".").pop()),t&&r!==t&&(r=t,e=e+"."+r),[e,r]}function e(e){document.body.removeChild(e.target)}var u=t("../core/main");t("whatwg-fetch"),t("es6-promise").polyfill();var i=t("fetch-jsonp");t("../core/error_helpers"),u.prototype.loadJSON=function(){var t=arguments;u._validateParameters("loadJSON",arguments);for(var r=arguments[0],o={},e="json",n=1,i,s,l,p;n<arguments.length;n++)p=t[n],"string"==typeof p?"jsonp"!=p&&"json"!=p||(e=p):"function"==typeof p?i?s=p:i=p:"object"==typeof p&&p.hasOwnProperty("jsonpCallback")&&(e="jsonp",l=p);var d=this;return this.httpDo(r,"GET",l,e,function(e){for(var t in e)o[t]=e[t];void 0!==i&&i(e),d._decrementPreload()},function(e){if(u._friendlyFileLoadError(5,r),!s)throw e;s(e)}),o},u.prototype.loadStrings=function(){var t=arguments;u._validateParameters("loadStrings",arguments);for(var r=[],o=1,n,i,s;o<arguments.length;o++)s=t[o],"function"==typeof s&&(void 0===n?n=s:void 0===i&&(i=s));var l=this;return u.prototype.httpDo.call(this,arguments[0],"GET","text",function(e){var t=e.replace(/\r\n/g,"\r").replace(/\n/g,"\r").split(/\r/);Array.prototype.push.apply(r,t),void 0!==n&&n(r),l._decrementPreload()},function(e){if(u._friendlyFileLoadError(3,arguments[0]),!i)throw e;i(e)}),r},u.prototype.loadTable=function(e){var t=arguments,o=!1,r=e.substring(e.lastIndexOf(".")+1,e.length),n=",",i=!1,d,s;"tsv"===r&&(n="\t");for(var p=1;p<arguments.length;p++)if("function"==typeof t[p])void 0===d?d=t[p]:void 0===s&&(s=t[p]);else if("string"==typeof t[p])if("header"===t[p]&&(o=!0),"csv"===t[p]){if(i)throw new Error("Cannot set multiple separator types.");n=",",i=!0}else if("tsv"===t[p]){if(i)throw new Error("Cannot set multiple separator types.");n="\t",i=!0}var _=new u.Table,l=this;return this.httpDo(e,"GET","table",function(i){for(var m={},e=0,h=1,g="\"",f="\r",b="\n",r=[],s=0,S=null,T=function(){m.currentState=e,m.token=""},v=function(){S.push(m.token),T()},C=function(){m.escaped=!1,S=[],T()},x=function(){m.currentState=4,r.push(S),S=null},y;;){if(null==(y=i[s++])){if(m.escaped)throw new Error("Unclosed quote in file.");if(S){v(),x();break}}if(null===S&&C(),m.currentState===e){if(y===g){m.escaped=!0,m.currentState=h;continue}m.currentState=h}if(!(m.currentState===h&&m.escaped))y===f?(i[s]===b&&s++,v(),x()):y===b?(v(),x()):y===n?v():m.currentState===h&&(m.token+=y);else if(y===g)i[s]===g?(m.token+=g,s++):(m.escaped=!1,m.currentState=2);else{if(y===f)continue;m.token+=y}}if(o)_.columns=r.shift();else for(p=0;p<r[0].length;p++)_.columns[p]="null";var E;for(p=0;p<r.length;p++)(1!==r[p].length||"undefined"!==r[p][0]&&""!==r[p][0])&&(E=new u.TableRow,E.arr=r[p],E.obj=a(r[p],_.columns),_.addRow(E));"function"==typeof d&&d(_),l._decrementPreload()},function(t){if(u._friendlyFileLoadError(2,e),!s)throw t;s(t)}),_},u.prototype.loadXML=function(){for(var t=arguments,r={},o=1,n,i,s;o<arguments.length;o++)s=t[o],"function"==typeof s&&(void 0===n?n=s:void 0===i&&(i=s));var l=this;return this.httpDo(arguments[0],"GET","xml",function(e){for(var t in e)r[t]=e[t];void 0!==n&&n(r),l._decrementPreload()},function(e){if(u._friendlyFileLoadError(1,arguments[0]),!i)throw e;i(e)}),r},u.prototype.loadBytes=function(t,r,a){var o={},n=this;return this.httpDo(t,"GET","arrayBuffer",function(e){o.bytes=new Uint8Array(e),"function"==typeof r&&r(o),n._decrementPreload()},function(e){if(u._friendlyFileLoadError(6,t),!a)throw e;a(e)}),o},u.prototype.httpGet=function(){u._validateParameters("httpGet",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"GET"),u.prototype.httpDo.apply(this,e)},u.prototype.httpPost=function(){u._validateParameters("httpPost",arguments);var e=Array.prototype.slice.call(arguments);return e.splice(1,0,"POST"),u.prototype.httpDo.apply(this,e)},u.prototype.httpDo=function(){for(var e=arguments,t={},g=0,y="text/plain",_=arguments.length-1,x,v,S,T,C;0<_&&"function"==typeof arguments[_];_--)g++;var E=arguments.length-g,m=arguments[0];if(2==E&&"string"==typeof m&&"object"==typeof arguments[1])T=new Request(m,arguments[1]),v=arguments[2],S=arguments[3];else{for(var n="GET",R=1,L,P;R<arguments.length;R++)if(P=e[R],"string"==typeof P)"GET"===P||"POST"===P||"PUT"===P||"DELETE"===P?n=P:"json"===P||"jsonp"===P||"binary"===P||"arrayBuffer"===P||"xml"===P||"text"===P||"table"===P?x=P:L=P;else if("number"==typeof P)L=P.toString();else if("object"!=typeof P)"function"==typeof P&&(v?S=P:v=P);else if(P.hasOwnProperty("jsonpCallback"))for(var w in P)t[w]=P[w];else L=JSON.stringify(P),y="application/json";T=new Request(m,{method:n,mode:"cors",body:L,headers:new Headers({"Content-Type":y})})}return x||(x=-1===m.indexOf("json")?-1===m.indexOf("xml")?"text":"xml":"json"),C="jsonp"===x?i(m,t):fetch(T),C=C.then(function(e){if(!e.ok){var t=new Error(e.body);throw t.status=e.status,t.ok=!1,t}var r=e.headers.get("content-length");switch(r&&64e6<r&&u._friendlyFileLoadError(7,m),x){case"json":case"jsonp":return e.json();case"binary":return e.blob();case"arrayBuffer":return e.arrayBuffer();case"xml":return e.text().then(function(e){return o(new DOMParser().parseFromString(e,"text/xml").documentElement)});default:return e.text();}}),C.then(v||function(){}),C.catch(S||console.error),C},window.URL=window.URL||window.webkitURL,u.prototype._pWriters=[],u.prototype.createWriter=function(e,t){var r;for(var a in u.prototype._pWriters)if(u.prototype._pWriters[a].name===e)return r=new u.PrintWriter(e+this.millis(),t),u.prototype._pWriters.push(r),r;return r=new u.PrintWriter(e,t),u.prototype._pWriters.push(r),r},u.PrintWriter=function(t,r){var a=this;this.name=t,this.content="",this.write=function(e){this.content+=e},this.print=function(e){this.content+=e+"\n"},this.clear=function(){this.content=""},this.close=function(){var o=[];for(var n in o.push(this.content),u.prototype.writeFile(o,t,r),u.prototype._pWriters)u.prototype._pWriters[n].name===this.name&&u.prototype._pWriters.splice(n,1);a.clear(),a={}}},u.prototype.save=function(){var t=arguments,r=this._curElement.elt;if(0===t.length)return void u.prototype.saveCanvas(r);if(t[0]instanceof u.Renderer||t[0]instanceof u.Graphics)return void u.prototype.saveCanvas(t[0].elt,t[1],t[2]);if(1===t.length&&"string"==typeof t[0])u.prototype.saveCanvas(r,t[0]);else switch(n(t[1],t[2])[1]){case"json":return void u.prototype.saveJSON(t[0],t[1],t[2]);case"txt":return void u.prototype.saveStrings(t[0],t[1],t[2]);default:t[0]instanceof Array?u.prototype.saveStrings(t[0],t[1],t[2]):t[0]instanceof u.Table?u.prototype.saveTable(t[0],t[1],t[2]):t[0]instanceof u.Image?u.prototype.saveCanvas(t[0].canvas,t[1]):t[0]instanceof u.SoundFile&&u.prototype.saveSound(t[0],t[1],t[2],t[3]);}},u.prototype.saveJSON=function(e,t,r){u._validateParameters("saveJSON",arguments);var a;a=r?JSON.stringify(e):JSON.stringify(e,void 0,2),this.saveStrings(a.split("\n"),t,"json")},u.prototype.saveJSONObject=u.prototype.saveJSON,u.prototype.saveJSONArray=u.prototype.saveJSON,u.prototype.saveStrings=function(t,r,a){u._validateParameters("saveStrings",arguments);for(var o=this.createWriter(r,a||"txt"),e=0;e<t.length;e++)t.length,o.print(t[e]);o.close(),o.clear()},u.prototype.saveTable=function(t,a,i){u._validateParameters("saveTable",arguments);var c=void 0===i?a.substring(a.lastIndexOf(".")+1,a.length):i;var d=this.createWriter(a,c),e=t.columns,g=",";if("tsv"===c&&(g="\t"),"html"!==c){if("0"!==e[0]){for(var y=0;y<e.length;y++)y<e.length-1?d.write(e[y]+g):d.write(e[y]);d.write("\n")}for(var f=0;f<t.rows.length;f++){var _;for(_=0;_<t.rows[f].arr.length;_++)_<t.rows[f].arr.length-1?d.write(t.rows[f].arr[_]+g):(t.rows.length,d.write(t.rows[f].arr[_]));d.write("\n")}}else{d.print("<html>"),d.print("<head>");var b="  <meta http-equiv=\"content-type\" content";if(b+="=\"text/html;charset=utf-8\" />",d.print(b),d.print("</head>"),d.print("<body>"),d.print("  <table>"),"0"!==e[0]){d.print("    <tr>");for(var x=0,v;x<e.length;x++)v=l(e[x]),d.print("      <td>"+v),d.print("      </td>");d.print("    </tr>")}for(var S=0;S<t.rows.length;S++){d.print("    <tr>");for(var T=0;T<t.columns.length;T++){var C=t.rows[S].getString(T),r=l(C);d.print("      <td>"+r),d.print("      </td>")}d.print("    </tr>")}d.print("  </table>"),d.print("</body>"),d.print("</html>")}d.close(),d.clear()},u.prototype.writeFile=function(t,r,a){var o="application/octet-stream";u.prototype._isSafari()&&(o="text/plain");var n=new Blob(t,{type:o});u.prototype.downloadFile(n,r,a)},u.prototype.downloadFile=function(r,a,o){var i=n(a,o),s=i[0];if(r instanceof Blob)return void t("file-saver").saveAs(r,s);var l=document.createElement("a");if(l.href=r,l.download=s,l.onclick=function(t){e(t),t.stopPropagation()},l.style.display="none",document.body.appendChild(l),u.prototype._isSafari()){var p="Hello, Safari user! To download this file...\n";p+="1. Go to File --> Save As.\n",p+="2. Choose \"Page Source\" as the Format.\n",p+="3. Name it with this extension: .\""+i[1]+"\"",alert(p)}l.click()},u.prototype._checkFileExtension=n,u.prototype._isSafari=function(){return 0<Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")},r.exports=u},{"../core/error_helpers":20,"../core/main":24,"es6-promise":4,"fetch-jsonp":5,"file-saver":6,"whatwg-fetch":12}],48:[function(e,t){var r=e("../core/main");r.Table=function(){this.columns=[],this.rows=[]},r.Table.prototype.addRow=function(e){var t=e||new r.TableRow;if(void 0===t.arr||void 0===t.obj)throw new Error("invalid TableRow: "+t);return t.table=this,this.rows.push(t),t},r.Table.prototype.removeRow=function(e){this.rows[e].table=null;var t=this.rows.splice(e+1,this.rows.length);this.rows.pop(),this.rows=this.rows.concat(t)},r.Table.prototype.getRow=function(e){return this.rows[e]},r.Table.prototype.getRows=function(){return this.rows},r.Table.prototype.findRow=function(e,t){if("string"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].obj[t]===e)return this.rows[r];}else for(var a=0;a<this.rows.length;a++)if(this.rows[a].arr[t]===e)return this.rows[a];return null},r.Table.prototype.findRows=function(t,r){var a=[];if("string"==typeof r)for(var o=0;o<this.rows.length;o++)this.rows[o].obj[r]===t&&a.push(this.rows[o]);else for(var n=0;n<this.rows.length;n++)this.rows[n].arr[r]===t&&a.push(this.rows[n]);return a},r.Table.prototype.matchRow=function(e,t){if("number"==typeof t){for(var r=0;r<this.rows.length;r++)if(this.rows[r].arr[t].match(e))return this.rows[r];}else for(var a=0;a<this.rows.length;a++)if(this.rows[a].obj[t].match(e))return this.rows[a];return null},r.Table.prototype.matchRows=function(t,r){var a=[];if("number"==typeof r)for(var o=0;o<this.rows.length;o++)this.rows[o].arr[r].match(t)&&a.push(this.rows[o]);else for(var n=0;n<this.rows.length;n++)this.rows[n].obj[r].match(t)&&a.push(this.rows[n]);return a},r.Table.prototype.getColumn=function(e){var t=[];if("string"==typeof e)for(var r=0;r<this.rows.length;r++)t.push(this.rows[r].obj[e]);else for(var a=0;a<this.rows.length;a++)t.push(this.rows[a].arr[e]);return t},r.Table.prototype.clearRows=function(){delete this.rows,this.rows=[]},r.Table.prototype.addColumn=function(e){this.columns.push(e||null)},r.Table.prototype.getColumnCount=function(){return this.columns.length},r.Table.prototype.getRowCount=function(){return this.rows.length},r.Table.prototype.removeTokens=function(t,r){for(var a=function(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},o=[],s=0;s<t.length;s++)o.push(a(t.charAt(s)));var p=new RegExp(o.join("|"),"g");if(void 0===r)for(var d=0;d<this.columns.length;d++)for(var c=0,u;c<this.rows.length;c++)u=this.rows[c].arr[d],u=u.replace(p,""),this.rows[c].arr[d]=u,this.rows[c].obj[this.columns[d]]=u;else if("string"==typeof r)for(var y=0,f;y<this.rows.length;y++){f=this.rows[y].obj[r],f=f.replace(p,""),this.rows[y].obj[r]=f;var _=this.columns.indexOf(r);this.rows[y].arr[_]=f}else for(var l=0,b;l<this.rows.length;l++)b=this.rows[l].arr[r],b=b.replace(p,""),this.rows[l].arr[r]=b,this.rows[l].obj[this.columns[r]]=b},r.Table.prototype.trim=function(t){var r=/ /g;if(void 0===t)for(var a=0;a<this.columns.length;a++)for(var o=0,n;o<this.rows.length;o++)n=this.rows[o].arr[a],n=n.replace(r,""),this.rows[o].arr[a]=n,this.rows[o].obj[this.columns[a]]=n;else if("string"==typeof t)for(var s=0,l;s<this.rows.length;s++){l=this.rows[s].obj[t],l=l.replace(r,""),this.rows[s].obj[t]=l;var p=this.columns.indexOf(t);this.rows[s].arr[p]=l}else for(var u=0,m;u<this.rows.length;u++)m=this.rows[u].arr[t],m=m.replace(r,""),this.rows[u].arr[t]=m,this.rows[u].obj[this.columns[t]]=m},r.Table.prototype.removeColumn=function(t){var r,a;"string"==typeof t?(r=t,a=this.columns.indexOf(t)):(a=t,r=this.columns[t]);var o=this.columns.splice(a+1,this.columns.length);this.columns.pop(),this.columns=this.columns.concat(o);for(var n=0;n<this.rows.length;n++){var i=this.rows[n].arr,s=i.splice(a+1,i.length);i.pop(),this.rows[n].arr=i.concat(s),delete this.rows[n].obj[r]}},r.Table.prototype.set=function(e,t,r){this.rows[e].set(t,r)},r.Table.prototype.setNum=function(e,t,r){this.rows[e].setNum(t,r)},r.Table.prototype.setString=function(e,t,r){this.rows[e].setString(t,r)},r.Table.prototype.get=function(e,t){return this.rows[e].get(t)},r.Table.prototype.getNum=function(e,t){return this.rows[e].getNum(t)},r.Table.prototype.getString=function(e,t){return this.rows[e].getString(t)},r.Table.prototype.getObject=function(t){for(var r={},a=0,o,n;a<this.rows.length;a++)if(o=this.rows[a].obj,"string"==typeof t){if(!(0<=this.columns.indexOf(t)))throw new Error("This table has no column named \""+t+"\"");n=o[t],r[n]=o}else r[a]=this.rows[a].obj;return r},r.Table.prototype.getArray=function(){for(var e=[],t=0;t<this.rows.length;t++)e.push(this.rows[t].arr);return e},t.exports=r},{"../core/main":24}],49:[function(e,t){var r=e("../core/main");r.TableRow=function(t,r){var a=[],o={};t&&(r=r||",",a=t.split(r));for(var n=0;n<a.length;n++){var i=n,s=a[n];o[i]=s}this.arr=a,this.obj=o,this.table=null},r.TableRow.prototype.set=function(e,t){if("string"==typeof e){var r=this.table.columns.indexOf(e);if(!(0<=r))throw new Error("This table has no column named \""+e+"\"");this.obj[e]=t,this.arr[r]=t}else{if(!(e<this.table.columns.length))throw new Error("Column #"+e+" is out of the range of this table");this.arr[e]=t;var a=this.table.columns[e];this.obj[a]=t}},r.TableRow.prototype.setNum=function(e,t){var r=parseFloat(t);this.set(e,r)},r.TableRow.prototype.setString=function(e,t){var r=t.toString();this.set(e,r)},r.TableRow.prototype.get=function(e){return"string"==typeof e?this.obj[e]:this.arr[e]},r.TableRow.prototype.getNum=function(e){var t;if(t="string"==typeof e?parseFloat(this.obj[e]):parseFloat(this.arr[e]),"NaN"===t.toString())throw"Error: "+this.obj[e]+" is NaN (Not a Number)";return t},r.TableRow.prototype.getString=function(e){return"string"==typeof e?this.obj[e].toString():this.arr[e].toString()},t.exports=r},{"../core/main":24}],50:[function(e,t){var r=e("../core/main");r.XML=function(){this.name=null,this.attributes={},this.children=[],this.parent=null,this.content=null},r.XML.prototype.getParent=function(){return this.parent},r.XML.prototype.getName=function(){return this.name},r.XML.prototype.setName=function(e){this.name=e},r.XML.prototype.hasChildren=function(){return 0<this.children.length},r.XML.prototype.listChildren=function(){return this.children.map(function(e){return e.name})},r.XML.prototype.getChildren=function(e){return e?this.children.filter(function(t){return t.name===e}):this.children},r.XML.prototype.getChild=function(e){if("string"!=typeof e)return this.children[e];for(var t=0,r;t<this.children.length;t++)if(r=this.children[t],r.name===e)return r},r.XML.prototype.addChild=function(e){e instanceof r.XML&&this.children.push(e)},r.XML.prototype.removeChild=function(e){var t=-1;if("string"==typeof e){for(var r=0;r<this.children.length;r++)if(this.children[r].name===e){t=r;break}}else t=e;-1!==t&&this.children.splice(t,1)},r.XML.prototype.getAttributeCount=function(){return Object.keys(this.attributes).length},r.XML.prototype.listAttributes=function(){return Object.keys(this.attributes)},r.XML.prototype.hasAttribute=function(e){return!!this.attributes[e]},r.XML.prototype.getNum=function(e,t){return+this.attributes[e]||t||0},r.XML.prototype.getString=function(e,t){return this.attributes[e]+""||t||null},r.XML.prototype.setAttribute=function(e,t){this.attributes[e]&&(this.attributes[e]=t)},r.XML.prototype.getContent=function(e){return this.content||e||null},r.XML.prototype.setContent=function(e){this.children.length||(this.content=e)},r.XML.prototype._setCont=function(e){var t;t=e,t=t.replace(/\s\s+/g,","),this.content=t},r.XML.prototype._setAttributes=function(t){var r={},a=t.attributes;if(a)for(var o=0,n;o<a.length;o++)n=a[o],r[n.nodeName]=n.nodeValue;this.attributes=r},t.exports=r},{"../core/main":24}],51:[function(t,r){function o(){var t=Math.hypot,r=arguments;if("function"==typeof t)return t.apply(null,arguments);for(var a=arguments.length,o=[],e=0,s=0,p;s<a;s++){if(p=r[s],(p=+p)==1/0||p===-1/0)return 1/0;p=_(p),p>e&&(e=p),o[s]=p}0===e&&(e=1);for(var d=0,c=0,u=0;u<a;u++){var y=o[u]/e,l=y*y-c,m=d+l;c=m-d-l,d=m}return Z(d)*e}var n=t("../core/main");n.prototype.abs=_,n.prototype.ceil=v,n.prototype.constrain=function(e,t,r){return n._validateParameters("constrain",arguments),T(U(e,r),t)},n.prototype.dist=function(){return n._validateParameters("dist",arguments),4===arguments.length?o(arguments[2]-arguments[0],arguments[3]-arguments[1]):6===arguments.length?o(arguments[3]-arguments[0],arguments[4]-arguments[1],arguments[5]-arguments[2]):void 0},n.prototype.exp=Math.exp,n.prototype.floor=S,n.prototype.lerp=function(e,t,r){return n._validateParameters("lerp",arguments),r*(t-e)+e},n.prototype.log=ee,n.prototype.mag=function(e,t){return n._validateParameters("mag",arguments),o(e,t)},n.prototype.map=function(e,t,r,a,o,i){n._validateParameters("map",arguments);var s=(e-t)/(r-t)*(o-a)+a;return i?a<o?this.constrain(s,a,o):this.constrain(s,o,a):s},n.prototype.max=function(){return n._validateParameters("max",arguments),arguments[0]instanceof Array?T.apply(null,arguments[0]):T.apply(null,arguments)},n.prototype.min=function(){return n._validateParameters("min",arguments),arguments[0]instanceof Array?U.apply(null,arguments[0]):U.apply(null,arguments)},n.prototype.norm=function(e,t,r){return n._validateParameters("norm",arguments),this.map(e,t,r,0,1)},n.prototype.pow=te,n.prototype.round=$,n.prototype.sq=function(e){return e*e},n.prototype.sqrt=Z,r.exports=n},{"../core/main":24}],52:[function(e,t){var r=e("../core/main");r.prototype.createVector=function(e,t,a){return this instanceof r?new r.Vector(this,arguments):new r.Vector(e,t,a)},t.exports=r},{"../core/main":24}],53:[function(t,r){var a=t("../core/main"),e=4,i=.5,h=function(e){return .5*(1-Y(e*X))},m;a.prototype.noise=function(l,d,g){if(d=d||0,g=g||0,null==m){m=Array(4096);for(var f=0;f<4096;f++)m[f]=Math.random()}0>l&&(l=-l),0>d&&(d=-d),0>g&&(g=-g);for(var _=S(l),T=S(d),C=S(g),E=l-_,R=d-T,L=g-C,P=0,I=.5,D=0,M,k,U,O,F,G;D<e;D++)G=_+(T<<4)+(C<<8),M=h(E),k=h(R),U=m[4095&G],U+=M*(m[4095&G+1]-U),O=m[4095&G+16],O+=M*(m[4095&G+16+1]-O),U+=k*(O-U),G+=256,O=m[4095&G],O+=M*(m[4095&G+1]-O),F=m[4095&G+16],F+=M*(m[4095&G+16+1]-F),O+=k*(F-O),U+=h(L)*(O-U),P+=U*I,I*=i,_<<=1,E*=2,T<<=1,R*=2,C<<=1,L*=2,1<=E&&(_++,E--),1<=R&&(T++,R--),1<=L&&(C++,L--);return P},a.prototype.noiseDetail=function(t,r){0<t&&(e=t),0<r&&(i=r)},a.prototype.noiseSeed=function(e){var t=function(){var e,t;return{setSeed:function(r){t=e=(null==r?Math.random()*4294967296:r)>>>0},getSeed:function(){return e},rand:function(){return(t=(1664525*t+1013904223)%4294967296)/4294967296}}}();t.setSeed(e),m=Array(4096);for(var r=0;r<4096;r++)m[r]=t.rand()},r.exports=a},{"../core/main":24}],54:[function(t,a){var o=t("../core/main"),n=t("../core/constants");o.Vector=function(){var e,t,r;arguments[0]instanceof o?(this.p5=arguments[0],e=arguments[1][0]||0,t=arguments[1][1]||0,r=arguments[1][2]||0):(e=arguments[0]||0,t=arguments[1]||0,r=arguments[2]||0),this.x=e,this.y=t,this.z=r},o.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"},o.Vector.prototype.set=function(e,t,r){return e instanceof o.Vector?(this.x=e.x||0,this.y=e.y||0,this.z=e.z||0,this):e instanceof Array?(this.x=e[0]||0,this.y=e[1]||0,this.z=e[2]||0,this):(this.x=e||0,this.y=t||0,this.z=r||0,this)},o.Vector.prototype.copy=function(){return this.p5?new o.Vector(this.p5,[this.x,this.y,this.z]):new o.Vector(this.x,this.y,this.z)},o.Vector.prototype.add=function(e,t,r){return e instanceof o.Vector?(this.x+=e.x||0,this.y+=e.y||0,this.z+=e.z||0,this):e instanceof Array?(this.x+=e[0]||0,this.y+=e[1]||0,this.z+=e[2]||0,this):(this.x+=e||0,this.y+=t||0,this.z+=r||0,this)},o.Vector.prototype.sub=function(e,t,r){return e instanceof o.Vector?(this.x-=e.x||0,this.y-=e.y||0,this.z-=e.z||0,this):e instanceof Array?(this.x-=e[0]||0,this.y-=e[1]||0,this.z-=e[2]||0,this):(this.x-=e||0,this.y-=t||0,this.z-=r||0,this)},o.Vector.prototype.mult=function(e){return"number"==typeof e&&isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this):(console.warn("p5.Vector.prototype.mult:","n is undefined or not a finite number"),this)},o.Vector.prototype.div=function(e){return"number"==typeof e&&isFinite(e)?0===e?(console.warn("p5.Vector.prototype.div:","divide by 0"),this):(this.x/=e,this.y/=e,this.z/=e,this):(console.warn("p5.Vector.prototype.div:","n is undefined or not a finite number"),this)},o.Vector.prototype.mag=function(){return Z(this.magSq())},o.Vector.prototype.magSq=function(){var e=this.x,t=this.y,r=this.z;return e*e+t*t+r*r},o.Vector.prototype.dot=function(e,t,r){return e instanceof o.Vector?this.dot(e.x,e.y,e.z):this.x*(e||0)+this.y*(t||0)+this.z*(r||0)},o.Vector.prototype.cross=function(t){var r=this.y*t.z-this.z*t.y,a=this.z*t.x-this.x*t.z,n=this.x*t.y-this.y*t.x;return this.p5?new o.Vector(this.p5,[r,a,n]):new o.Vector(r,a,n)},o.Vector.prototype.dist=function(e){return e.copy().sub(this).mag()},o.Vector.prototype.normalize=function(){var e=this.mag();return 0!==e&&this.mult(1/e),this},o.Vector.prototype.limit=function(e){var t=this.magSq();return t>e*e&&this.div(Z(t)).mult(e),this},o.Vector.prototype.setMag=function(e){return this.normalize().mult(e)},o.Vector.prototype.heading=function(){var e=x(this.y,this.x);return this.p5?this.p5._fromRadians(e):e},o.Vector.prototype.rotate=function(e){var t=this.heading()+e;this.p5&&(t=this.p5._toRadians(t));var r=this.mag();return this.x=Y(t)*r,this.y=W(t)*r,this},o.Vector.prototype.angleBetween=function(e){var t=this.dot(e)/(this.mag()*e.mag()),a=r(U(1,T(-1,t)));return this.p5?this.p5._fromRadians(a):a},o.Vector.prototype.lerp=function(t,r,a,n){return t instanceof o.Vector?this.lerp(t.x,t.y,t.z,r):(this.x+=(t-this.x)*n||0,this.y+=(r-this.y)*n||0,this.z+=(a-this.z)*n||0,this)},o.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]},o.Vector.prototype.equals=function(t,r,a){var n,i,s;return t instanceof o.Vector?(n=t.x||0,i=t.y||0,s=t.z||0):t instanceof Array?(n=t[0]||0,i=t[1]||0,s=t[2]||0):(n=t||0,i=r||0,s=a||0),this.x===n&&this.y===i&&this.z===s},o.Vector.fromAngle=function(e,t){return void 0===t&&(t=1),new o.Vector(t*Y(e),t*W(e),0)},o.Vector.fromAngles=function(t,r,a){void 0===a&&(a=1);var n=Y(r),e=W(r),i=Y(t),s=W(t);return new o.Vector(a*s*e,-a*i,a*s*n)},o.Vector.random2D=function(){return this.fromAngle(Math.random()*n.TWO_PI)},o.Vector.random3D=function(){var e=Math.random()*n.TWO_PI,t=2*Math.random()-1,r=Z(1-t*t),a=r*Y(e),i=r*W(e);return new o.Vector(a,i,t)},o.Vector.add=function(e,t,r){return r?r.set(e):r=e.copy(),r.add(t),r},o.Vector.sub=function(e,t,r){return r?r.set(e):r=e.copy(),r.sub(t),r},o.Vector.mult=function(e,t,r){return r?r.set(e):r=e.copy(),r.mult(t),r},o.Vector.div=function(e,t,r){return r?r.set(e):r=e.copy(),r.div(t),r},o.Vector.dot=function(e,t){return e.dot(t)},o.Vector.cross=function(e,t){return e.cross(t)},o.Vector.dist=function(e,t){return e.dist(t)},o.Vector.lerp=function(e,t,r,a){return a?a.set(e):a=e.copy(),a.lerp(t,r),a},o.Vector.mag=function(e){var t=e.x,r=e.y,a=e.z;return Z(t*t+r*r+a*a)},a.exports=o.Vector},{"../core/constants":18,"../core/main":24}],55:[function(t,r){var a=t("../core/main"),o=!1,n=!1,i=0,s=function(){var e,t;return{setSeed:function(r){t=e=(null==r?Math.random()*4294967296:r)>>>0},getSeed:function(){return e},rand:function(){return(t=(1664525*t+1013904223)%4294967296)/4294967296}}}();a.prototype.randomSeed=function(e){s.setSeed(e),o=!0,n=!1},a.prototype.random=function(e,t){var r;if(r=o?s.rand():Math.random(),void 0===e)return r;if(void 0===t)return e instanceof Array?e[S(r*e.length)]:r*e;if(e>t){var n=e;e=t,t=n}return r*(t-e)+e},a.prototype.randomGaussian=function(t,r){var a,o,s,l;if(n)a=i,n=!1;else{do o=this.random(2)-1,s=this.random(2)-1,l=o*o+s*s;while(1<=l);l=Z(-2*ee(l)/l),a=o*l,i=s*l,n=!0}return a*(r||1)+(t||0)},r.exports=a},{"../core/main":24}],56:[function(o,a){var n=o("../core/main"),i=o("../core/constants");n.prototype._angleMode=i.RADIANS,n.prototype.acos=function(e){return this._fromRadians(r(e))},n.prototype.asin=function(e){return this._fromRadians(t(e))},n.prototype.atan=function(e){return this._fromRadians(C(e))},n.prototype.atan2=function(e,t){return this._fromRadians(x(e,t))},n.prototype.cos=function(e){return Y(this._toRadians(e))},n.prototype.sin=function(e){return W(this._toRadians(e))},n.prototype.tan=function(e){return V(this._toRadians(e))},n.prototype.degrees=function(e){return e*i.RAD_TO_DEG},n.prototype.radians=function(e){return e*i.DEG_TO_RAD},n.prototype.angleMode=function(e){e!==i.DEGREES&&e!==i.RADIANS||(this._angleMode=e)},n.prototype._toRadians=function(e){return this._angleMode===i.DEGREES?e*i.DEG_TO_RAD:e},n.prototype._toDegrees=function(e){return this._angleMode===i.RADIANS?e*i.RAD_TO_DEG:e},n.prototype._fromRadians=function(e){return this._angleMode===i.DEGREES?e*i.RAD_TO_DEG:e},a.exports=n},{"../core/constants":18,"../core/main":24}],57:[function(e,t){var r=e("../core/main");r.prototype.textAlign=function(){return r._validateParameters("textAlign",arguments),this._renderer.textAlign.apply(this._renderer,arguments)},r.prototype.textLeading=function(){return r._validateParameters("textLeading",arguments),this._renderer.textLeading.apply(this._renderer,arguments)},r.prototype.textSize=function(){return r._validateParameters("textSize",arguments),this._renderer.textSize.apply(this._renderer,arguments)},r.prototype.textStyle=function(){return r._validateParameters("textStyle",arguments),this._renderer.textStyle.apply(this._renderer,arguments)},r.prototype.textWidth=function(e){return r._validateParameters("textWidth",arguments),0===e.length?0:this._renderer.textWidth.apply(this._renderer,arguments)},r.prototype.textAscent=function(){return r._validateParameters("textAscent",arguments),this._renderer.textAscent()},r.prototype.textDescent=function(){return r._validateParameters("textDescent",arguments),this._renderer.textDescent()},r.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()},t.exports=r},{"../core/main":24}],58:[function(t,r){var o=t("../core/main"),n=t("../core/constants"),i=t("opentype.js");t("../core/error_helpers"),o.prototype.loadFont=function(t,r,a){o._validateParameters("loadFont",arguments);var s=new o.Font(this),e=this;return i.load(t,function(p,d){if(p)return void 0===a?(o._friendlyFileLoadError(4,t),void console.error(p,t)):a(p);s.font=d,void 0!==r&&r(s),e._decrementPreload();var c=t.split("\\").pop().split("/").pop(),l=c.lastIndexOf("."),u=1>l?null:c.substr(l+1),n,m;-1<["ttf","otf","woff","woff2"].indexOf(u)&&(n=c.substr(0,l),m=document.createElement("style"),m.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+n+";\nsrc: url("+t+");\n}\n")),document.head.appendChild(m))}),s},o.prototype.text=function(){return o._validateParameters("text",arguments),this._renderer._doFill||this._renderer._doStroke?this._renderer.text.apply(this._renderer,arguments):this},o.prototype.textFont=function(e,t){if(o._validateParameters("textFont",arguments),arguments.length){if(!e)throw new Error("null font passed to textFont");return this._renderer._setProperty("_textFont",e),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*n._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this._renderer._textFont},r.exports=o},{"../core/constants":18,"../core/error_helpers":20,"../core/main":24,"opentype.js":10}],59:[function(c,a){function b(e,t){for(var r=C(t,{sampleFactor:.1,simplifyThreshold:0}),a=l(e,0,1),o=a/(a*r.sampleFactor),n=[],s=0;s<a;s+=o)n.push(l(e,s));return r.simplifyThreshold&&S(n,r.simplifyThreshold),n}function S(e,t){t=void 0===t?0:t;for(var r=0,a=e.length-1;3<e.length&&0<=a;--a)E(h(e,a-1),h(e,a),h(e,a+1),t)&&(e.splice(a%e.length,1),r++);return r}function d(t){for(var r=[],a=0,o;a<t.length;a++)"M"===t[a].type&&(o&&r.push(o),o=[]),o.push(e(t[a]));return r.push(o),r}function e(e){var t=[e.type];return"M"===e.type||"L"===e.type?t.push(e.x,e.y):"C"===e.type?t.push(e.x1,e.y1,e.x2,e.y2,e.x,e.y):"Q"===e.type&&t.push(e.x1,e.y1,e.x,e.y),t}function C(e,t){if("object"!=typeof e)e=t;else for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}function h(e,t){var r=e.length;return e[0>t?t%r+r:t%r]}function E(t,a,o,n){if(!n)return 0===R(t,a,o);void 0===E.tmpPoint1&&(E.tmpPoint1=[],E.tmpPoint2=[]);var s=E.tmpPoint1,e=E.tmpPoint2;s.x=a.x-t.x,s.y=a.y-t.y,e.x=o.x-a.x,e.y=o.y-a.y;var l=s.x*e.x+s.y*e.y,p=Z(s.x*s.x+s.y*s.y),d=Z(e.x*e.x+e.y*e.y);return r(l/(p*d))<n}function R(e,t,r){return(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1])}function L(o,a,p,c,d,e,u,g,h){var i=1-h,f=te(i,3),_=te(i,2),l=h*h,m=l*h,n=o+2*h*(p-o)+l*(d-2*p+o),b=a+2*h*(c-a)+l*(e-2*c+a),r=p+2*h*(d-p)+l*(u-2*d+p),s=c+2*h*(e-c)+l*(g-2*e+c),t=90-180*x(n-r,b-s)/X;return(n>r||b<s)&&(t+=180),{x:f*o+3*_*h*p+3*i*h*h*d+m*u,y:f*a+3*_*h*c+3*i*h*h*e+m*g,m:{x:n,y:b},n:{x:r,y:s},start:{x:i*o+h*p,y:i*a+h*c},end:{x:i*d+h*u,y:i*e+h*g},alpha:t}}function i(t,r,a,o,n,e,s,l,d){return null==d?p(t,r,a,o,n,e,s,l):L(t,r,a,o,n,e,s,l,u(t,r,a,o,n,e,s,l,d))}function l(t,r,s){t=m(t);for(var l=0,p=0,c=t.length,o,u,y,_,b;p<c;p++){if(y=t[p],"M"===y[0])o=+y[1],u=+y[2];else{if(_=i(o,u,y[1],y[2],y[3],y[4],y[5],y[6]),l+_>r&&!s)return b=i(o,u,y[1],y[2],y[3],y[4],y[5],y[6],r-l),{x:b.x,y:b.y,alpha:b.alpha};l+=_,o=+y[5],u=+y[6]}y.shift()+y}return b=s?l:L(o,u,y[0],y[1],y[2],y[3],y[4],y[5],1),b.alpha&&(b={x:b.x,y:b.y,alpha:b.alpha}),b}function P(t){var r=[],a=0,s=0,u=0,y=0,_=0;if(!t)return r;"M"===t[0][0]&&(a=+t[0][1],s=+t[0][2],u=a,y=s,_++,r[0]=["M",a,s]);for(var x=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),v=_,S=t.length,m,T,C;v<S;v++){if(r.push(T=[]),C=t[v],C[0]!==ae.toUpperCase.call(C[0]))switch(T[0]=ae.toUpperCase.call(C[0]),T[0]){case"A":T[1]=C[1],T[2]=C[2],T[3]=C[3],T[4]=C[4],T[5]=C[5],T[6]=+(C[6]+a),T[7]=+(C[7]+s);break;case"V":T[1]=+C[1]+s;break;case"H":T[1]=+C[1]+a;break;case"R":m=[a,s].concat(C.slice(1));for(var E=2,R=m.length;E<R;E++)m[E]=+m[E]+a,m[++E]=+m[E]+s;r.pop(),r=r.concat(g(m,x));break;case"M":u=+C[1]+a,y=+C[2]+s;break;default:for(E=1,R=C.length;E<R;E++)T[E]=+C[E]+(E%2?a:s);}else if("R"===C[0])m=[a,s].concat(C.slice(1)),r.pop(),r=r.concat(g(m,x)),T=["R"].concat(C.slice(-2));else for(var L=0,P=C.length;L<P;L++)T[L]=C[L];switch(T[0]){case"Z":a=u,s=y;break;case"H":a=T[1];break;case"V":s=T[1];break;case"M":u=T[T.length-2],y=T[T.length-1];break;default:a=T[T.length-2],s=T[T.length-1];}}return r}function m(t,a){var y=P(t),d=a&&P(a),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},f={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=[],h=[],i=function(t,r,i){var l,p;if(!t)return["C",r.x,r.y,r.x,r.y,r.x,r.y];switch(t[0]in{T:1,Q:1}||(r.qx=r.qy=null),t[0]){case"M":r.X=t[1],r.Y=t[2];break;case"A":t=["C"].concat(o.apply(0,[r.x,r.y].concat(t.slice(1))));break;case"S":"C"===i||"S"===i?(l=2*r.x-r.bx,p=2*r.y-r.by):(l=r.x,p=r.y),t=["C",l,p].concat(t.slice(1));break;case"T":"Q"===i||"T"===i?(r.qx=2*r.x-r.qx,r.qy=2*r.y-r.qy):(r.qx=r.x,r.qy=r.y),t=["C"].concat(s(r.x,r.y,r.qx,r.qy,t[1],t[2]));break;case"Q":r.qx=t[1],r.qy=t[2],t=["C"].concat(s(r.x,r.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(n(r.x,r.y,t[1],t[2]));break;case"H":t=["C"].concat(n(r.x,r.y,t[1],r.y));break;case"V":t=["C"].concat(n(r.x,r.y,r.x,t[1]));break;case"Z":t=["C"].concat(n(r.x,r.y,r.X,r.Y));}return t},_=function(e,t){if(7<e[t].length){e[t].shift();for(var r=e[t];r.length;)g[t]="A",d&&(h[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),S=T(y.length,d&&d.length||0)}},b=function(e,t,r,a,o){e&&t&&"M"===e[o][0]&&"M"!==t[o][0]&&(t.splice(o,0,["M",a.x,a.y]),r.bx=0,r.by=0,r.x=e[o][1],r.y=e[o][2],S=T(y.length,d&&d.length||0))},l="",x="",S;S=T(y.length,d&&d.length||0);for(var C=0;C<S;C++){y[C]&&(l=y[C][0]),"C"!==l&&(g[C]=l,C&&(x=g[C-1])),y[C]=i(y[C],e,x),"A"!==g[C]&&"C"===l&&(g[C]="C"),_(y,C),d&&(d[C]&&(l=d[C][0]),"C"!==l&&(h[C]=l,C&&(x=h[C-1])),d[C]=i(d[C],f,x),"A"!==h[C]&&"C"===l&&(h[C]="C"),_(d,C)),b(y,d,e,f,C),b(d,y,f,e,C);var E=y[C],r=d&&d[C],u=E.length,v=d&&r.length;e.x=E[u-2],e.y=E[u-1],e.bx=parseFloat(E[u-4])||e.x,e.by=parseFloat(E[u-3])||e.y,f.bx=d&&(parseFloat(r[v-4])||f.x),f.by=d&&(parseFloat(r[v-3])||f.y),f.x=d&&r[v-2],f.y=d&&r[v-1]}return d?[y,d]:y}function o(T,U,q,$,ee,e,f,g,te,re){var j=X,p=120*j/180,r=j/180*(+ee||0),s=[],ae=function(e,t,r){return{x:e*Y(r)-t*W(r),y:e*W(r)+t*Y(r)}},u,oe,ne,ie,se;if(re)u=re[0],oe=re[1],ne=re[2],ie=re[3];else{se=ae(T,U,-r),T=se.x,U=se.y,se=ae(g,te,-r),g=se.x,te=se.y;var le=(T-g)/2,v=(U-te)/2,w=le*le/(q*q)+v*v/($*$);1<w&&(w=Z(w),q*=w,$*=w);var pe=q*q,y=$*$,z=(e===f?-1:1)*Z(_((pe*y-pe*v*v-y*le*le)/(pe*v*v+y*le*le)));ne=z*q*v/$+(T+g)/2,ie=z*-$*le/q+(U+te)/2,u=t(((U-ie)/$).toFixed(9)),oe=t(((te-ie)/$).toFixed(9)),u=T<ne?j-u:u,oe=g<ne?j-oe:oe,0>u&&(u=2*j+u),0>oe&&(oe=2*j+oe),f&&u>oe&&(u-=2*j),!f&&oe>u&&(oe-=2*j)}var A=oe-u;if(_(A)>p){var de=oe,C=g,D=te;oe=u+p*(f&&oe>u?1:-1),g=ne+q*Y(oe),te=ie+$*W(oe),s=o(g,te,q,$,ee,0,f,C,D,[oe,de,ne,ie])}A=oe-u;var E=Y(u),F=W(u),G=Y(oe),H=W(oe),I=V(A/4),J=4/3*q*I,K=4/3*$*I,L=[T,U],M=[T+J*F,U-K*E],N=[g+J*H,te-K*G],O=[g,te];if(M[0]=2*L[0]-M[0],M[1]=2*L[1]-M[1],re)return[M,N,O].concat(s);s=[M,N,O].concat(s).join().split(",");for(var P=[],Q=0,ce=s.length;Q<ce;Q++)P[Q]=Q%2?ae(s[Q-1],s[Q],r).y:ae(s[Q],s[Q+1],r).x;return P}function g(t,r){for(var a=[],o=0,n=t.length,e;n-2*!r>o;o+=2)e=[{x:+t[o-2],y:+t[o-1]},{x:+t[o],y:+t[o+1]},{x:+t[o+2],y:+t[o+3]},{x:+t[o+4],y:+t[o+5]}],r?o?n-4==o?e[3]={x:+t[0],y:+t[1]}:n-2==o&&(e[2]={x:+t[0],y:+t[1]},e[3]={x:+t[2],y:+t[3]}):e[0]={x:+t[n-2],y:+t[n-1]}:n-4==o?e[3]=e[2]:o||(e[0]={x:+t[o],y:+t[o+1]}),a.push(["C",(-e[0].x+6*e[1].x+e[2].x)/6,(-e[0].y+6*e[1].y+e[2].y)/6,(e[1].x+6*e[2].x-e[3].x)/6,(e[1].y+6*e[2].y-e[3].y)/6,e[2].x,e[2].y]);return a}function n(e,t,r,a){return[e,t,r,a,r,a]}function s(t,r,a,o,n,e){var i=1/3,s=2/3;return[i*t+s*a,i*r+s*o,i*n+s*a,i*e+s*o,n,e]}function p(t,a,s,c,d,e,u,g,h){null==h&&(h=1),h=1<h?1:0>h?0:h;for(var y=h/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=0,_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],n=0;n<12;n++){var b=y*f[n]+y,p=v(b,t,s,d,u),x=v(b,a,c,e,g);l+=_[n]*Z(p*p+x*x)}return y*l}function u(t,r,a,o,n,e,s,d,c){if(!(0>c||p(t,r,a,o,n,e,s,d)<c)){var i=1/2,u=1-i,h;for(h=p(t,r,a,o,n,e,s,d,u);_(h-c)>.01;)i/=2,u+=(h<c?1:-1)*i,h=p(t,r,a,o,n,e,s,d,u);return u}}function v(t,r,a,o,n){return t*(t*(-3*r+9*a-9*o+3*n)+6*r-12*a+6*o)-3*r+3*a}function w(){for(var e=arguments,t="",r=arguments.length-1,o;0<=r;--r)o=e[r],t+=o===Object(o)?JSON.stringify(o):o;return t}var f=c("../core/main"),y=c("../core/constants");f.Font=function(e){this.parent=e,this.cache={},this.font=void 0},f.Font.prototype.list=function(){throw new Error("not yet implemented")},f.Font.prototype.textBounds=function(t,a,u,_,x){a=void 0===a?0:a,u=void 0===u?0:u,_=_||this.parent._renderer._textSize;var e=x&&x.renderer&&x.renderer._pInst||this.parent,f=e._renderer,g=f._textAlign||y.LEFT,h=f._textBaseline||y.BASELINE,i=w("textBounds",t,a,u,_,g,h),v=this.cache[i];if(!v){var S=[],C=[],r=this._scale(_),s,E,R,L,P;this.font.forEachGlyph(t,a,u,_,x,function(t,a,o){var n=t.getMetrics();S.push(a+n.xMin*r),S.push(a+n.xMax*r),C.push(o+-n.yMin*r),C.push(o+-n.yMax*r)}),s=U.apply(null,S),E=U.apply(null,C),R=T.apply(null,S),L=T.apply(null,C),v={x:s,y:E,h:L-E,w:R-s,advance:s-a},P=this._handleAlignment(f,t,v.x,v.y,v.w+v.advance),v.x=P.x,v.y=P.y,this.cache[w("textBounds",t,a,u,_,g,h)]=v}return v},f.Font.prototype.textToPoints=function(t,r,a,s,c){function u(e){return y[e].name&&"space"===y[e].name||t.length===y.length&&" "===t[e]||y[e].index&&3===y[e].index}var h=0,g=[],y=this._getGlyphs(t);s=s||this.parent._renderer._textSize;for(var f=0;f<y.length;f++){if(!u(f))for(var _=y[f].getPath(r,a,s),m=d(_.commands),n=0;n<m.length;n++)for(var x=b(m[n],c),p=0;p<x.length;p++)x[p].x+=h,g.push(x[p]);h+=y[f].advanceWidth*this._scale(s)}return g},f.Font.prototype._getGlyphs=function(e){return this.font.stringToGlyphs(e)},f.Font.prototype._getPath=function(t,r,a,o){var n=o&&o.renderer&&o.renderer._pInst||this.parent,e=n._renderer,i=this._handleAlignment(e,t,r,a);return this.font.getPath(t,i.x,i.y,e._textSize,o)},f.Font.prototype._getPathData=function(t,r,o,n){var i=3;return"string"==typeof t&&2<arguments.length?t=this._getPath(t,r,o,n):"object"==typeof r&&(n=r),n&&"number"==typeof n.decimals&&(i=n.decimals),t.toPathData(i)},f.Font.prototype._getSVG=function(t,r,o,n){var i=3;return"string"==typeof t&&2<arguments.length?t=this._getPath(t,r,o,n):"object"==typeof r&&(n=r),n&&("number"==typeof n.decimals&&(i=n.decimals),"number"==typeof n.strokeWidth&&(t.strokeWidth=n.strokeWidth),void 0!==n.fill&&(t.fill=n.fill),void 0!==n.stroke&&(t.stroke=n.stroke)),t.toSVG(i)},f.Font.prototype._renderPath=function(t,r,a,o){var n=o&&o.renderer||this.parent._renderer,s=n.drawingContext,l;l="object"==typeof t&&t.commands?t.commands:this._getPath(t,r,a,o).commands,s.beginPath();for(var p=0,d;p<l.length;p+=1)d=l[p],"M"===d.type?s.moveTo(d.x,d.y):"L"===d.type?s.lineTo(d.x,d.y):"C"===d.type?s.bezierCurveTo(d.x1,d.y1,d.x2,d.y2,d.x,d.y):"Q"===d.type?s.quadraticCurveTo(d.x1,d.y1,d.x,d.y):"Z"===d.type&&s.closePath();return n._doStroke&&n._strokeSet&&s.stroke(),n._doFill&&(n._fillSet||n._setFill(y._DEFAULT_TEXT_FILL),s.fill()),this},f.Font.prototype._textWidth=function(e,t){return this.font.getAdvanceWidth(e,t)},f.Font.prototype._textAscent=function(e){return this.font.ascender*this._scale(e)},f.Font.prototype._textDescent=function(e){return-this.font.descender*this._scale(e)},f.Font.prototype._scale=function(e){return 1/this.font.unitsPerEm*(e||this.parent._renderer._textSize)},f.Font.prototype._handleAlignment=function(t,r,a,o,n){var i=t._textSize;switch(void 0===n&&(n=this._textWidth(r,i)),t._textAlign){case y.CENTER:a-=n/2;break;case y.RIGHT:a-=n;}switch(t._textBaseline){case y.TOP:o+=this._textAscent(i);break;case y.CENTER:o+=this._textAscent(i)/2;break;case y.BOTTOM:o-=this._textDescent(i);}return{x:a,y:o}},a.exports=f},{"../core/constants":18,"../core/main":24}],60:[function(e,t){var r=e("../core/main");r.prototype.append=function(e,t){return e.push(t),e},r.prototype.arrayCopy=function(t,r,o,n,i){var e,s;void 0===i?(void 0===o?s=t.length:(s=o,s=U(s,t.length)),e=0,o=r,t=t.slice(0,s)):(s=U(i,t.length),e=n,t=t.slice(r,s+r)),Array.prototype.splice.apply(o,[e,s].concat(t))},r.prototype.concat=function(e,t){return e.concat(t)},r.prototype.reverse=function(e){return e.reverse()},r.prototype.shorten=function(e){return e.pop(),e},r.prototype.shuffle=function(t,r){var o=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t);t=r||o?t:t.slice();for(var n=t.length,i,s;1<n;)i=0|Math.random()*n,s=t[--n],t[n]=t[i],t[i]=s;return t},r.prototype.sort=function(e,t){var r=t?e.slice(0,U(t,e.length)):e,a=t?e.slice(U(t,e.length)):[];return r="string"==typeof r[0]?r.sort():r.sort(function(e,t){return e-t}),r.concat(a)},r.prototype.splice=function(e,t,r){return Array.prototype.splice.apply(e,[r,0].concat(t)),e},r.prototype.subset=function(e,t,r){return void 0===r?e.slice(t,e.length):e.slice(t,t+r)},t.exports=r},{"../core/main":24}],61:[function(e,t){var r=e("../core/main");r.prototype.float=function(e){return e instanceof Array?e.map(parseFloat):parseFloat(e)},r.prototype.int=function(e,t){return t=t||10,"string"==typeof e?parseInt(e,t):"number"==typeof e?0|e:"boolean"==typeof e?e?1:0:e instanceof Array?e.map(function(e){return r.prototype.int(e,t)}):void 0},r.prototype.str=function(e){return e instanceof Array?e.map(r.prototype.str):e+""},r.prototype.boolean=function(e){return"number"==typeof e?0!=e:"string"==typeof e?"true"===e.toLowerCase():"boolean"==typeof e?e:e instanceof Array?e.map(r.prototype.boolean):void 0},r.prototype.byte=function(e){var t=r.prototype.int(e,10);return"number"==typeof t?(t+128)%256-128:t instanceof Array?t.map(r.prototype.byte):void 0},r.prototype.char=function(e){return"number"!=typeof e||isNaN(e)?e instanceof Array?e.map(r.prototype.char):"string"==typeof e?r.prototype.char(parseInt(e,10)):void 0:oe(e)},r.prototype.unchar=function(e){return"string"==typeof e&&1===e.length?e.charCodeAt(0):e instanceof Array?e.map(r.prototype.unchar):void 0},r.prototype.hex=function(e,t){if(t=void 0===t||null===t?t=8:t,e instanceof Array)return e.map(function(e){return r.prototype.hex(e,t)});if("number"==typeof e){0>e&&(e=4294967295+e+1);for(var o=(+e).toString(16).toUpperCase();o.length<t;)o="0"+o;return o.length>=t&&(o=o.substring(o.length-t,o.length)),o}},r.prototype.unhex=function(e){return e instanceof Array?e.map(r.prototype.unhex):parseInt("0x"+e,16)},t.exports=r},{"../core/main":24}],62:[function(t,r){function o(t,r,a){var o=0>t,n=o?t.toString().substring(1):t.toString(),e=n.indexOf("."),s=-1===e?n:n.substring(0,e),p=-1===e?"":n.substring(e+1),d=o?"-":"";if(void 0!==a){var c="";(-1!==e||0<a-p.length)&&(c="."),p.length>a&&(p=p.substring(0,a));for(var u=0;u<r-s.length;u++)d+="0";d+=s,d+=c,d+=p;for(var g=0;g<a-p.length;g++)d+="0";return d}for(var y=0;y<T(r-s.length,0);y++)d+="0";return d+=n}function n(t,r){t=t.toString();var o=t.indexOf("."),n=-1===o?"":t.substring(o),i=-1===o?t:t.substring(0,o);if(i=i.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),0===r)n="";else if(void 0!==r)if(r>n.length){n+=-1===o?".":"";for(var s=r-n.length+1,l=0;l<s;l++)n+="0"}else n=n.substring(0,r+1);return i+n}function e(e){return 0<parseFloat(e)?"+"+e.toString():e.toString()}function i(e){return 0<parseFloat(e)?" "+e.toString():e.toString()}var s=t("../core/main");t("../core/error_helpers"),s.prototype.join=function(e,t){return s._validateParameters("join",arguments),e.join(t)},s.prototype.match=function(e,t){return s._validateParameters("match",arguments),e.match(t)},s.prototype.matchAll=function(t,r){s._validateParameters("matchAll",arguments);for(var a=new RegExp(r,"g"),o=a.exec(t),n=[];null!==o;)n.push(o),o=a.exec(t);return n},s.prototype.nf=function(e,t,r){return s._validateParameters("nf",arguments),e instanceof Array?e.map(function(e){return o(e,t,r)}):"[object Arguments]"===Object.prototype.toString.call(e)?3===e.length?this.nf(e[0],e[1],e[2]):2===e.length?this.nf(e[0],e[1]):this.nf(e[0]):o(e,t,r)},s.prototype.nfc=function(e,t){return s._validateParameters("nfc",arguments),e instanceof Array?e.map(function(e){return n(e,t)}):n(e,t)},s.prototype.nfp=function(){s._validateParameters("nfp",arguments);var t=s.prototype.nf.apply(this,arguments);return t instanceof Array?t.map(e):e(t)},s.prototype.nfs=function(){s._validateParameters("nfs",arguments);var e=s.prototype.nf.apply(this,arguments);return e instanceof Array?e.map(i):i(e)},s.prototype.split=function(e,t){return s._validateParameters("split",arguments),e.split(t)},s.prototype.splitTokens=function(t,r){s._validateParameters("splitTokens",arguments);var a;if(void 0!==r){var o=r,n=/\]/g.exec(o),e=/\[/g.exec(o);e&&n?(o=o.slice(0,n.index)+o.slice(n.index+1),e=/\[/g.exec(o),o=o.slice(0,e.index)+o.slice(e.index+1),a=new RegExp("[\\["+o+"\\]]","g")):n?(o=o.slice(0,n.index)+o.slice(n.index+1),a=new RegExp("["+o+"\\]]","g")):e?(o=o.slice(0,e.index)+o.slice(e.index+1),a=new RegExp("["+o+"\\[]","g")):a=new RegExp("["+o+"]","g")}else a=/\s/g;return t.split(a).filter(function(e){return e})},s.prototype.trim=function(e){return s._validateParameters("trim",arguments),e instanceof Array?e.map(this.trim):e.trim()},r.exports=s},{"../core/error_helpers":20,"../core/main":24}],63:[function(e,t){var r=e("../core/main");r.prototype.day=function(){return new Date().getDate()},r.prototype.hour=function(){return new Date().getHours()},r.prototype.minute=function(){return new Date().getMinutes()},r.prototype.millis=function(){return window.performance.now()},r.prototype.month=function(){return new Date().getMonth()+1},r.prototype.second=function(){return new Date().getSeconds()},r.prototype.year=function(){return new Date().getFullYear()},t.exports=r},{"../core/main":24}],64:[function(t,r){var p=t("../core/main");t("./p5.Geometry");var s=t("../core/constants");p.prototype.plane=function(t,r,o,n){this._assert3d("plane"),p._validateParameters("plane",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=1),void 0===n&&(n=1);var i="plane|"+o+"|"+n;if(!this._renderer.geometryInHash(i)){var s=function(){for(var t=0,r,o,n;t<=this.detailY;t++){o=t/this.detailY;for(var i=0;i<=this.detailX;i++)r=i/this.detailX,n=new p.Vector(r-.5,o-.5,0),this.vertices.push(n),this.uvs.push(r,o)}},l=new p.Geometry(o,n,s);l.computeFaces().computeNormals(),1>=o&&1>=n?l._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw stroke on plane objects with more than 1 detailX or 1 detailY"),this._renderer.createBuffers(i,l)}return this._renderer.drawBuffersScaled(i,t,r,1),this},p.prototype.box=function(t,r,o,n,s){this._assert3d("box"),p._validateParameters("box",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=r);var l=this._renderer.attributes&&this._renderer.attributes.perPixelLighting;void 0===n&&(n=l?1:4),void 0===s&&(s=l?1:4);var d="box|"+n+"|"+s;if(!this._renderer.geometryInHash(d)){var u=function(){var t=[[0,4,2,6],[1,3,5,7],[0,1,4,5],[2,6,3,7],[0,2,1,3],[4,5,6,7]];this.strokeIndices=[[0,1],[1,3],[3,2],[6,7],[8,9],[9,11],[14,15],[16,17],[17,19],[18,19],[20,21],[22,23]];for(var r=0;r<t.length;r++){for(var a=t[r],o=4*r,e=0;4>e;e++){var n=a[e],i=new p.Vector((2*(1&n)-1)/2,((2&n)-1)/2,((4&n)/2-1)/2);this.vertices.push(i),this.uvs.push(1&e,(2&e)/2)}this.faces.push([o,o+1,o+2]),this.faces.push([o+2,o+1,o+3])}},i=new p.Geometry(n,s,u);i.computeNormals(),4>=n&&4>=s?i._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw stroke on box objects with more than 4 detailX or 4 detailY"),this._renderer.createBuffers(d,i)}return this._renderer.drawBuffersScaled(d,t,r,o),this},p.prototype.sphere=function(e,t,r){return this._assert3d("sphere"),p._validateParameters("sphere",arguments),void 0===e&&(e=50),void 0===t&&(t=24),void 0===r&&(r=16),this.ellipsoid(e,e,e,t,r),this};var a=function(d,y,_,S,T,C,E){d=0>=d?1:d,y=0>y?0:y,_=0>=_?d:_,S=3>S?3:S,T=1>T?1:T,C=void 0===C||C,E=void 0===E?0!==y:E;var R=C?-2:0,n=T+(E?2:0),o={},L=x(d-y,_),P,w,I,D,M;for(P=R;P<=n;++P){var A=P/T,U=_*A,O;for(0>P?(U=0,A=0,O=d):P>T?(U=_,A=1,O=y):O=d+(y-d)*A,-2!==P&&P!==T+2||(O=0),U-=_/2,o[P]=0===O?1:S,w=0;w<o[P];++w){var B=w/S;this.vertices.push(new p.Vector(W(2*B*X)*O,U,Y(2*B*X)*O)),this.vertexNormals.push(new p.Vector(0>P||P>T?0:W(2*B*X)*Y(L),0>P?-1:P>T?1:W(L),0>P||P>T?0:Y(2*B*X)*Y(L))),this.uvs.push(B,A)}}var u=0;if(C){for(I=0;I<o[-1];++I)M=(I+1)%o[-1],this.faces.push([u,u+1+M,u+1+I]);u+=o[-2]+o[-1]}for(P=0;P<T;++P){for(w=0;w<o[P];++w)1===o[P+1]?(D=(w+1)%o[P],this.faces.push([u+w,u+D,u+o[P]])):(D=(w+1)%o[P],this.faces.push([u+w,u+D,u+o[P]+D]),this.faces.push([u+w,u+o[P]+D,u+o[P]+w]));u+=o[P]}if(E)for(u+=o[T],w=0;w<o[T+1];++w)D=(w+1)%o[T+1],this.faces.push([u+w,u+D,u+o[T+1]])};p.prototype.cylinder=function(t,r,o,n,s,l){this._assert3d("cylinder"),p._validateParameters("cylinder",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=24),void 0===n&&(n=1),void 0===l&&(l=!0),void 0===s&&(s=!0);var d="cylinder|"+o+"|"+n+"|"+s+"|"+l;if(!this._renderer.geometryInHash(d)){var i=new p.Geometry(o,n);a.call(i,1,1,1,o,n,s,l),i.computeNormals(),24>=o&&16>=n?i._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw stroke on cylinder objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(d,i)}return this._renderer.drawBuffersScaled(d,t,r,t),this},p.prototype.cone=function(t,r,o,n,s){this._assert3d("cone"),p._validateParameters("cone",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=24),void 0===n&&(n=1),void 0===s&&(s=!0);var l="cone|"+o+"|"+n+"|"+s;if(!this._renderer.geometryInHash(l)){var d=new p.Geometry(o,n);a.call(d,1,0,1,o,n,s,!1),d.computeNormals(),24>=o&&16>=n?d._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw stroke on cone objects with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,d)}return this._renderer.drawBuffersScaled(l,t,r,t),this},p.prototype.ellipsoid=function(t,r,o,n,s){this._assert3d("ellipsoid"),p._validateParameters("ellipsoid",arguments),void 0===t&&(t=50),void 0===r&&(r=t),void 0===o&&(o=t),void 0===n&&(n=24),void 0===s&&(s=16);var l="ellipsoid|"+n+"|"+s;if(!this._renderer.geometryInHash(l)){var d=function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,o=X*r-X/2,n=Y(o),e=W(o),s=0;s<=this.detailX;s++){var d=s/this.detailX,c=2*X*d,i=Y(c),u=W(c),m=new p.Vector(n*u,e,n*i);this.vertices.push(m),this.vertexNormals.push(m),this.uvs.push(d,r)}},u=new p.Geometry(n,s,d);u.computeFaces(),24>=n&&24>=s?u._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw stroke on ellipsoids with more than 24 detailX or 24 detailY"),this._renderer.createBuffers(l,u)}return this._renderer.drawBuffersScaled(l,t,r,o),this},p.prototype.torus=function(t,r,o,n){if(this._assert3d("torus"),p._validateParameters("torus",arguments),void 0===t)t=50;else if(!t)return;if(void 0===r)r=10;else if(!r)return;void 0===o&&(o=24),void 0===n&&(n=16);var s=(r/t).toPrecision(4),l="torus|"+s+"|"+o+"|"+n;if(!this._renderer.geometryInHash(l)){var d=function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,d=2*X*r,c=Y(d),e=W(d),u=1+s*c,h=0;h<=this.detailX;h++){var g=h/this.detailX,y=2*X*g,f=Y(y),l=W(y),m=new p.Vector(u*f,u*l,s*e),n=new p.Vector(c*f,c*l,e);this.vertices.push(m),this.vertexNormals.push(n),this.uvs.push(g,r)}},u=new p.Geometry(o,n,d);u.computeFaces(),24>=o&&16>=n?u._makeTriangleEdges()._edgesToVertices():console.log("Cannot draw strokes on torus object with more than 24 detailX or 16 detailY"),this._renderer.createBuffers(l,u)}return this._renderer.drawBuffersScaled(l,t,t,t),this},p.RendererGL.prototype.point=function(t,r,a){this._usePointShader(),this.curPointShader.bindShader(),void 0===a&&(a=0);var o=[];return o.push(new p.Vector(t,r,a)),this._drawPoints(o,this._pointVertexBuffer),this.curPointShader.unbindShader(),this},p.RendererGL.prototype.triangle=function(t){var r=t[0],a=t[1],o=t[2],e=t[3],n=t[4],i=t[5];if(!this.geometryInHash("tri")){var s=function(){var e=[];e.push(new p.Vector(0,0,0)),e.push(new p.Vector(0,1,0)),e.push(new p.Vector(1,0,0)),this.strokeIndices=[[0,1],[1,2],[2,0]],this.vertices=e,this.faces=[[0,1,2]],this.uvs=[0,0,0,1,1,1]},d=new p.Geometry(1,1,s);d._makeTriangleEdges()._edgesToVertices(),d.computeNormals(),this.createBuffers("tri",d)}var c=this.uMVMatrix.copy();try{var l=new p.Matrix([o-r,e-a,0,0,n-r,i-a,0,0,0,0,1,0,r,a,0,1]).mult(this.uMVMatrix);this.uMVMatrix=l,this.drawBuffers("tri")}finally{this.uMVMatrix=c}return this},p.RendererGL.prototype.ellipse=function(e){this.arc(e[0],e[1],e[2],e[3],0,s.TWO_PI,s.OPEN,e[4])},p.RendererGL.prototype.arc=function(){var e=arguments[0],t=arguments[1],r=arguments[2],a=arguments[3],i=arguments[4],d=arguments[5],u=arguments[6],l=arguments[7]||25,m,h;if(_(d-i)>=s.TWO_PI?(m="ellipse",h=m+"|"+l+"|"):(m="arc",h=m+"|"+i+"|"+d+"|"+u+"|"+l+"|"),!this.geometryInHash(h)){var g=function(){if(this.strokeIndices=[],i.toFixed(10)!==d.toFixed(10)){u!==s.PIE&&void 0!==u||(this.vertices.push(new p.Vector(.5,.5,0)),this.uvs.push([.5,.5]));for(var e=0;e<=l;e++){var t=e/l,r=(d-i)*t+i,o=.5+Y(r)/2,n=.5+W(r)/2;this.vertices.push(new p.Vector(o,n,0)),this.uvs.push([o,n]),e<l-1&&(this.faces.push([0,e+1,e+2]),this.strokeIndices.push([e+1,e+2]))}u===s.PIE?(this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([0,this.vertices.length-1])):u===s.CHORD?(this.strokeIndices.push([0,1]),this.strokeIndices.push([0,this.vertices.length-1])):u===s.OPEN?this.strokeIndices.push([0,1]):(this.faces.push([0,this.vertices.length-2,this.vertices.length-1]),this.strokeIndices.push([this.vertices.length-2,this.vertices.length-1]))}},n=new p.Geometry(l,1,g);n.computeNormals(),50>=l?n._makeTriangleEdges()._edgesToVertices(n):console.log("Cannot stroke "+m+" with more than 50 detail"),this.createBuffers(h,n)}var o=this.uMVMatrix.copy();try{this.uMVMatrix.translate([e,t,0]),this.uMVMatrix.scale(r,a,1),this.drawBuffers(h)}finally{this.uMVMatrix=o}return this},p.RendererGL.prototype.rect=function(t){var r=this.attributes.perPixelLighting,a=t[0],o=t[1],e=t[2],n=t[3],s=t[4]||(r?1:24),d=t[5]||(r?1:16),i="rect|"+s+"|"+d;if(!this.geometryInHash(i)){var c=function(){for(var t=0;t<=this.detailY;t++)for(var r=t/this.detailY,o=0;o<=this.detailX;o++){var n=o/this.detailX,e=new p.Vector(n,r,0);this.vertices.push(e),this.uvs.push(n,r)}0<s&&0<d&&(this.strokeIndices=[[0,s],[s,(s+1)*(d+1)-1],[(s+1)*(d+1)-1,(s+1)*d],[(s+1)*d,0]])},u=new p.Geometry(s,d,c);u.computeFaces().computeNormals()._makeTriangleEdges()._edgesToVertices(),this.createBuffers(i,u)}var l=this.uMVMatrix.copy();try{this.uMVMatrix.translate([a,o,0]),this.uMVMatrix.scale(e,n,1),this.drawBuffers(i)}finally{this.uMVMatrix=l}return this},p.RendererGL.prototype.quad=function(t,r,a,o,e,n,s,d){var i="quad|"+t+"|"+r+"|"+a+"|"+o+"|"+e+"|"+n+"|"+s+"|"+d;if(!this.geometryInHash(i)){var c=function(){this.vertices.push(new p.Vector(t,r,0)),this.vertices.push(new p.Vector(a,o,0)),this.vertices.push(new p.Vector(e,n,0)),this.vertices.push(new p.Vector(s,d,0)),this.uvs.push(0,0,1,0,1,1,0,1),this.strokeIndices=[[0,1],[1,2],[2,3],[3,0]]},u=new p.Geometry(2,2,c);u.computeNormals()._makeTriangleEdges()._edgesToVertices(),u.faces=[[0,1,2],[2,3,0]],this.createBuffers(i,u)}return this.drawBuffers(i),this},p.RendererGL.prototype.bezier=function(t,a,s,u,y,_,b,x,v,S,T,C){8===arguments.length&&(S=b,T=x,b=y,x=u,u=s,y=u,s=_=v=C=0);var E=this._pInst._bezierDetail||20;this.beginShape();for(var m=0;m<=E;m++){var R=te(1-m/E,3),o=3*(m/E)*te(1-m/E,2),p=3*te(m/E,2)*(1-m/E),L=te(m/E,3);this.vertex(t*R+u*o+b*p+S*L,a*R+y*o+x*p+T*L,s*R+_*o+v*p+C*L)}return this.endShape(),this},p.RendererGL.prototype.curve=function(y,a,_,b,x,v,S,T,C,E,R,L){8===arguments.length&&(E=S,R=T,S=x,T=b,b=_,x=b,_=v=C=L=0);var P=this._pInst._curveDetail;this.beginShape();for(var m=0;m<=P;m++){var w=.5*te(m/P,3),o=.5*te(m/P,2),p=.5*(m/P),I=.5,r=w*(3*b-y-3*S+E)+o*(2*y-5*b+4*S-E)+p*(-y+S)+I*(2*b),s=w*(3*x-a-3*T+R)+o*(2*a-5*x+4*T-R)+p*(-a+T)+I*(2*x),t=w*(3*v-_-3*C+L)+o*(2*_-5*v+4*C-L)+p*(-_+C)+I*(2*v);this.vertex(r,s,t)}return this.endShape(),this},p.RendererGL.prototype.line=function(){return 6===arguments.length?(this.beginShape(),this.vertex(arguments[0],arguments[1],arguments[2]),this.vertex(arguments[3],arguments[4],arguments[5]),this.endShape()):4===arguments.length&&(this.beginShape(),this.vertex(arguments[0],arguments[1],0),this.vertex(arguments[2],arguments[3],0),this.endShape()),this},p.RendererGL.prototype.bezierVertex=function(){if(0===this.immediateMode._bezierVertex.length)throw Error("vertex() must be used once before calling bezierVertex()");var t=[],r=[],o=[],s=arguments.length,i,p,u,y,_;if(i=0,0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var x=1/this._lutBezierDetail,v=0,S=1,T=0;1>v;){if(i=parseFloat(v.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(i),S.toFixed(6)===x.toFixed(6)){i=parseFloat(S.toFixed(6))+parseFloat(v.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(i);break}v+=x,S-=x,++T}}var C=this._lookUpTableBezier.length;if(6===s){for(this.isBezier=!0,t=[this.immediateMode._bezierVertex[0],arguments[0],arguments[2],arguments[4]],r=[this.immediateMode._bezierVertex[1],arguments[1],arguments[3],arguments[5]],_=0;_<C;_++)p=t[0]*this._lookUpTableBezier[_][0]+t[1]*this._lookUpTableBezier[_][1]+t[2]*this._lookUpTableBezier[_][2]+t[3]*this._lookUpTableBezier[_][3],u=r[0]*this._lookUpTableBezier[_][0]+r[1]*this._lookUpTableBezier[_][1]+r[2]*this._lookUpTableBezier[_][2]+r[3]*this._lookUpTableBezier[_][3],this.vertex(p,u);this.immediateMode._bezierVertex[0]=arguments[4],this.immediateMode._bezierVertex[1]=arguments[5]}else if(9===s){for(this.isBezier=!0,t=[this.immediateMode._bezierVertex[0],arguments[0],arguments[3],arguments[6]],r=[this.immediateMode._bezierVertex[1],arguments[1],arguments[4],arguments[7]],o=[this.immediateMode._bezierVertex[2],arguments[2],arguments[5],arguments[8]],_=0;_<C;_++)p=t[0]*this._lookUpTableBezier[_][0]+t[1]*this._lookUpTableBezier[_][1]+t[2]*this._lookUpTableBezier[_][2]+t[3]*this._lookUpTableBezier[_][3],u=r[0]*this._lookUpTableBezier[_][0]+r[1]*this._lookUpTableBezier[_][1]+r[2]*this._lookUpTableBezier[_][2]+r[3]*this._lookUpTableBezier[_][3],y=o[0]*this._lookUpTableBezier[_][0]+o[1]*this._lookUpTableBezier[_][1]+o[2]*this._lookUpTableBezier[_][2]+o[3]*this._lookUpTableBezier[_][3],this.vertex(p,u,y);this.immediateMode._bezierVertex[0]=arguments[6],this.immediateMode._bezierVertex[1]=arguments[7],this.immediateMode._bezierVertex[2]=arguments[8]}},p.RendererGL.prototype.quadraticVertex=function(){if(0===this.immediateMode._quadraticVertex.length)throw Error("vertex() must be used once before calling quadraticVertex()");var t=[],r=[],o=[],s=arguments.length,i,p,u,y,_;if(i=0,0===this._lookUpTableQuadratic.length||this._lutQuadraticDetail!==this._pInst._curveDetail){this._lookUpTableQuadratic=[],this._lutQuadraticDetail=this._pInst._curveDetail;for(var x=1/this._lutQuadraticDetail,v=0,S=1,T=0;1>v;){if(i=parseFloat(v.toFixed(6)),this._lookUpTableQuadratic[T]=this._quadraticCoefficients(i),S.toFixed(6)===x.toFixed(6)){i=parseFloat(S.toFixed(6))+parseFloat(v.toFixed(6)),++T,this._lookUpTableQuadratic[T]=this._quadraticCoefficients(i);break}v+=x,S-=x,++T}}var C=this._lookUpTableQuadratic.length;if(4===s){for(this.isQuadratic=!0,t=[this.immediateMode._quadraticVertex[0],arguments[0],arguments[2]],r=[this.immediateMode._quadraticVertex[1],arguments[1],arguments[3]],_=0;_<C;_++)p=t[0]*this._lookUpTableQuadratic[_][0]+t[1]*this._lookUpTableQuadratic[_][1]+t[2]*this._lookUpTableQuadratic[_][2],u=r[0]*this._lookUpTableQuadratic[_][0]+r[1]*this._lookUpTableQuadratic[_][1]+r[2]*this._lookUpTableQuadratic[_][2],this.vertex(p,u);this.immediateMode._quadraticVertex[0]=arguments[2],this.immediateMode._quadraticVertex[1]=arguments[3]}else if(6===s){for(this.isQuadratic=!0,t=[this.immediateMode._quadraticVertex[0],arguments[0],arguments[3]],r=[this.immediateMode._quadraticVertex[1],arguments[1],arguments[4]],o=[this.immediateMode._quadraticVertex[2],arguments[2],arguments[5]],_=0;_<C;_++)p=t[0]*this._lookUpTableQuadratic[_][0]+t[1]*this._lookUpTableQuadratic[_][1]+t[2]*this._lookUpTableQuadratic[_][2],u=r[0]*this._lookUpTableQuadratic[_][0]+r[1]*this._lookUpTableQuadratic[_][1]+r[2]*this._lookUpTableQuadratic[_][2],y=o[0]*this._lookUpTableQuadratic[_][0]+o[1]*this._lookUpTableQuadratic[_][1]+o[2]*this._lookUpTableQuadratic[_][2],this.vertex(p,u,y);this.immediateMode._quadraticVertex[0]=arguments[3],this.immediateMode._quadraticVertex[1]=arguments[4],this.immediateMode._quadraticVertex[2]=arguments[5]}},p.RendererGL.prototype.curveVertex=function(){var t=[],r=[],o=[],s,p,u,y,_;s=0;var x=arguments.length;if(0===this._lookUpTableBezier.length||this._lutBezierDetail!==this._pInst._curveDetail){this._lookUpTableBezier=[],this._lutBezierDetail=this._pInst._curveDetail;for(var i=1/this._lutBezierDetail,v=0,S=1,T=0;1>v;){if(s=parseFloat(v.toFixed(6)),this._lookUpTableBezier[T]=this._bezierCoefficients(s),S.toFixed(6)===i.toFixed(6)){s=parseFloat(S.toFixed(6))+parseFloat(v.toFixed(6)),++T,this._lookUpTableBezier[T]=this._bezierCoefficients(s);break}v+=i,S-=i,++T}}var C=this._lookUpTableBezier.length;if(2===x){if(this.immediateMode._curveVertex.push(arguments[0]),this.immediateMode._curveVertex.push(arguments[1]),8===this.immediateMode._curveVertex.length){for(this.isCurve=!0,t=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[6]]),r=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[7]]),_=0;_<C;_++)p=t[0]*this._lookUpTableBezier[_][0]+t[1]*this._lookUpTableBezier[_][1]+t[2]*this._lookUpTableBezier[_][2]+t[3]*this._lookUpTableBezier[_][3],u=r[0]*this._lookUpTableBezier[_][0]+r[1]*this._lookUpTableBezier[_][1]+r[2]*this._lookUpTableBezier[_][2]+r[3]*this._lookUpTableBezier[_][3],this.vertex(p,u);for(_=0;_<x;_++)this.immediateMode._curveVertex.shift()}}else if(3===x&&(this.immediateMode._curveVertex.push(arguments[0]),this.immediateMode._curveVertex.push(arguments[1]),this.immediateMode._curveVertex.push(arguments[2]),12===this.immediateMode._curveVertex.length)){for(this.isCurve=!0,t=this._bezierToCatmull([this.immediateMode._curveVertex[0],this.immediateMode._curveVertex[3],this.immediateMode._curveVertex[6],this.immediateMode._curveVertex[9]]),r=this._bezierToCatmull([this.immediateMode._curveVertex[1],this.immediateMode._curveVertex[4],this.immediateMode._curveVertex[7],this.immediateMode._curveVertex[10]]),o=this._bezierToCatmull([this.immediateMode._curveVertex[2],this.immediateMode._curveVertex[5],this.immediateMode._curveVertex[8],this.immediateMode._curveVertex[11]]),_=0;_<C;_++)p=t[0]*this._lookUpTableBezier[_][0]+t[1]*this._lookUpTableBezier[_][1]+t[2]*this._lookUpTableBezier[_][2]+t[3]*this._lookUpTableBezier[_][3],u=r[0]*this._lookUpTableBezier[_][0]+r[1]*this._lookUpTableBezier[_][1]+r[2]*this._lookUpTableBezier[_][2]+r[3]*this._lookUpTableBezier[_][3],y=o[0]*this._lookUpTableBezier[_][0]+o[1]*this._lookUpTableBezier[_][1]+o[2]*this._lookUpTableBezier[_][2]+o[3]*this._lookUpTableBezier[_][3],this.vertex(p,u,y);for(_=0;_<x;_++)this.immediateMode._curveVertex.shift()}},r.exports=p},{"../core/constants":18,"../core/main":24,"./p5.Geometry":70}],65:[function(t,r){var o=t("../core/main"),n=t("../core/constants");o.prototype.orbitControl=function(t,r){if(this._assert3d("orbitControl"),o._validateParameters("orbitControl",arguments),this.mouseX<this.width&&0<this.mouseX&&this.mouseY<this.height&&0<this.mouseY){var n=this._renderer._curCamera;void 0===t&&(t=1),void 0===r&&(r=t),!0!==this.contextMenuDisabled&&(this.canvas.oncontextmenu=function(){return!1},this._setProperty("contextMenuDisabled",!0)),!0!==this.wheelDefaultDisabled&&(this.canvas.onwheel=function(){return!1},this._setProperty("wheelDefaultDisabled",!0));var s=this.height<this.width?this.height:this.width;if(this._mouseWheelDeltaY!==this._pmouseWheelDeltaY&&(0<this._mouseWheelDeltaY?this._renderer._curCamera._orbit(0,0,.5*s):this._renderer._curCamera._orbit(0,0,-.5*s)),this.mouseIsPressed)if(this.mouseButton===this.LEFT){var e=-t*(this.mouseX-this.pmouseX)/s,p=r*(this.mouseY-this.pmouseY)/s;this._renderer._curCamera._orbit(e,p,0)}else if(this.mouseButton===this.RIGHT){var d=n._getLocalAxes(),c=Z(d.x[0]*d.x[0]+d.x[2]*d.x[2]);0!==c&&(d.x[0]/=c,d.x[2]/=c);var i=Z(d.y[0]*d.y[0]+d.y[2]*d.y[2]);0!==i&&(d.y[0]/=i,d.y[2]/=i);var u=-1*t*(this.mouseX-this.pmouseX),m=-1*r*(this.mouseY-this.pmouseY);n.setPosition(n.eyeX+u*d.x[0]+m*d.z[0],n.eyeY,n.eyeZ+u*d.x[2]+m*d.z[2])}return this}},o.prototype.debugMode=function(){this._assert3d("debugMode"),o._validateParameters("debugMode",arguments);for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1);arguments[0]===n.GRID?this.registerMethod("post",this._grid.call(this,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])):arguments[0]===n.AXES?this.registerMethod("post",this._axesIcon.call(this,arguments[1],arguments[2],arguments[3],arguments[4])):(this.registerMethod("post",this._grid.call(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4])),this.registerMethod("post",this._axesIcon.call(this,arguments[5],arguments[6],arguments[7],arguments[8])))},o.prototype.noDebugMode=function(){this._assert3d("noDebugMode");for(var e=this._registeredMethods.post.length-1;0<=e;e--)this._registeredMethods.post[e].toString()!==this._grid().toString()&&this._registeredMethods.post[e].toString()!==this._axesIcon().toString()||this._registeredMethods.post.splice(e,1)},o.prototype._grid=function(t,r,o,n,i){void 0===t&&(t=this.width/2),void 0===r&&(r=4>$(t/30)?4:$(t/30)),void 0===o&&(o=0),void 0===n&&(n=0),void 0===i&&(i=0);var s=t/r,l=t/2;return function(){this.push(),this.stroke(255*this._renderer.curStrokeColor[0],255*this._renderer.curStrokeColor[1],255*this._renderer.curStrokeColor[2]),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]);for(var e=0;e<=r;e++)this.beginShape(this.LINES),this.vertex(-l+o,n,e*s-l+i),this.vertex(+l+o,n,e*s-l+i),this.endShape();for(var t=0;t<=r;t++)this.beginShape(this.LINES),this.vertex(t*s-l+o,n,-l+i),this.vertex(t*s-l+o,n,+l+i),this.endShape();this.pop()}},o.prototype._axesIcon=function(e,t,r,o){return void 0===e&&(e=40<this.width/20?this.width/20:40),void 0===t&&(t=-this.width/4),void 0===r&&(r=t),void 0===o&&(o=t),function(){this.push(),this._renderer.uMVMatrix.set(this._renderer._curCamera.cameraMatrix.mat4[0],this._renderer._curCamera.cameraMatrix.mat4[1],this._renderer._curCamera.cameraMatrix.mat4[2],this._renderer._curCamera.cameraMatrix.mat4[3],this._renderer._curCamera.cameraMatrix.mat4[4],this._renderer._curCamera.cameraMatrix.mat4[5],this._renderer._curCamera.cameraMatrix.mat4[6],this._renderer._curCamera.cameraMatrix.mat4[7],this._renderer._curCamera.cameraMatrix.mat4[8],this._renderer._curCamera.cameraMatrix.mat4[9],this._renderer._curCamera.cameraMatrix.mat4[10],this._renderer._curCamera.cameraMatrix.mat4[11],this._renderer._curCamera.cameraMatrix.mat4[12],this._renderer._curCamera.cameraMatrix.mat4[13],this._renderer._curCamera.cameraMatrix.mat4[14],this._renderer._curCamera.cameraMatrix.mat4[15]),this.strokeWeight(2),this.stroke(255,0,0),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t+e,r,o),this.endShape(),this.stroke(0,255,0),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t,r+e,o),this.endShape(),this.stroke(0,0,255),this.beginShape(this.LINES),this.vertex(t,r,o),this.vertex(t,r,o+e),this.endShape(),this.pop()}},r.exports=o},{"../core/constants":18,"../core/main":24}],66:[function(e,t){var r=e("../core/main");r.prototype.ambientLight=function(){this._assert3d("ambientLight"),r._validateParameters("ambientLight",arguments);var e=this.color.apply(this,arguments),t=this._renderer._useLightShader();return t.setUniform("uUseLighting",!0),t.setUniform("uMaterialColor",this._renderer.curFillColor),this._renderer.ambientLightColors.push(e._array[0],e._array[1],e._array[2]),t.setUniform("uAmbientColor",this._renderer.ambientLightColors),t.setUniform("uAmbientLightCount",this._renderer.ambientLightColors.length/3),this},r.prototype.directionalLight=function(e,t,a){this._assert3d("directionalLight"),r._validateParameters("directionalLight",arguments);var o=this._renderer._useLightShader(),i;i=e instanceof r.Color?e:this.color(e,t,a);var s=arguments[arguments.length-1],p,d,c;"number"==typeof s?(p=arguments[arguments.length-3],d=arguments[arguments.length-2],c=arguments[arguments.length-1]):(p=s.x,d=s.y,c=s.z),o.setUniform("uUseLighting",!0),o.setUniform("uMaterialColor",this._renderer.curFillColor);var u=Z(p*p+d*d+c*c);return this._renderer.directionalLightDirections.push(p/u,d/u,c/u),o.setUniform("uLightingDirection",this._renderer.directionalLightDirections),this._renderer.directionalLightColors.push(i._array[0],i._array[1],i._array[2]),o.setUniform("uDirectionalColor",this._renderer.directionalLightColors),o.setUniform("uDirectionalLightCount",this._renderer.directionalLightColors.length/3),this},r.prototype.pointLight=function(e,t,a){this._assert3d("pointLight"),r._validateParameters("pointLight",arguments);var o=e instanceof r.Color?e:this.color(e,t,a);var n=arguments[arguments.length-1],s,l,p;"number"==typeof n?(s=arguments[arguments.length-3],l=arguments[arguments.length-2],p=arguments[arguments.length-1]):(s=n.x,l=n.y,p=n.z);var d=this._renderer._useLightShader();return d.setUniform("uUseLighting",!0),d.setUniform("uMaterialColor",this._renderer.curFillColor),this._renderer.pointLightPositions.push(s,l,p),d.setUniform("uPointLightLocation",this._renderer.pointLightPositions),this._renderer.pointLightColors.push(o._array[0],o._array[1],o._array[2]),d.setUniform("uPointLightColor",this._renderer.pointLightColors),d.setUniform("uPointLightCount",this._renderer.pointLightColors.length/3),this},t.exports=r},{"../core/main":24}],67:[function(t,r){function o(e,t){for(var r={v:[],vt:[],vn:[]},a={},s=0,d;s<t.length;++s)if(d=t[s].trim().split(/\b\s+/),0<d.length)if("v"===d[0]||"vn"===d[0]){var c=new n.Vector(parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]));r[d[0]].push(c)}else if("vt"===d[0]){var u=[parseFloat(d[1]),parseFloat(d[2])];r[d[0]].push(u)}else if("f"===d[0])for(var i=3;i<d.length;++i){for(var h=[],y=[1,i-1,i],l=0;l<y.length;++l){var _=d[y[l]],b=0;if(void 0!==a[_])b=a[_];else{for(var x=_.split("/"),p=0;p<x.length;p++)x[p]=parseInt(x[p])-1;b=a[_]=e.vertices.length,e.vertices.push(r.v[x[0]].copy()),r.vt[x[1]]?e.uvs.push(r.vt[x[1]].slice()):e.uvs.push([0,0]),r.vn[x[2]]&&e.vertexNormals.push(r.vn[x[2]].copy())}h.push(b)}h[0]!==h[1]&&h[0]!==h[2]&&h[1]!==h[2]&&e.faces.push(h)}return 0===e.vertexNormals.length&&e.computeNormals(),e}var n=t("../core/main");t("./p5.Geometry"),n.prototype.loadModel=function(e){n._validateParameters("loadModel",arguments);var t,r,a;"boolean"==typeof arguments[1]?(t=arguments[1],r=arguments[2],a=arguments[3]):(t=!1,r=arguments[1],a=arguments[2]);var i=new n.Geometry;i.gid=e+"|"+t;var s=this;return this.loadStrings(e,function(e){o(i,e),t&&i.normalize(),s._decrementPreload(),"function"==typeof r&&r(i)}.bind(this),a),i},n.prototype.model=function(e){this._assert3d("model"),n._validateParameters("model",arguments),0<e.vertices.length&&(this._renderer.geometryInHash(e.gid)||(e._makeTriangleEdges()._edgesToVertices(),this._renderer.createBuffers(e.gid,e)),this._renderer.drawBuffers(e.gid))},r.exports=n},{"../core/main":24,"./p5.Geometry":70}],68:[function(t,r){var o=t("../core/main"),n=t("../core/constants");t("./p5.Texture"),o.prototype.loadShader=function(t,r){o._validateParameters("loadShader",arguments);var n=new o.Shader,i=this,e=!1,s=!1;return this.loadStrings(r,function(t){n._fragSrc=t.join("\n"),e=!0,s&&i._decrementPreload()}),this.loadStrings(t,function(t){n._vertSrc=t.join("\n"),s=!0,e&&i._decrementPreload()}),n},o.prototype.createShader=function(e,t){return this._assert3d("createShader"),o._validateParameters("createShader",arguments),new o.Shader(this._renderer,e,t)},o.prototype.shader=function(e){return this._assert3d("shader"),o._validateParameters("shader",arguments),void 0===e._renderer&&(e._renderer=this._renderer),e.isStrokeShader()?this._renderer.setStrokeShader(e):this._renderer.setFillShader(e),this},o.prototype.normalMaterial=function(){return this._assert3d("normalMaterial"),o._validateParameters("normalMaterial",arguments),this._renderer.drawMode=n.FILL,this._renderer.setFillShader(this._renderer._getNormalShader()),this._renderer.curFillColor=[1,1,1,1],this.noStroke(),this},o.prototype.texture=function(e){this._assert3d("texture"),o._validateParameters("texture",arguments),this._renderer.drawMode=n.TEXTURE;var t=this._renderer._useLightShader();return t.setUniform("uSpecular",!1),t.setUniform("isTexture",!0),t.setUniform("uSampler",e),this.noStroke(),this},o.prototype.ambientMaterial=function(){this._assert3d("ambientMaterial"),o._validateParameters("ambientMaterial",arguments);var e=o.prototype.color.apply(this,arguments);this._renderer.curFillColor=e._array;var t=this._renderer._useLightShader();return t.setUniform("uMaterialColor",this._renderer.curFillColor),t.setUniform("uSpecular",!1),t.setUniform("isTexture",!1),this},o.prototype.specularMaterial=function(){this._assert3d("specularMaterial"),o._validateParameters("specularMaterial",arguments);var e=o.prototype.color.apply(this,arguments);this._renderer.curFillColor=e._array;var t=this._renderer._useLightShader();return t.setUniform("uMaterialColor",this._renderer.curFillColor),t.setUniform("uSpecular",!0),t.setUniform("isTexture",!1),this},o.RendererGL.prototype._applyColorBlend=function(e){var t=this.GL,r=this.drawMode===n.TEXTURE;return r||1>e[e.length-1]?(t.depthMask(r),t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)):(t.depthMask(!0),t.disable(t.BLEND)),e},r.exports=o},{"../core/constants":18,"../core/main":24,"./p5.Texture":76}],69:[function(e,t){var s=e("../core/main");s.prototype.camera=function(){return this._assert3d("camera"),s._validateParameters("camera",arguments),this._renderer._curCamera.camera.apply(this._renderer._curCamera,arguments),this},s.prototype.perspective=function(){return this._assert3d("perspective"),s._validateParameters("perspective",arguments),this._renderer._curCamera.perspective.apply(this._renderer._curCamera,arguments),this},s.prototype.ortho=function(){return this._assert3d("ortho"),s._validateParameters("ortho",arguments),this._renderer._curCamera.ortho.apply(this._renderer._curCamera,arguments),this},s.prototype.createCamera=function(){this._assert3d("createCamera");var e=new s.Camera(this._renderer);return e._computeCameraDefaultSettings(),e._setDefaultCamera(),this._renderer._curCamera=e,e},s.Camera=function(e){this._renderer=e,this.cameraType="default",this.cameraMatrix=new s.Matrix,this.projMatrix=new s.Matrix},s.Camera.prototype.perspective=function(t,r,o,n){void 0===t?(t=this.defaultCameraFOV,this.cameraFOV=t):this.cameraFOV=this._renderer._pInst._toRadians(t),void 0===r&&(r=this.defaultAspectRatio),void 0===o&&(o=this.defaultCameraNear),void 0===n&&(n=this.defaultCameraFar),1e-4>=o&&(o=.01,console.log("Avoid perspective near plane values close to or below 0. Setting value to 0.01.")),n<o&&console.log("Perspective far plane value is less than near plane value. Nothing will be shown."),this.cameraFOV=this._renderer._pInst._toRadians(t),this.aspectRatio=r,this.cameraNear=o,this.cameraFar=n,this.projMatrix=s.Matrix.identity();var i=1/V(this.cameraFOV/2),l=1/(this.cameraNear-this.cameraFar);this.projMatrix.set(i/r,0,0,0,0,-i,0,0,0,0,(n+o)*l,-1,0,0,2*n*o*l,0),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},s.Camera.prototype.ortho=function(t,r,l,d,u,m){void 0===t&&(t=-this._renderer.width/2),void 0===r&&(r=+this._renderer.width/2),void 0===l&&(l=-this._renderer.height/2),void 0===d&&(d=+this._renderer.height/2),void 0===u&&(u=0),void 0===m&&(m=T(this._renderer.width,this._renderer.height));var y=r-t,h=d-l,i=m-u,_=-(r+t)/y,n=-(d+l)/h,o=-(m+u)/i;this.projMatrix=s.Matrix.identity(),this.projMatrix.set(2/y,0,0,0,0,-(2/h),0,0,0,0,-2/i,0,_,n,o,1),this._isActive()&&this._renderer.uPMatrix.set(this.projMatrix.mat4[0],this.projMatrix.mat4[1],this.projMatrix.mat4[2],this.projMatrix.mat4[3],this.projMatrix.mat4[4],this.projMatrix.mat4[5],this.projMatrix.mat4[6],this.projMatrix.mat4[7],this.projMatrix.mat4[8],this.projMatrix.mat4[9],this.projMatrix.mat4[10],this.projMatrix.mat4[11],this.projMatrix.mat4[12],this.projMatrix.mat4[13],this.projMatrix.mat4[14],this.projMatrix.mat4[15]),this.cameraType="custom"},s.Camera.prototype._rotateView=function(t,r,a,o){var e=this.centerX,n=this.centerY,l=this.centerZ;e-=this.eyeX,n-=this.eyeY,l-=this.eyeZ;var p=s.Matrix.identity(this._renderer._pInst);p.rotate(t,r,a,o);var i=[e*p.mat4[0]+n*p.mat4[4]+l*p.mat4[8],e*p.mat4[1]+n*p.mat4[5]+l*p.mat4[9],e*p.mat4[2]+n*p.mat4[6]+l*p.mat4[10]];i[0]+=this.eyeX,i[1]+=this.eyeY,i[2]+=this.eyeZ,this.camera(this.eyeX,this.eyeY,this.eyeZ,i[0],i[1],i[2],this.upX,this.upY,this.upZ)},s.Camera.prototype.pan=function(e){var t=this._getLocalAxes();this._rotateView(e,t.y[0],t.y[1],t.y[2])},s.Camera.prototype.tilt=function(e){var t=this._getLocalAxes();this._rotateView(e,t.x[0],t.x[1],t.x[2])},s.Camera.prototype.lookAt=function(e,t,r){this.camera(this.eyeX,this.eyeY,this.eyeZ,e,t,r,this.upX,this.upY,this.upZ)},s.Camera.prototype.camera=function(t,r,o,n,s,p,u,y,_){void 0===t&&(t=this.defaultEyeX,r=this.defaultEyeY,o=this.defaultEyeZ,n=t,s=r,p=0,u=0,y=1,_=0),this.eyeX=t,this.eyeY=r,this.eyeZ=o,this.centerX=n,this.centerY=s,this.centerZ=p,this.upX=u,this.upY=y,this.upZ=_;var x=this._getLocalAxes();this.cameraMatrix.set(x.x[0],x.y[0],x.z[0],0,x.x[1],x.y[1],x.z[1],0,x.x[2],x.y[2],x.z[2],0,0,0,0,1);var v=-t,S=-r,l=-o;return this.cameraMatrix.translate([v,S,l]),this._isActive()&&this._renderer.uMVMatrix.set(this.cameraMatrix.mat4[0],this.cameraMatrix.mat4[1],this.cameraMatrix.mat4[2],this.cameraMatrix.mat4[3],this.cameraMatrix.mat4[4],this.cameraMatrix.mat4[5],this.cameraMatrix.mat4[6],this.cameraMatrix.mat4[7],this.cameraMatrix.mat4[8],this.cameraMatrix.mat4[9],this.cameraMatrix.mat4[10],this.cameraMatrix.mat4[11],this.cameraMatrix.mat4[12],this.cameraMatrix.mat4[13],this.cameraMatrix.mat4[14],this.cameraMatrix.mat4[15]),this},s.Camera.prototype.move=function(t,r,a){var o=this._getLocalAxes(),n=[o.x[0]*t,o.x[1]*t,o.x[2]*t],e=[o.y[0]*r,o.y[1]*r,o.y[2]*r],i=[o.z[0]*a,o.z[1]*a,o.z[2]*a];this.camera(this.eyeX+n[0]+e[0]+i[0],this.eyeY+n[1]+e[1]+i[1],this.eyeZ+n[2]+e[2]+i[2],this.centerX+n[0]+e[0]+i[0],this.centerY+n[1]+e[1]+i[1],this.centerZ+n[2]+e[2]+i[2],0,1,0)},s.Camera.prototype.setPosition=function(t,r,a){var o=t-this.eyeX,n=r-this.eyeY,e=a-this.eyeZ;this.camera(t,r,a,this.centerX+o,this.centerY+n,this.centerZ+e,0,1,0)},s.Camera.prototype._computeCameraDefaultSettings=function(){this.defaultCameraFOV=60/180*X,this.defaultAspectRatio=this._renderer.width/this._renderer.height,this.defaultEyeX=0,this.defaultEyeY=0,this.defaultEyeZ=this._renderer.height/2/V(this.defaultCameraFOV/2),this.defaultCenterX=0,this.defaultCenterY=0,this.defaultCenterZ=0,this.defaultCameraNear=.1*this.defaultEyeZ,this.defaultCameraFar=10*this.defaultEyeZ},s.Camera.prototype._setDefaultCamera=function(){this.cameraFOV=this.defaultCameraFOV,this.aspectRatio=this.defaultAspectRatio,this.eyeX=this.defaultEyeX,this.eyeY=this.defaultEyeY,this.eyeZ=this.defaultEyeZ,this.centerX=this.defaultCenterX,this.centerY=this.defaultCenterY,this.centerZ=this.defaultCenterZ,this.upX=0,this.upY=1,this.upZ=0,this.cameraNear=this.defaultCameraNear,this.cameraFar=this.defaultCameraFar,this.perspective(),this.camera(),this.cameraType="default"},s.Camera.prototype._resize=function(){"default"===this.cameraType?(this._computeCameraDefaultSettings(),this._setDefaultCamera()):this.perspective(this.cameraFOV,this._renderer.width/this._renderer.height)},s.Camera.prototype.copy=function(){var e=new s.Camera(this._renderer);return e.cameraFOV=this.cameraFOV,e.aspectRatio=this.aspectRatio,e.eyeX=this.eyeX,e.eyeY=this.eyeY,e.eyeZ=this.eyeZ,e.centerX=this.centerX,e.centerY=this.centerY,e.centerZ=this.centerZ,e.cameraNear=this.cameraNear,e.cameraFar=this.cameraFar,e.cameraType=this.cameraType,e.cameraMatrix=this.cameraMatrix.copy(),e.projMatrix=this.projMatrix.copy(),e},s.Camera.prototype._getLocalAxes=function(){var t=this.eyeX-this.centerX,r=this.eyeY-this.centerY,o=this.eyeZ-this.centerZ,n=Z(t*t+r*r+o*o);0!==n&&(t/=n,r/=n,o/=n);var s=this.upX,p=this.upY,d=this.upZ,u=p*o-d*r,m=-s*o+d*t,y=s*r-p*t;s=r*y-o*m,p=-t*y+o*u,d=t*m-r*u;var _=Z(u*u+m*m+y*y);0!==_&&(u/=_,m/=_,y/=_);var x=Z(s*s+p*p+d*d);return 0!==x&&(s/=x,p/=x,d/=x),{x:[u,m,y],y:[s,p,d],z:[t,r,o]}},s.Camera.prototype._orbit=function(t,a,o){var n=this.eyeX-this.centerX,s=this.eyeY-this.centerY,e=this.eyeZ-this.centerZ,p=Z(n*n+s*s+e*e),d=x(n,e),c=r(T(-1,U(1,s/p)));d+=t,c+=a,p+=o,0>p&&(p=.1),c>X?c=X:0>=c&&(c=.001);var u=W(c)*p*W(d),m=Y(c)*p,y=W(c)*p*Y(d);this.camera(u+this.centerX,m+this.centerY,y+this.centerZ,this.centerX,this.centerY,this.centerZ,0,1,0)},s.Camera.prototype._isActive=function(){return this===this._renderer._curCamera},s.prototype.setCamera=function(e){this._renderer._curCamera=e,this._renderer.uPMatrix.set(e.projMatrix.mat4[0],e.projMatrix.mat4[1],e.projMatrix.mat4[2],e.projMatrix.mat4[3],e.projMatrix.mat4[4],e.projMatrix.mat4[5],e.projMatrix.mat4[6],e.projMatrix.mat4[7],e.projMatrix.mat4[8],e.projMatrix.mat4[9],e.projMatrix.mat4[10],e.projMatrix.mat4[11],e.projMatrix.mat4[12],e.projMatrix.mat4[13],e.projMatrix.mat4[14],e.projMatrix.mat4[15])},t.exports=s.Camera},{"../core/main":24}],70:[function(e,r){var o=e("../core/main");o.Geometry=function(e,t,r){return this.vertices=[],this.lineVertices=[],this.lineNormals=[],this.vertexNormals=[],this.faces=[],this.uvs=[],this.edges=[],this.detailX=void 0===e?1:e,this.detailY=void 0===t?1:t,r instanceof Function&&r.call(this),this},o.Geometry.prototype.computeFaces=function(){this.faces.length=0;for(var t=this.detailX+1,e=0,r,o,n,i;e<this.detailY;e++)for(var s=0;s<this.detailX;s++)r=e*t+s,o=e*t+s+1,n=(e+1)*t+s+1,i=(e+1)*t+s,this.faces.push([r,o,i]),this.faces.push([i,o,n]);return this},o.Geometry.prototype._getFaceNormal=function(r){var a=this.faces[r],n=this.vertices[a[0]],s=this.vertices[a[1]],e=this.vertices[a[2]],l=o.Vector.sub(s,n),p=o.Vector.sub(e,n),d=o.Vector.cross(l,p),i=o.Vector.mag(d),c=i/(o.Vector.mag(l)*o.Vector.mag(p));return 0==c||isNaN(c)?(console.warn("p5.Geometry.prototype._getFaceNormal:","face has colinear sides or a repeated vertex"),d):(1<c&&(c=1),d.mult(t(c)/i))},o.Geometry.prototype.computeNormals=function(){var t=this.vertexNormals,r=this.vertices,n=this.faces,e;for(t.length=0,e=0;e<r.length;++e)t.push(new o.Vector);for(var s=0;s<n.length;++s)for(var l=n[s],p=this._getFaceNormal(s),d=0,c;3>d;++d)c=l[d],t[c].add(p);for(e=0;e<r.length;++e)t[e].normalize();return this},o.Geometry.prototype.averageNormals=function(){for(var e=0;e<=this.detailY;e++){var t=this.detailX+1,r=o.Vector.add(this.vertexNormals[e*t],this.vertexNormals[e*t+this.detailX]);r=o.Vector.div(r,2),this.vertexNormals[e*t]=r,this.vertexNormals[e*t+this.detailX]=r}return this},o.Geometry.prototype.averagePoleNormals=function(){for(var e=new o.Vector(0,0,0),t=0;t<this.detailX;t++)e.add(this.vertexNormals[t]);for(e=o.Vector.div(e,this.detailX),t=0;t<this.detailX;t++)this.vertexNormals[t]=e;for(e=new o.Vector(0,0,0),t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)e.add(this.vertexNormals[t]);for(e=o.Vector.div(e,this.detailX),t=this.vertices.length-1;t>this.vertices.length-1-this.detailX;t--)this.vertexNormals[t]=e;return this},o.Geometry.prototype._makeTriangleEdges=function(){if(this.edges.length=0,Array.isArray(this.strokeIndices))for(var e=0,t=this.strokeIndices.length;e<t;e++)this.edges.push(this.strokeIndices[e]);else for(var r=0;r<this.faces.length;r++)this.edges.push([this.faces[r][0],this.faces[r][1]]),this.edges.push([this.faces[r][1],this.faces[r][2]]),this.edges.push([this.faces[r][2],this.faces[r][0]]);return this},o.Geometry.prototype._edgesToVertices=function(){this.lineVertices.length=0,this.lineNormals.length=0;for(var t=0;t<this.edges.length;t++){var r=this.vertices[this.edges[t][0]],o=this.vertices[this.edges[t][1]],n=o.copy().sub(r).normalize(),s=r.array(),e=r.array(),l=o.array(),p=o.array(),d=n.array(),i=n.array();d.push(1),i.push(-1),this.lineNormals.push(d,i,d,d,i,i),this.lineVertices.push(s,e,l,l,e,p)}return this},o.Geometry.prototype.normalize=function(){if(0<this.vertices.length){for(var t=this.vertices[0].copy(),r=this.vertices[0].copy(),a=0;a<this.vertices.length;a++)t.x=T(t.x,this.vertices[a].x),r.x=U(r.x,this.vertices[a].x),t.y=T(t.y,this.vertices[a].y),r.y=U(r.y,this.vertices[a].y),t.z=T(t.z,this.vertices[a].z),r.z=U(r.z,this.vertices[a].z);var n=o.Vector.lerp(t,r,.5),e=o.Vector.sub(t,r),i=T(T(e.x,e.y),e.z);for(a=0;a<this.vertices.length;a++)this.vertices[a].sub(n),this.vertices[a].mult(200/i)}return this},r.exports=o.Geometry},{"../core/main":24}],71:[function(t,r){var _=t("../core/main"),o=Array,d=function(e){return e instanceof Array};"undefined"!=typeof Float32Array&&(o=Float32Array,d=function(e){return e instanceof Array||e instanceof Float32Array}),_.Matrix=function(){for(var e=arguments,t=Array(arguments.length),r=0;r<t.length;++r)t[r]=e[r];return t.length&&t[t.length-1]instanceof _&&(this.p5=t[t.length-1]),"mat3"===t[0]?this.mat3=Array.isArray(t[1])?t[1]:new o([1,0,0,0,1,0,0,0,1]):this.mat4=Array.isArray(t[0])?t[0]:new o([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this},_.Matrix.prototype.set=function(e){return e instanceof _.Matrix?(this.mat4=e.mat4,this):d(e)?(this.mat4=e,this):(16===arguments.length&&(this.mat4[0]=arguments[0],this.mat4[1]=arguments[1],this.mat4[2]=arguments[2],this.mat4[3]=arguments[3],this.mat4[4]=arguments[4],this.mat4[5]=arguments[5],this.mat4[6]=arguments[6],this.mat4[7]=arguments[7],this.mat4[8]=arguments[8],this.mat4[9]=arguments[9],this.mat4[10]=arguments[10],this.mat4[11]=arguments[11],this.mat4[12]=arguments[12],this.mat4[13]=arguments[13],this.mat4[14]=arguments[14],this.mat4[15]=arguments[15]),this)},_.Matrix.prototype.get=function(){return new _.Matrix(this.mat4,this.p5)},_.Matrix.prototype.copy=function(){var e=new _.Matrix(this.p5);return e.mat4[0]=this.mat4[0],e.mat4[1]=this.mat4[1],e.mat4[2]=this.mat4[2],e.mat4[3]=this.mat4[3],e.mat4[4]=this.mat4[4],e.mat4[5]=this.mat4[5],e.mat4[6]=this.mat4[6],e.mat4[7]=this.mat4[7],e.mat4[8]=this.mat4[8],e.mat4[9]=this.mat4[9],e.mat4[10]=this.mat4[10],e.mat4[11]=this.mat4[11],e.mat4[12]=this.mat4[12],e.mat4[13]=this.mat4[13],e.mat4[14]=this.mat4[14],e.mat4[15]=this.mat4[15],e},_.Matrix.identity=function(e){return new _.Matrix(e)},_.Matrix.prototype.transpose=function(t){var r,a,o,n,s,l;return t instanceof _.Matrix?(r=t.mat4[1],a=t.mat4[2],o=t.mat4[3],n=t.mat4[6],s=t.mat4[7],l=t.mat4[11],this.mat4[0]=t.mat4[0],this.mat4[1]=t.mat4[4],this.mat4[2]=t.mat4[8],this.mat4[3]=t.mat4[12],this.mat4[4]=r,this.mat4[5]=t.mat4[5],this.mat4[6]=t.mat4[9],this.mat4[7]=t.mat4[13],this.mat4[8]=a,this.mat4[9]=n,this.mat4[10]=t.mat4[10],this.mat4[11]=t.mat4[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=t.mat4[15]):d(t)&&(r=t[1],a=t[2],o=t[3],n=t[6],s=t[7],l=t[11],this.mat4[0]=t[0],this.mat4[1]=t[4],this.mat4[2]=t[8],this.mat4[3]=t[12],this.mat4[4]=r,this.mat4[5]=t[5],this.mat4[6]=t[9],this.mat4[7]=t[13],this.mat4[8]=a,this.mat4[9]=n,this.mat4[10]=t[10],this.mat4[11]=t[14],this.mat4[12]=o,this.mat4[13]=s,this.mat4[14]=l,this.mat4[15]=t[15]),this},_.Matrix.prototype.invert=function(f){var a,S,T,R,L,P,I,M,U,O,G,N,V,H,W,Y;f instanceof _.Matrix?(a=f.mat4[0],S=f.mat4[1],T=f.mat4[2],R=f.mat4[3],L=f.mat4[4],P=f.mat4[5],I=f.mat4[6],M=f.mat4[7],U=f.mat4[8],O=f.mat4[9],G=f.mat4[10],N=f.mat4[11],V=f.mat4[12],H=f.mat4[13],W=f.mat4[14],Y=f.mat4[15]):d(f)&&(a=f[0],S=f[1],T=f[2],R=f[3],L=f[4],P=f[5],I=f[6],M=f[7],U=f[8],O=f[9],G=f[10],N=f[11],V=f[12],H=f[13],W=f[14],Y=f[15]);var X=a*P-S*L,t=a*I-T*L,u=a*M-R*L,v=S*I-T*P,w=S*M-R*P,x=T*M-R*I,y=U*H-O*V,z=U*W-G*V,A=U*Y-N*V,B=O*W-G*H,C=O*Y-N*H,D=G*Y-N*W,E=X*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,this.mat4[0]=(P*D-I*C+M*B)*E,this.mat4[1]=(T*C-S*D-R*B)*E,this.mat4[2]=(H*x-W*w+Y*v)*E,this.mat4[3]=(G*w-O*x-N*v)*E,this.mat4[4]=(I*A-L*D-M*z)*E,this.mat4[5]=(a*D-T*A+R*z)*E,this.mat4[6]=(W*u-V*x-Y*t)*E,this.mat4[7]=(U*x-G*u+N*t)*E,this.mat4[8]=(L*C-P*A+M*y)*E,this.mat4[9]=(S*A-a*C-R*y)*E,this.mat4[10]=(V*w-H*u+Y*X)*E,this.mat4[11]=(O*u-U*w-N*X)*E,this.mat4[12]=(P*z-L*B-I*y)*E,this.mat4[13]=(a*B-S*z+T*y)*E,this.mat4[14]=(H*t-V*v-W*X)*E,this.mat4[15]=(U*v-O*t+G*X)*E,this):null},_.Matrix.prototype.invert3x3=function(){var t=this.mat3[0],r=this.mat3[1],a=this.mat3[2],o=this.mat3[3],n=this.mat3[4],e=this.mat3[5],s=this.mat3[6],p=this.mat3[7],d=this.mat3[8],i=d*n-e*p,c=-d*o+e*s,u=p*o-n*s,l=t*i+r*c+a*u;return l?(l=1/l,this.mat3[0]=i*l,this.mat3[1]=(-d*r+a*p)*l,this.mat3[2]=(e*r-a*n)*l,this.mat3[3]=c*l,this.mat3[4]=(d*t-a*s)*l,this.mat3[5]=(-e*t+a*o)*l,this.mat3[6]=u*l,this.mat3[7]=(-p*t+r*s)*l,this.mat3[8]=(n*t-r*o)*l,this):null},_.Matrix.prototype.transpose3x3=function(e){var t=e[1],r=e[2],a=e[5];return this.mat3[1]=e[3],this.mat3[2]=e[6],this.mat3[3]=t,this.mat3[5]=e[7],this.mat3[6]=r,this.mat3[7]=a,this},_.Matrix.prototype.inverseTranspose=function(e){void 0===this.mat3?console.error("sorry, this function only works with mat3"):(this.mat3[0]=e.mat4[0],this.mat3[1]=e.mat4[1],this.mat3[2]=e.mat4[2],this.mat3[3]=e.mat4[4],this.mat3[4]=e.mat4[5],this.mat3[5]=e.mat4[6],this.mat3[6]=e.mat4[8],this.mat3[7]=e.mat4[9],this.mat3[8]=e.mat4[10]);var t=this.invert3x3();if(t)t.transpose3x3(this.mat3);else for(var r=0;9>r;r++)this.mat3[r]=0;return this},_.Matrix.prototype.determinant=function(){var t=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],r=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],a=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],o=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],n=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],e=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],s=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],l=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],p=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],i=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],d=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13];return t*(this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14])-r*d+a*i+o*p-n*l+e*s},_.Matrix.prototype.mult=function(t){var r;if(t===this||t===this.mat4)r=this.copy().mat4;else if(t instanceof _.Matrix)r=t.mat4;else{if(!d(t))return;r=t}var a=this.mat4[0],o=this.mat4[1],n=this.mat4[2],i=this.mat4[3];return this.mat4[0]=a*r[0]+o*r[4]+n*r[8]+i*r[12],this.mat4[1]=a*r[1]+o*r[5]+n*r[9]+i*r[13],this.mat4[2]=a*r[2]+o*r[6]+n*r[10]+i*r[14],this.mat4[3]=a*r[3]+o*r[7]+n*r[11]+i*r[15],a=this.mat4[4],o=this.mat4[5],n=this.mat4[6],i=this.mat4[7],this.mat4[4]=a*r[0]+o*r[4]+n*r[8]+i*r[12],this.mat4[5]=a*r[1]+o*r[5]+n*r[9]+i*r[13],this.mat4[6]=a*r[2]+o*r[6]+n*r[10]+i*r[14],this.mat4[7]=a*r[3]+o*r[7]+n*r[11]+i*r[15],a=this.mat4[8],o=this.mat4[9],n=this.mat4[10],i=this.mat4[11],this.mat4[8]=a*r[0]+o*r[4]+n*r[8]+i*r[12],this.mat4[9]=a*r[1]+o*r[5]+n*r[9]+i*r[13],this.mat4[10]=a*r[2]+o*r[6]+n*r[10]+i*r[14],this.mat4[11]=a*r[3]+o*r[7]+n*r[11]+i*r[15],a=this.mat4[12],o=this.mat4[13],n=this.mat4[14],i=this.mat4[15],this.mat4[12]=a*r[0]+o*r[4]+n*r[8]+i*r[12],this.mat4[13]=a*r[1]+o*r[5]+n*r[9]+i*r[13],this.mat4[14]=a*r[2]+o*r[6]+n*r[10]+i*r[14],this.mat4[15]=a*r[3]+o*r[7]+n*r[11]+i*r[15],this},_.Matrix.prototype.scale=function(e,t,r){return e instanceof _.Vector?(t=e.y,r=e.z,e=e.x):e instanceof Array&&(t=e[1],r=e[2],e=e[0]),this.mat4[0]*=e,this.mat4[1]*=e,this.mat4[2]*=e,this.mat4[3]*=e,this.mat4[4]*=t,this.mat4[5]*=t,this.mat4[6]*=t,this.mat4[7]*=t,this.mat4[8]*=r,this.mat4[9]*=r,this.mat4[10]*=r,this.mat4[11]*=r,this},_.Matrix.prototype.rotate=function(d,a,S,T){var R=this.p5?this.p5._toRadians(d):d;a instanceof _.Vector?(S=a.y,T=a.z,a=a.x):a instanceof Array&&(S=a[1],T=a[2],a=a[0]);var f=Z(a*a+S*S+T*T);a*=1/f,S*=1/f,T*=1/f;var g=this.mat4[0],h=this.mat4[1],i=this.mat4[2],L=this.mat4[3],P=this.mat4[4],l=this.mat4[5],m=this.mat4[6],n=this.mat4[7],o=this.mat4[8],p=this.mat4[9],I=this.mat4[10],r=this.mat4[11],s=W(R),t=Y(R),u=1-t,v=a*a*u+t,w=S*a*u+T*s,x=T*a*u-S*s,y=a*S*u-T*s,M=S*S*u+t,k=T*S*u+a*s,A=a*T*u+S*s,C=S*T*u-a*s,D=T*T*u+t;return this.mat4[0]=g*v+P*w+o*x,this.mat4[1]=h*v+l*w+p*x,this.mat4[2]=i*v+m*w+I*x,this.mat4[3]=L*v+n*w+r*x,this.mat4[4]=g*y+P*M+o*k,this.mat4[5]=h*y+l*M+p*k,this.mat4[6]=i*y+m*M+I*k,this.mat4[7]=L*y+n*M+r*k,this.mat4[8]=g*A+P*C+o*D,this.mat4[9]=h*A+l*C+p*D,this.mat4[10]=i*A+m*C+I*D,this.mat4[11]=L*A+n*C+r*D,this},_.Matrix.prototype.translate=function(e){var t=e[0],r=e[1],a=e[2]||0;this.mat4[12]+=this.mat4[0]*t+this.mat4[4]*r+this.mat4[8]*a,this.mat4[13]+=this.mat4[1]*t+this.mat4[5]*r+this.mat4[9]*a,this.mat4[14]+=this.mat4[2]*t+this.mat4[6]*r+this.mat4[10]*a,this.mat4[15]+=this.mat4[3]*t+this.mat4[7]*r+this.mat4[11]*a},_.Matrix.prototype.rotateX=function(e){this.rotate(e,1,0,0)},_.Matrix.prototype.rotateY=function(e){this.rotate(e,0,1,0)},_.Matrix.prototype.rotateZ=function(e){this.rotate(e,0,0,1)},_.Matrix.prototype.perspective=function(t,r,a,o){var n=1/V(t/2),e=1/(a-o);return this.mat4[0]=n/r,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=n,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(o+a)*e,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*o*a*e,this.mat4[15]=0,this},_.Matrix.prototype.ortho=function(t,r,a,o,n,e){var s=1/(t-r),l=1/(a-o),p=1/(n-e);return this.mat4[0]=-2*s,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*l,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*p,this.mat4[11]=0,this.mat4[12]=(t+r)*s,this.mat4[13]=(o+a)*l,this.mat4[14]=(e+n)*p,this.mat4[15]=1,this},r.exports=_.Matrix},{"../core/main":24}],72:[function(t,r){var o=t("../core/main"),n=t("../core/constants");o.RendererGL.prototype.beginShape=function(e){return this.immediateMode.shapeMode=void 0===e?n.LINE_STRIP:e,void 0===this.immediateMode.vertices?(this.immediateMode.vertices=[],this.immediateMode.edges=[],this.immediateMode.lineVertices=[],this.immediateMode.vertexColors=[],this.immediateMode.lineNormals=[],this.immediateMode.uvCoords=[],this.immediateMode.vertexBuffer=this.GL.createBuffer(),this.immediateMode.colorBuffer=this.GL.createBuffer(),this.immediateMode.uvBuffer=this.GL.createBuffer(),this.immediateMode.lineVertexBuffer=this.GL.createBuffer(),this.immediateMode.lineNormalBuffer=this.GL.createBuffer(),this.immediateMode.pointVertexBuffer=this.GL.createBuffer(),this.immediateMode._bezierVertex=[],this.immediateMode._quadraticVertex=[],this.immediateMode._curveVertex=[]):(this.immediateMode.vertices.length=0,this.immediateMode.edges.length=0,this.immediateMode.lineVertices.length=0,this.immediateMode.lineNormals.length=0,this.immediateMode.vertexColors.length=0,this.immediateMode.uvCoords.length=0),this.isImmediateDrawing=!0,this},o.RendererGL.prototype.vertex=function(t,r){var a,n,i;a=n=i=0,3===arguments.length?a=arguments[2]:4===arguments.length?(n=arguments[2],i=arguments[3]):5===arguments.length&&(a=arguments[2],n=arguments[3],i=arguments[4]);var s=new o.Vector(t,r,a);this.immediateMode.vertices.push(s);var l=this.curFillColor||[.5,.5,.5,1];return this.immediateMode.vertexColors.push(l[0],l[1],l[2],l[3]),this.immediateMode.uvCoords.push(n,i),this.immediateMode._bezierVertex[0]=t,this.immediateMode._bezierVertex[1]=r,this.immediateMode._bezierVertex[2]=a,this.immediateMode._quadraticVertex[0]=t,this.immediateMode._quadraticVertex[1]=r,this.immediateMode._quadraticVertex[2]=a,this},o.RendererGL.prototype.endShape=function(e,t,r,a,s,p){if(this.immediateMode.shapeMode===n.POINTS)this._usePointShader(),this.curPointShader.bindShader(),this._drawPoints(this.immediateMode.vertices,this.immediateMode.pointVertexBuffer),this.curPointShader.unbindShader();else if(1<this.immediateMode.vertices.length){if(this._useImmediateModeShader(),this._doStroke&&this.drawMode!==n.TEXTURE){for(var d=0;d<this.immediateMode.vertices.length-1;d++)this.immediateMode.edges.push([d,d+1]);e===n.CLOSE&&this.immediateMode.edges.push([this.immediateMode.vertices.length-1,0]),o.Geometry.prototype._edgesToVertices.call(this.immediateMode),this._drawStrokeImmediateMode()}if(this._doFill){if(this.isBezier||this.isQuadratic||this.isCurve){var c=[new Float32Array(this._vToNArray(this.immediateMode.vertices))],u=this._triangulate(c);this.immediateMode.vertices=[];for(var h=0,g=u.length;h<g;h+=3)this.vertex(u[h],u[h+1],u[h+2])}this._drawFillImmediateMode(e,t,r,a,s,p)}}return this.immediateMode.vertices.length=0,this.immediateMode.vertexColors.length=0,this.immediateMode.uvCoords.length=0,this.isImmediateDrawing=!1,this.isBezier=!1,this.isQuadratic=!1,this.isCurve=!1,this.immediateMode._bezierVertex.length=0,this.immediateMode._quadraticVertex.length=0,this.immediateMode._curveVertex.length=0,this},o.RendererGL.prototype._drawFillImmediateMode=function(){var e=this.GL;if(this.curFillShader.bindShader(),this.curFillShader.attributes.aPosition&&(this._bindBuffer(this.immediateMode.vertexBuffer,e.ARRAY_BUFFER,this._vToNArray(this.immediateMode.vertices),Float32Array,e.DYNAMIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aPosition.location,3,e.FLOAT,!1,0,0)),this.drawMode===n.FILL&&this.curFillShader.attributes.aVertexColor&&(this._bindBuffer(this.immediateMode.colorBuffer,e.ARRAY_BUFFER,this.immediateMode.vertexColors,Float32Array,e.DYNAMIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aVertexColor.location,4,e.FLOAT,!1,0,0)),this.drawMode===n.TEXTURE&&this.curFillShader.attributes.aTexCoord&&(this._bindBuffer(this.immediateMode.uvBuffer,e.ARRAY_BUFFER,this.immediateMode.uvCoords,Float32Array,e.DYNAMIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aTexCoord.location,2,e.FLOAT,!1,0,0)),this.drawMode===n.FILL||this.drawMode===n.TEXTURE)switch(this.immediateMode.shapeMode){case n.LINE_STRIP:case n.LINES:case n.TRIANGLES:this.immediateMode.shapeMode=this.isBezier||this.isQuadratic||this.isCurve?n.TRIANGLES:n.TRIANGLE_FAN;}else switch(this.immediateMode.shapeMode){case n.LINE_STRIP:case n.LINES:this.immediateMode.shapeMode=n.LINE_LOOP;}if(this.immediateMode.shapeMode===n.QUADS||this.immediateMode.shapeMode===n.QUAD_STRIP)throw new Error("sorry, "+this.immediateMode.shapeMode+" not yet implemented in webgl mode.");this._applyColorBlend(this.curFillColor),e.enable(e.BLEND),e.drawArrays(this.immediateMode.shapeMode,0,this.immediateMode.vertices.length),this._pInst._pixelsDirty=!0,this.curFillShader.unbindShader()},o.RendererGL.prototype._drawStrokeImmediateMode=function(){var e=this.GL;this.curStrokeShader.bindShader(),this.curStrokeShader.attributes.aPosition&&(this._bindBuffer(this.immediateMode.lineVertexBuffer,e.ARRAY_BUFFER,this._flatten(this.immediateMode.lineVertices),Float32Array,e.STATIC_DRAW),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aPosition.location,3,e.FLOAT,!1,0,0)),this.curStrokeShader.attributes.aDirection&&(this._bindBuffer(this.immediateMode.lineNormalBuffer,e.ARRAY_BUFFER,this._flatten(this.immediateMode.lineNormals),Float32Array,e.STATIC_DRAW),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aDirection.location,4,e.FLOAT,!1,0,0)),this._applyColorBlend(this.curStrokeColor),e.drawArrays(e.TRIANGLES,0,this.immediateMode.lineVertices.length),this.curStrokeShader.unbindShader(),this._pInst._pixelsDirty=!0},r.exports=o.RendererGL},{"../core/constants":18,"../core/main":24}],73:[function(t,r){var a=t("../core/main"),o=0;a.RendererGL.prototype._initBufferDefaults=function(e){if(this._freeBuffers(e),1e3<++o){var t=Object.keys(this.gHash)[0];delete this.gHash[t],o--}this.gHash[e]={}},a.RendererGL.prototype._freeBuffers=function(e){var t=this.gHash[e];if(t){delete this.gHash[e],o--;var r=this.GL;t.vertexBuffer&&r.deleteBuffer(t.vertexBuffer),t.normalBuffer&&r.deleteBuffer(t.normalBuffer),t.lineNormalBuffer&&r.deleteBuffer(t.lineNormalBuffer),t.uvBuffer&&r.deleteBuffer(t.uvBuffer),t.indexBuffer&&r.deleteBuffer(t.indexBuffer),t.lineVertexBuffer&&r.deleteBuffer(t.lineVertexBuffer)}},a.RendererGL.prototype.createBuffers=function(e,t){var r=this.GL;this._initBufferDefaults(e);var a=this.gHash[e];return a.numberOfItems=3*t.faces.length,a.lineVertexCount=t.lineVertices.length,this._useColorShader(),this.curStrokeShader.attributes.aPosition&&(a.lineVertexBuffer=r.createBuffer(),this._bindBuffer(a.lineVertexBuffer,r.ARRAY_BUFFER,this._flatten(t.lineVertices),Float32Array,r.STATIC_DRAW),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aPosition.location,3,r.FLOAT,!1,0,0)),this.curStrokeShader.attributes.aDirection&&(a.lineNormalBuffer=r.createBuffer(),this._bindBuffer(a.lineNormalBuffer,r.ARRAY_BUFFER,this._flatten(t.lineNormals),Float32Array,r.STATIC_DRAW),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aDirection.location,4,r.FLOAT,!1,0,0)),this.curFillShader.attributes.aPosition&&(a.vertexBuffer=r.createBuffer(),this._bindBuffer(a.vertexBuffer,r.ARRAY_BUFFER,this._vToNArray(t.vertices),Float32Array,r.STATIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aPosition.location,3,r.FLOAT,!1,0,0)),a.indexBuffer=r.createBuffer(),this._bindBuffer(a.indexBuffer,r.ELEMENT_ARRAY_BUFFER,this._flatten(t.faces),Uint16Array,r.STATIC_DRAW),this.curFillShader.attributes.aNormal&&(a.normalBuffer=r.createBuffer(),this._bindBuffer(a.normalBuffer,r.ARRAY_BUFFER,this._vToNArray(t.vertexNormals),Float32Array,r.STATIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aNormal.location,3,r.FLOAT,!1,0,0)),this.curFillShader.attributes.aTexCoord&&(a.uvBuffer=r.createBuffer(),this._bindBuffer(a.uvBuffer,r.ARRAY_BUFFER,this._flatten(t.uvs),Float32Array,r.STATIC_DRAW),this.curFillShader.enableAttrib(this.curFillShader.attributes.aTexCoord.location,2,r.FLOAT,!1,0,0)),a},a.RendererGL.prototype.drawBuffers=function(e){var t=this.GL;this._useColorShader();var r=this.gHash[e];return this._doStroke&&0<r.lineVertexCount&&(this.curStrokeShader.bindShader(),r.lineVertexBuffer&&(this._bindBuffer(r.lineVertexBuffer,t.ARRAY_BUFFER),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aPosition.location,3,t.FLOAT,!1,0,0)),r.lineNormalBuffer&&(this._bindBuffer(r.lineNormalBuffer,t.ARRAY_BUFFER),this.curStrokeShader.enableAttrib(this.curStrokeShader.attributes.aDirection.location,4,t.FLOAT,!1,0,0)),this._applyColorBlend(this.curStrokeColor),this._drawArrays(t.TRIANGLES,e),this.curStrokeShader.unbindShader()),!1!==this._doFill&&(this.curFillShader.bindShader(),r.vertexBuffer&&(this._bindBuffer(r.vertexBuffer,t.ARRAY_BUFFER),this.curFillShader.enableAttrib(this.curFillShader.attributes.aPosition.location,3,t.FLOAT,!1,0,0)),r.indexBuffer&&this._bindBuffer(r.indexBuffer,t.ELEMENT_ARRAY_BUFFER),r.normalBuffer&&(this._bindBuffer(r.normalBuffer,t.ARRAY_BUFFER),this.curFillShader.enableAttrib(this.curFillShader.attributes.aNormal.location,3,t.FLOAT,!1,0,0)),r.uvBuffer&&(this._bindBuffer(r.uvBuffer,t.ARRAY_BUFFER),this.curFillShader.enableAttrib(this.curFillShader.attributes.aTexCoord.location,2,t.FLOAT,!1,0,0)),this._applyColorBlend(this.curFillColor),this._drawElements(t.TRIANGLES,e),this.curFillShader.unbindShader()),this},a.RendererGL.prototype.drawBuffersScaled=function(t,r,a,o){var n=this.uMVMatrix.copy();try{this.uMVMatrix.scale(r,a,o),this.drawBuffers(t)}finally{this.uMVMatrix=n}},a.RendererGL.prototype._drawArrays=function(e,t){return this.GL.drawArrays(e,0,this.gHash[t].lineVertexCount),this._pInst._pixelsDirty=!0,this},a.RendererGL.prototype._drawElements=function(e,t){this.GL.drawElements(e,this.gHash[t].numberOfItems,this.GL.UNSIGNED_SHORT,0),this._pInst._pixelsDirty=!0},a.RendererGL.prototype._drawPoints=function(e,t){var r=this.GL;this._bindBuffer(t,r.ARRAY_BUFFER,this._vToNArray(e),Float32Array,r.STATIC_DRAW),this.curPointShader.enableAttrib(this.curPointShader.attributes.aPosition.location,3,r.FLOAT,!1,0,0),r.drawArrays(r.Points,0,e.length)},r.exports=a.RendererGL},{"../core/main":24}],74:[function(t,r){var o=t("../core/main"),a=t("../core/constants"),e=t("libtess");t("./p5.Shader"),t("./p5.Camera"),t("../core/p5.Renderer"),t("./p5.Matrix");var n={immediateVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\nuniform float uPointSize;\n\nvarying vec4 vColor;\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n  gl_PointSize = uPointSize;\n}\n",vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}\n",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertTexCoord = aTexCoord;\n}\n",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uViewMatrix;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = normalize(vec3( uNormalMatrix * aNormal ));\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  vec3 ambientLightFactor = vec3(0.0);\n\n  for (int i = 0; i < 8; i++) {\n    if (uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n\n  vec3 directionalLightFactor = vec3(0.0);\n\n  for (int j = 0; j < 8; j++) {\n    if (uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, -dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n\n  vec3 pointLightFactor = vec3(0.0);\n\n  for (int k = 0; k < 8; k++) {\n    if (uPointLightCount == k) break;\n    vec3 loc = (uViewMatrix * vec4(uPointLightLocation[k], 1.0)).xyz;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n\n    float specularLightWeighting = 0.0;\n    if (uSpecular ){\n      vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n      specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n    }\n\n    pointLightFactor += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      + directionalLightWeighting * diffuseFactor);\n  }\n\n  vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n}\n",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uUseLighting;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  gl_FragColor = isTexture ? texture2D(uSampler, vVertTexCoord) : uMaterialColor;\n  if (uUseLighting)\n    gl_FragColor.rgb *= vLightWeighting;\n}",phongVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform vec3 uAmbientColor[8];\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\nuniform int uAmbientLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvoid main(void){\n\n  vec4 viewModelPosition = uModelViewMatrix * vec4(aPosition, 1.0);\n\n  // Pass varyings to fragment shader\n  vViewPosition = viewModelPosition.xyz;\n  gl_Position = uProjectionMatrix * viewModelPosition;  \n\n  vNormal = normalize(uNormalMatrix * normalize(aNormal));\n  vTexCoord = aTexCoord;\n\n  vAmbientColor = vec3(0.0);\n  for (int i = 0; i < 8; i++) {\n    if (uAmbientLightCount == i) break;\n    vAmbientColor += uAmbientColor[i];\n  }\n}\n",phongFrag:"precision mediump float;\n\n//uniform mat4 uModelViewMatrix;\nuniform mat4 uViewMatrix;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\nuniform bool uUseLighting;\n\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec3 vViewPosition;\nvarying vec3 vAmbientColor;\n\nvec3 V;\nvec3 N;\n\nconst float shininess = 32.0;\nconst float specularFactor = 2.0;\nconst float diffuseFactor = 0.73;\n\nstruct LightResult {\n\tfloat specular;\n\tfloat diffuse;\n};\n\nfloat phongSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float shininess) {\n\n  vec3 R = normalize(reflect(-lightDirection, surfaceNormal));  \n  return pow(max(0.0, dot(R, viewDirection)), shininess);\n}\n\nfloat lambertDiffuse(\n  vec3 lightDirection,\n  vec3 surfaceNormal) {\n  return max(0.0, dot(-lightDirection, surfaceNormal));\n}\n\nLightResult light(vec3 lightVector) {\n\n  vec3 L = normalize(lightVector);\n\n  //compute our diffuse & specular terms\n  LightResult lr;\n  if (uSpecular)\n    lr.specular = phongSpecular(L, V, N, shininess);\n  lr.diffuse = lambertDiffuse(L, N);\n  return lr;\n}\n\nvoid main(void) {\n\n  V = normalize(vViewPosition);\n  N = vNormal;\n\n  vec3 diffuse = vec3(0.0);\n  float specular = 0.0;\n\n  for (int j = 0; j < 8; j++) {\n    if (uDirectionalLightCount == j) break;\n\n    LightResult result = light(uLightingDirection[j]);\n    diffuse += result.diffuse * uDirectionalColor[j];\n    specular += result.specular;\n  }\n\n  for (int k = 0; k < 8; k++) {\n    if (uPointLightCount == k) break;\n\n    vec3 lightPosition = (uViewMatrix * vec4(uPointLightLocation[k], 1.0)).xyz;\n    vec3 lightVector = vViewPosition - lightPosition;\n\t\n    //calculate attenuation\n    float lightDistance = length(lightVector);\n    float falloff = 500.0 / (lightDistance + 500.0);\n\n    LightResult result = light(lightVector);\n    diffuse += result.diffuse * falloff * uPointLightColor[k];\n    specular += result.specular * falloff;\n  }\n\n  gl_FragColor = isTexture ? texture2D(uSampler, vTexCoord) : uMaterialColor;\n  gl_FragColor.rgb = gl_FragColor.rgb * (diffuse * diffuseFactor + vAmbientColor) + specular * specularFactor;\n}",fontVert:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nuniform vec4 uGlyphRect;\nuniform float uGlyphOffset;\n\nvarying vec2 vTexCoord;\nvarying float w;\n\nvoid main() {\n  vec4 positionVec4 = vec4(aPosition, 1.0);\n\n  // scale by the size of the glyph's rectangle\n  positionVec4.xy *= uGlyphRect.zw - uGlyphRect.xy;\n\n  // move to the corner of the glyph\n  positionVec4.xy += uGlyphRect.xy;\n\n  // move to the letter's line offset\n  positionVec4.x += uGlyphOffset;\n  \n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vTexCoord = aTexCoord;\n  w = gl_Position.w;\n}\n",fontFrag:"#extension GL_OES_standard_derivatives : enable\nprecision mediump float;\n\n#if 0\n  // simulate integer math using floats\n\t#define int float\n\t#define ivec2 vec2\n\t#define INT(x) float(x)\n\n\tint ifloor(float v) { return floor(v); }\n\tivec2 ifloor(vec2 v) { return floor(v); }\n\n#else\n  // use native integer math\n\tprecision mediump int;\n\t#define INT(x) x\n\n\tint ifloor(float v) { return int(v); }\n\tint ifloor(int v) { return v; }\n\tivec2 ifloor(vec2 v) { return ivec2(v); }\n\n#endif\n\nuniform sampler2D uSamplerStrokes;\nuniform sampler2D uSamplerRowStrokes;\nuniform sampler2D uSamplerRows;\nuniform sampler2D uSamplerColStrokes;\nuniform sampler2D uSamplerCols;\n\nuniform ivec2 uStrokeImageSize;\nuniform ivec2 uCellsImageSize;\nuniform ivec2 uGridImageSize;\n\nuniform ivec2 uGridOffset;\nuniform ivec2 uGridSize;\nuniform vec4 uMaterialColor;\n\nvarying vec2 vTexCoord;\n\n// some helper functions\nint round(float v) { return ifloor(v + 0.5); }\nivec2 round(vec2 v) { return ifloor(v + 0.5); }\nfloat saturate(float v) { return clamp(v, 0.0, 1.0); }\nvec2 saturate(vec2 v) { return clamp(v, 0.0, 1.0); }\n\nint mul(float v1, int v2) {\n  return ifloor(v1 * float(v2));\n}\n\nivec2 mul(vec2 v1, ivec2 v2) {\n  return ifloor(v1 * vec2(v2) + 0.5);\n}\n\n// unpack a 16-bit integer from a float vec2\nint getInt16(vec2 v) {\n  ivec2 iv = round(v * 255.0);\n  return iv.x * INT(128) + iv.y;\n}\n\nvec2 pixelScale;\nvec2 coverage = vec2(0.0);\nvec2 weight = vec2(0.5);\nconst float minDistance = 1.0/8192.0;\nconst float hardness = 1.05; // amount of antialias\n\n// the maximum number of curves in a glyph\nconst int N = INT(250);\n\n// retrieves an indexed pixel from a sampler\nvec4 getTexel(sampler2D sampler, int pos, ivec2 size) {\n  int width = size.x;\n  int y = ifloor(pos / width);\n  int x = pos - y * width;  // pos % width\n\n  return texture2D(sampler, (vec2(x, y) + 0.5) / vec2(size));\n}\n\nvoid calulateCrossings(vec2 p0, vec2 p1, vec2 p2, out vec2 C1, out vec2 C2) {\n\n  // get the coefficients of the quadratic in t\n  vec2 a = p0 - p1 * 2.0 + p2;\n  vec2 b = p0 - p1;\n  vec2 c = p0 - vTexCoord;\n\n  // found out which values of 't' it crosses the axes\n  vec2 surd = sqrt(max(vec2(0.0), b * b - a * c));\n  vec2 t1 = ((b - surd) / a).yx;\n  vec2 t2 = ((b + surd) / a).yx;\n\n  // approximate straight lines to avoid rounding errors\n  if (abs(a.y) < 0.001)\n    t1.x = t2.x = c.y / (2.0 * b.y);\n\n  if (abs(a.x) < 0.001)\n    t1.y = t2.y = c.x / (2.0 * b.x);\n\n  // plug into quadratic formula to find the corrdinates of the crossings\n  C1 = ((a * t1 - b * 2.0) * t1 + c) * pixelScale;\n  C2 = ((a * t2 - b * 2.0) * t2 + c) * pixelScale;\n}\n\nvoid coverageX(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  // determine on which side of the x-axis the points lie\n  bool y0 = p0.y > vTexCoord.y;\n  bool y1 = p1.y > vTexCoord.y;\n  bool y2 = p2.y > vTexCoord.y;\n\n  // could web be under the curve (after t1)?\n  if (y1 ? !y2 : y0) {\n    // add the coverage for t1\n    coverage.x += saturate(C1.x + 0.5);\n    // calculate the anti-aliasing for t1\n    weight.x = min(weight.x, abs(C1.x));\n  }\n\n  // are we outside the curve (after t2)?\n  if (y1 ? !y0 : y2) {\n    // subtract the coverage for t2\n    coverage.x -= saturate(C2.x + 0.5);\n    // calculate the anti-aliasing for t2\n    weight.x = min(weight.x, abs(C2.x));\n  }\n}\n\n// this is essentially the same as coverageX, but with the axes swapped\nvoid coverageY(vec2 p0, vec2 p1, vec2 p2) {\n\n  vec2 C1, C2;\n  calulateCrossings(p0, p1, p2, C1, C2);\n\n  bool x0 = p0.x > vTexCoord.x;\n  bool x1 = p1.x > vTexCoord.x;\n  bool x2 = p2.x > vTexCoord.x;\n\n  if (x1 ? !x2 : x0) {\n    coverage.y -= saturate(C1.y + 0.5);\n    weight.y = min(weight.y, abs(C1.y));\n  }\n\n  if (x1 ? !x0 : x2) {\n    coverage.y += saturate(C2.y + 0.5);\n    weight.y = min(weight.y, abs(C2.y));\n  }\n}\n\nvoid main() {\n\n  // calculate the pixel scale based on screen-coordinates\n  pixelScale = hardness / fwidth(vTexCoord);\n\n  // which grid cell is this pixel in?\n  ivec2 gridCoord = ifloor(vTexCoord * vec2(uGridSize));\n\n  // intersect curves in this row\n  {\n    // the index into the row info bitmap\n    int rowIndex = gridCoord.y + uGridOffset.y;\n    // fetch the info texel\n    vec4 rowInfo = getTexel(uSamplerRows, rowIndex, uGridImageSize);\n    // unpack the rowInfo\n    int rowStrokeIndex = getInt16(rowInfo.xy);\n    int rowStrokeCount = getInt16(rowInfo.zw);\n\n    for (int iRowStroke = INT(0); iRowStroke < N; iRowStroke++) {\n      if (iRowStroke >= rowStrokeCount)\n        break;\n\n      // each stroke is made up of 3 points: the start and control point\n      // and the start of the next curve.\n      // fetch the indices of this pair of strokes:\n      vec4 strokeIndices = getTexel(uSamplerRowStrokes, rowStrokeIndex++, uCellsImageSize);\n\n      // unpack the stroke index\n      int strokePos = getInt16(strokeIndices.xy);\n\n      // fetch the two strokes\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n\n      // calculate the coverage\n      coverageX(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  // intersect curves in this column\n  {\n    int colIndex = gridCoord.x + uGridOffset.x;\n    vec4 colInfo = getTexel(uSamplerCols, colIndex, uGridImageSize);\n    int colStrokeIndex = getInt16(colInfo.xy);\n    int colStrokeCount = getInt16(colInfo.zw);\n    \n    for (int iColStroke = INT(0); iColStroke < N; iColStroke++) {\n      if (iColStroke >= colStrokeCount)\n        break;\n\n      vec4 strokeIndices = getTexel(uSamplerColStrokes, colStrokeIndex++, uCellsImageSize);\n\n      int strokePos = getInt16(strokeIndices.xy);\n      vec4 stroke0 = getTexel(uSamplerStrokes, strokePos + INT(0), uStrokeImageSize);\n      vec4 stroke1 = getTexel(uSamplerStrokes, strokePos + INT(1), uStrokeImageSize);\n      coverageY(stroke0.xy, stroke0.zw, stroke1.xy);\n    }\n  }\n\n  weight = saturate(1.0 - weight * 2.0);\n  float distance = max(weight.x + weight.y, minDistance); // manhattan approx.\n  float antialias = abs(dot(coverage, weight) / distance);\n  float cover = min(abs(coverage.x), abs(coverage.y));\n  gl_FragColor = uMaterialColor;\n  gl_FragColor.a *= saturate(max(antialias, cover));\n}",lineVert:"/*\n  Part of the Processing project - http://processing.org\n  Copyright (c) 2012-15 The Processing Foundation\n  Copyright (c) 2004-12 Ben Fry and Casey Reas\n  Copyright (c) 2001-04 Massachusetts Institute of Technology\n  This library is free software; you can redistribute it and/or\n  modify it under the terms of the GNU Lesser General Public\n  License as published by the Free Software Foundation, version 2.1.\n  This library is distributed in the hope that it will be useful,\n  but WITHOUT ANY WARRANTY; without even the implied warranty of\n  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n  Lesser General Public License for more details.\n  You should have received a copy of the GNU Lesser General\n  Public License along with this library; if not, write to the\n  Free Software Foundation, Inc., 59 Temple Place, Suite 330,\n  Boston, MA  02111-1307  USA\n*/\n\n#define PROCESSING_LINE_SHADER\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uStrokeWeight;\n\nuniform vec4 uViewport;\n\n// using a scale <1 moves the lines towards the camera\n// in order to prevent popping effects due to half of\n// the line disappearing behind the geometry faces.\nvec3 scale = vec3(0.9995);\n\nattribute vec4 aPosition;\nattribute vec4 aDirection;\n  \nvoid main() {\n  vec4 posp = uModelViewMatrix * aPosition;\n  vec4 posq = uModelViewMatrix * (aPosition + vec4(aDirection.xyz, 0));\n\n  // Moving vertices slightly toward the camera\n  // to avoid depth-fighting with the fill triangles.\n  // Discussed here:\n  // http://www.opengl.org/discussion_boards/ubbthreads.php?ubb=showflat&Number=252848  \n  posp.xyz = posp.xyz * scale;\n  posq.xyz = posq.xyz * scale;\n\n  vec4 p = uProjectionMatrix * posp;\n  vec4 q = uProjectionMatrix * posq;\n\n  // formula to convert from clip space (range -1..1) to screen space (range 0..[width or height])\n  // screen_p = (p.xy/p.w + <1,1>) * 0.5 * uViewport.zw\n\n  // prevent division by W by transforming the tangent formula (div by 0 causes\n  // the line to disappear, see https://github.com/processing/processing/issues/5183)\n  // t = screen_q - screen_p\n  //\n  // tangent is normalized and we don't care which aDirection it points to (+-)\n  // t = +- normalize( screen_q - screen_p )\n  // t = +- normalize( (q.xy/q.w+<1,1>)*0.5*uViewport.zw - (p.xy/p.w+<1,1>)*0.5*uViewport.zw )\n  //\n  // extract common factor, <1,1> - <1,1> cancels out\n  // t = +- normalize( (q.xy/q.w - p.xy/p.w) * 0.5 * uViewport.zw )\n  //\n  // convert to common divisor\n  // t = +- normalize( ((q.xy*p.w - p.xy*q.w) / (p.w*q.w)) * 0.5 * uViewport.zw )\n  //\n  // remove the common scalar divisor/factor, not needed due to normalize and +-\n  // (keep uViewport - can't remove because it has different components for x and y\n  //  and corrects for aspect ratio, see https://github.com/processing/processing/issues/5181)\n  // t = +- normalize( (q.xy*p.w - p.xy*q.w) * uViewport.zw )\n\n  vec2 tangent = normalize((q.xy*p.w - p.xy*q.w) * uViewport.zw);\n\n  // flip tangent to normal (it's already normalized)\n  vec2 normal = vec2(-tangent.y, tangent.x);\n\n  float thickness = aDirection.w * uStrokeWeight;\n  vec2 offset = normal * thickness / 2.0;\n\n  // Perspective ---\n  // convert from world to clip by multiplying with projection scaling factor\n  // to get the right thickness (see https://github.com/processing/processing/issues/5182)\n  // invert Y, projections in Processing invert Y\n  vec2 perspScale = (uProjectionMatrix * vec4(1, -1, 0, 0)).xy;\n\n  // No Perspective ---\n  // multiply by W (to cancel out division by W later in the pipeline) and\n  // convert from screen to clip (derived from clip to screen above)\n  vec2 noPerspScale = p.w / (0.5 * uViewport.zw);\n\n  //gl_Position.xy = p.xy + offset.xy * mix(noPerspScale, perspScale, float(perspective > 0));\n  gl_Position.xy = p.xy + offset.xy * perspScale;\n  gl_Position.zw = p.zw;\n}\n",lineFrag:"precision mediump float;\nprecision mediump int;\n\nuniform vec4 uMaterialColor;\n\nvoid main() {\n  gl_FragColor = uMaterialColor;\n}",pointVert:"attribute vec3 aPosition;\nuniform float uPointSize;\nvarying float vStrokeWeight;\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nvoid main() {\n\tvec4 positionVec4 =  vec4(aPosition, 1.0);\n\tgl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\tgl_PointSize = uPointSize;\n\tvStrokeWeight = uPointSize;\n}",pointFrag:"precision mediump float;\nprecision mediump int;\nuniform vec4 uMaterialColor;\nvarying float vStrokeWeight;\n\nvoid main(){\n\tfloat mask = 0.0;\n\n\t// make a circular mask using the gl_PointCoord (goes from 0 - 1 on a point)\n    // might be able to get a nicer edge on big strokeweights with smoothstep but slightly less performant\n\n\tmask = step(0.98, length(gl_PointCoord * 2.0 - 1.0));\n\n\t// if strokeWeight is 1 or less lets just draw a square\n\t// this prevents weird artifacting from carving circles when our points are really small\n\t// if strokeWeight is larger than 1, we just use it as is\n\n\tmask = mix(0.0, mask, clamp(floor(vStrokeWeight - 0.5),0.0,1.0));\n\n\t// throw away the borders of the mask\n    // otherwise we get weird alpha blending issues\n\n\tif(mask > 0.98){\n      discard;\n  \t}\n\n  \tgl_FragColor = vec4(uMaterialColor.rgb * (1.0 - mask), uMaterialColor.a) ;\n}"};o.RendererGL=function(t,r,a,n){return o.Renderer.call(this,t,r,a),this.attributes={},n=n||{},this.attributes.alpha=void 0===n.alpha||n.alpha,this.attributes.depth=void 0===n.depth||n.depth,this.attributes.stencil=void 0===n.stencil||n.stencil,this.attributes.antialias=void 0!==n.antialias&&n.antialias,this.attributes.premultipliedAlpha=void 0!==n.premultipliedAlpha&&n.premultipliedAlpha,this.attributes.preserveDrawingBuffer=void 0===n.preserveDrawingBuffer||n.preserveDrawingBuffer,this.attributes.perPixelLighting=void 0!==n.perPixelLighting&&n.perPixelLighting,this._initContext(),this.isP3D=!0,this.GL=this.drawingContext,this.ambientLightColors=[],this.directionalLightDirections=[],this.directionalLightColors=[],this.pointLightPositions=[],this.pointLightColors=[],this.uMVMatrix=new o.Matrix,this.uPMatrix=new o.Matrix,this.uNMatrix=new o.Matrix("mat3"),this._curCamera=new o.Camera(this),this._curCamera._computeCameraDefaultSettings(),this._curCamera._setDefaultCamera(),this.gHash={},this._defaultLightShader=void 0,this._defaultImmediateModeShader=void 0,this._defaultNormalShader=void 0,this._defaultColorShader=void 0,this._defaultPointShader=void 0,this.curFillShader=void 0,this.curStrokeShader=void 0,this.curPointShader=void 0,this._useColorShader(),this.setStrokeShader(this._getLineShader()),this._usePointShader(),this._pointVertexBuffer=this.GL.createBuffer(),this.isImmediateDrawing=!1,this.immediateMode={},this.fill(255,255,255,255),this.pointSize=5,this.strokeWeight(1),this.stroke(0,0,0),this.textures=[],this._curveTightness=6,this._lookUpTableBezier=[],this._lookUpTableQuadratic=[],this._lutBezierDetail=0,this._lutQuadraticDetail=0,this._tessy=this._initTessy(),this.fontInfos={},this},o.RendererGL.prototype=Object.create(o.Renderer.prototype),o.RendererGL.prototype._initContext=function(){try{if(this.drawingContext=this.canvas.getContext("webgl",this.attributes)||this.canvas.getContext("experimental-webgl",this.attributes),null===this.drawingContext)throw new Error("Error creating webgl context");console.log("p5.RendererGL: enabled webgl context");var e=this.drawingContext;e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this._viewport=this.drawingContext.getParameter(this.drawingContext.VIEWPORT)}catch(e){throw e}},o.RendererGL.prototype._resetContext=function(t,r,a){var n=this.width,e=this.height,s=this.canvas.id,l=this.canvas;l&&l.parentNode.removeChild(l),l=document.createElement("canvas"),l.id=s,this._pInst._userNode?this._pInst._userNode.appendChild(l):document.body.appendChild(l),this._pInst.canvas=l;var p=new o.RendererGL(this._pInst.canvas,this._pInst,!0,t);this._pInst._setProperty("_renderer",p),p.resize(n,e),p._applyDefaults(),this._pInst._elements.push(p),"function"==typeof a&&setTimeout(function(){a.apply(window._renderer,r)},0)},o.prototype.setAttributes=function(e,t){this._assert3d("setAttributes");var r;void 0===t?e instanceof Object&&(r=e):(r={},r[e]=t),this.push(),this._renderer._resetContext(r),this.pop()},o.RendererGL.prototype._update=function(){this.uMVMatrix.set(this._curCamera.cameraMatrix.mat4[0],this._curCamera.cameraMatrix.mat4[1],this._curCamera.cameraMatrix.mat4[2],this._curCamera.cameraMatrix.mat4[3],this._curCamera.cameraMatrix.mat4[4],this._curCamera.cameraMatrix.mat4[5],this._curCamera.cameraMatrix.mat4[6],this._curCamera.cameraMatrix.mat4[7],this._curCamera.cameraMatrix.mat4[8],this._curCamera.cameraMatrix.mat4[9],this._curCamera.cameraMatrix.mat4[10],this._curCamera.cameraMatrix.mat4[11],this._curCamera.cameraMatrix.mat4[12],this._curCamera.cameraMatrix.mat4[13],this._curCamera.cameraMatrix.mat4[14],this._curCamera.cameraMatrix.mat4[15]),this.ambientLightColors.length=0,this.directionalLightDirections.length=0,this.directionalLightColors.length=0,this.pointLightPositions.length=0,this.pointLightColors.length=0},o.RendererGL.prototype.background=function(){var t=this._pInst.color.apply(this._pInst,arguments),r=t.levels[0]/255,a=t.levels[1]/255,o=t.levels[2]/255,n=t.levels[3]/255;this.GL.clearColor(r,a,o,n),this.GL.depthMask(!0),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},o.RendererGL.prototype.fill=function(){var e=o.prototype.color.apply(this._pInst,arguments);this.curFillColor=e._array,this.isImmediateDrawing?this.setFillShader(this._getImmediateModeShader()):this.setFillShader(this._getColorShader()),this.drawMode=a.FILL,this.curFillShader.setUniform("uMaterialColor",this.curFillColor)},o.RendererGL.prototype.stroke=function(){arguments[3]=255;var e=o.prototype.color.apply(this._pInst,arguments);this.curStrokeColor=e._array,this.curStrokeShader.setUniform("uMaterialColor",this.curStrokeColor),this.curPointShader.setUniform("uMaterialColor",e._array)},o.RendererGL.prototype.strokeWeight=function(e){this.curStrokeWeight!==e&&(this.pointSize=e,this.curStrokeWeight=e,this.curStrokeShader.setUniform("uStrokeWeight",e),this.curPointShader.setUniform("uPointSize",e))},o.RendererGL.prototype.get=function(t,r,a,n){return o.Renderer2D.prototype.get.apply(this,[t,r,a,n])},o.RendererGL.prototype.loadPixels=function(){if(!0!==this.attributes.preserveDrawingBuffer)return void console.log("loadPixels only works in WebGL when preserveDrawingBuffer is true.");var e=this._pInst._pixelDensity,t=this.width,r=this.height;t*=e,r*=e,void 0===this.pixels&&(this.pixels=new Uint8Array(4*(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight))),this.GL.readPixels(0,0,t,r,this.GL.RGBA,this.GL.UNSIGNED_BYTE,this.pixels),this._pInst._setProperty("pixels",this.pixels)},o.RendererGL.prototype.geometryInHash=function(e){return void 0!==this.gHash[e]},o.RendererGL.prototype.resize=function(e,t){o.Renderer.prototype.resize.call(this,e,t),this.GL.viewport(0,0,this.GL.drawingBufferWidth,this.GL.drawingBufferHeight),this._viewport=this.GL.getParameter(this.GL.VIEWPORT),this._curCamera._resize(),void 0!==this.pixels&&(this.pixels=new Uint8Array(4*(this.GL.drawingBufferWidth*this.GL.drawingBufferHeight)))},o.RendererGL.prototype.clear=function(){var e=arguments[0]||0,t=arguments[1]||0,r=arguments[2]||0,a=arguments[3]||0;this.GL.clearColor(e,t,r,a),this.GL.clear(this.GL.COLOR_BUFFER_BIT|this.GL.DEPTH_BUFFER_BIT)},o.RendererGL.prototype.translate=function(e,t,r){return e instanceof o.Vector&&(r=e.z,t=e.y,e=e.x),this.uMVMatrix.translate([e,t,r]),this},o.RendererGL.prototype.scale=function(e,t,r){return this.uMVMatrix.scale(e,t,r),this},o.RendererGL.prototype.rotate=function(e,t){return void 0===t?this.rotateZ(e):(arguments[0]=this._pInst._fromRadians(e),o.Matrix.prototype.rotate.apply(this.uMVMatrix,arguments),this)},o.RendererGL.prototype.rotateX=function(e){return this.rotate(e,1,0,0),this},o.RendererGL.prototype.rotateY=function(e){return this.rotate(e,0,1,0),this},o.RendererGL.prototype.rotateZ=function(e){return this.rotate(e,0,0,1),this},o.RendererGL.prototype.push=function(){var e=o.Renderer.prototype.push.apply(this),t=e.properties;return t.uMVMatrix=this.uMVMatrix.copy(),t.uPMatrix=this.uPMatrix.copy(),t._curCamera=this._curCamera,this._curCamera=this._curCamera.copy(),e},o.RendererGL.prototype.resetMatrix=function(){return this.uMVMatrix=o.Matrix.identity(this._pInst),this},o.RendererGL.prototype.setFillShader=function(e){return this.curFillShader!==e&&(this.curFillShader=e,this.curFillShader.init()),this.curFillShader},o.RendererGL.prototype.setPointShader=function(e){return this.curPointShader!==e&&(this.curPointShader=e,this.curPointShader.init()),this.curPointShader},o.RendererGL.prototype.setStrokeShader=function(e){return this.curStrokeShader!==e&&(this.curStrokeShader=e,this.curStrokeShader.init()),this.curStrokeShader},o.RendererGL.prototype._useLightShader=function(){return this.curFillShader&&this.curFillShader.isLightShader()||this.setFillShader(this._getLightShader()),this.curFillShader},o.RendererGL.prototype._useColorShader=function(){return this.curFillShader&&this.curFillShader!==this._defaultImmediateModeShader||this.setFillShader(this._getColorShader()),this.curFillShader},o.RendererGL.prototype._usePointShader=function(){return this.curPointShader||this.setPointShader(this._getPointShader()),this.curPointShader},o.RendererGL.prototype._useImmediateModeShader=function(){return this.curFillShader&&this.curFillShader!==this._defaultColorShader||this.setFillShader(this._getImmediateModeShader()),this.curFillShader},o.RendererGL.prototype._getLightShader=function(){return this._defaultLightShader||(this.attributes.perPixelLighting?this._defaultLightShader=new o.Shader(this,n.phongVert,n.phongFrag):this._defaultLightShader=new o.Shader(this,n.lightVert,n.lightTextureFrag)),this._defaultLightShader},o.RendererGL.prototype._getImmediateModeShader=function(){return this._defaultImmediateModeShader||(this._defaultImmediateModeShader=new o.Shader(this,n.immediateVert,n.vertexColorFrag)),this._defaultImmediateModeShader},o.RendererGL.prototype._getNormalShader=function(){return this._defaultNormalShader||(this._defaultNormalShader=new o.Shader(this,n.normalVert,n.normalFrag)),this._defaultNormalShader},o.RendererGL.prototype._getColorShader=function(){return this._defaultColorShader||(this._defaultColorShader=new o.Shader(this,n.normalVert,n.basicFrag)),this._defaultColorShader},o.RendererGL.prototype._getPointShader=function(){return this._defaultPointShader||(this._defaultPointShader=new o.Shader(this,n.pointVert,n.pointFrag)),this._defaultPointShader},o.RendererGL.prototype._getLineShader=function(){return this._defaultLineShader||(this._defaultLineShader=new o.Shader(this,n.lineVert,n.lineFrag)),this._defaultLineShader},o.RendererGL.prototype._getFontShader=function(){return this._defaultFontShader||(this.GL.getExtension("OES_standard_derivatives"),this._defaultFontShader=new o.Shader(this,n.fontVert,n.fontFrag)),this._defaultFontShader},o.RendererGL.prototype._getEmptyTexture=function(){if(!this._emptyTexture){var e=new o.Image(1,1);e.set(0,0,255),this._emptyTexture=new o.Texture(this,e)}return this._emptyTexture},o.RendererGL.prototype.getTexture=function(t){for(var r=this.textures,a=0,n;a<r.length;++a)if(n=r[a],n.src===t)return n;var i=new o.Texture(this,t);return this.textures.push(i),i},o.RendererGL.prototype._bindBuffer=function(t,r,a,o,n){if(this.GL.bindBuffer(r,t),void 0!==a){var e=new o(a);this.GL.bufferData(r,e,n)}},o.RendererGL.prototype.smooth=function(){!1===this.attributes.antialias&&this._pInst.setAttributes("antialias",!0)},o.RendererGL.prototype.noSmooth=function(){!0===this.attributes.antialias&&this._pInst.setAttributes("antialias",!1)},o.RendererGL.prototype._flatten=function(t){if(0===t.length)return[];if(2e4<t.length){var r=Object.prototype.toString,a=[],e=t.slice(),o;o=e.pop();do"[object Array]"===r.call(o)?e.push.apply(e,o):a.push(o);while(e.length&&void 0!==(o=e.pop()));return a.reverse(),a}return[].concat.apply([],t)},o.RendererGL.prototype._vToNArray=function(e){return this._flatten(e.map(function(e){return[e.x,e.y,e.z]}))},o.prototype._assert3d=function(e){if(!this._renderer.isP3D)throw new Error(e+"() is only supported in WEBGL mode. If you'd like to use 3D graphics and WebGL, see  https://p5js.org/examples/form-3d-primitives.html for more information.")},o.RendererGL.prototype._initTessy=function(){function t(e,t){t[t.length]=e[0],t[t.length]=e[1],t[t.length]=e[2]}var r=new e.GluTesselator;return r.gluTessCallback(e.gluEnum.GLU_TESS_VERTEX_DATA,t),r.gluTessCallback(e.gluEnum.GLU_TESS_BEGIN,function(t){t!==e.primitiveType.GL_TRIANGLES&&console.log("expected TRIANGLES but got type: "+t)}),r.gluTessCallback(e.gluEnum.GLU_TESS_ERROR,function(e){console.log("error callback"),console.log("error number: "+e)}),r.gluTessCallback(e.gluEnum.GLU_TESS_COMBINE,function(e){return[e[0],e[1],e[2]]}),r.gluTessCallback(e.gluEnum.GLU_TESS_EDGE_FLAG,function(){}),r},o.RendererGL.prototype._triangulate=function(t){this._tessy.gluTessNormal(0,0,1);var r=[];this._tessy.gluTessBeginPolygon(r);for(var a=0;a<t.length;a++){this._tessy.gluTessBeginContour();for(var o=t[a],n=0,i;n<o.length;n+=3)i=[o[n],o[n+1],o[n+2]],this._tessy.gluTessVertex(i,i);this._tessy.gluTessEndContour()}return this._tessy.gluTessEndPolygon(),r},o.RendererGL.prototype._bezierCoefficients=function(t){var r=t*t,a=1-t,o=a*a;return[o*a,3*o*t,3*a*r,r*t]},o.RendererGL.prototype._quadraticCoefficients=function(e){var t=1-e;return[t*t,2*t*e,e*e]},o.RendererGL.prototype._bezierToCatmull=function(e){return[e[1],e[1]+(e[2]-e[0])/this._curveTightness,e[2]-(e[3]-e[1])/this._curveTightness,e[2]]},r.exports=o.RendererGL},{"../core/constants":18,"../core/main":24,"../core/p5.Renderer":27,"./p5.Camera":69,"./p5.Matrix":71,"./p5.Shader":75,libtess:9}],75:[function(e,t){var r=e("../core/main");r.Shader=function(e,t,r){this._renderer=e,this._vertSrc=t,this._fragSrc=r,this._vertShader=-1,this._fragShader=-1,this._glProgram=0,this._loadedAttributes=!1,this.attributes={},this._loadedUniforms=!1,this.uniforms={},this._bound=!1,this.samplers=[]},r.Shader.prototype.init=function(){if(0===this._glProgram){var e=this._renderer.GL;if(this._vertShader=e.createShader(e.VERTEX_SHADER),e.shaderSource(this._vertShader,this._vertSrc),e.compileShader(this._vertShader),!e.getShaderParameter(this._vertShader,e.COMPILE_STATUS))return console.error("Yikes! An error occurred compiling the vertex shader:"+e.getShaderInfoLog(this._vertShader)),null;if(this._fragShader=e.createShader(e.FRAGMENT_SHADER),e.shaderSource(this._fragShader,this._fragSrc),e.compileShader(this._fragShader),!e.getShaderParameter(this._fragShader,e.COMPILE_STATUS))return console.error("Darn! An error occurred compiling the fragment shader:"+e.getShaderInfoLog(this._fragShader)),null;this._glProgram=e.createProgram(),e.attachShader(this._glProgram,this._vertShader),e.attachShader(this._glProgram,this._fragShader),e.linkProgram(this._glProgram),e.getProgramParameter(this._glProgram,e.LINK_STATUS)||console.error("Snap! Error linking shader program: "+e.getProgramInfoLog(this._glProgram)),this._loadAttributes(),this._loadUniforms()}return this},r.Shader.prototype._loadAttributes=function(){if(!this._loadedAttributes){this.attributes={};for(var t=this._renderer.GL,r=t.getProgramParameter(this._glProgram,t.ACTIVE_ATTRIBUTES),a=0;a<r;++a){var o=t.getActiveAttrib(this._glProgram,a),n=o.name,e=t.getAttribLocation(this._glProgram,n),i={};i.name=n,i.location=e,i.type=o.type,i.size=o.size,this.attributes[n]=i}this._loadedAttributes=!0}},r.Shader.prototype._loadUniforms=function(){if(!this._loadedUniforms){for(var t=this._renderer.GL,r=t.getProgramParameter(this._glProgram,t.ACTIVE_UNIFORMS),a=0,o=0;o<r;++o){var n=t.getActiveUniform(this._glProgram,o),e={};e.location=t.getUniformLocation(this._glProgram,n.name),e.size=n.size;var i=n.name;1<n.size&&(i=i.substring(0,i.indexOf("[0]"))),e.name=i,e.type=n.type,e.type===t.SAMPLER_2D&&(e.samplerIndex=a,a++,this.samplers.push(e)),this.uniforms[i]=e}this._loadedUniforms=!0}},r.Shader.prototype.compile=function(){},r.Shader.prototype.bindShader=function(){this.init(),this._bound||(this.useProgram(),this._bound=!0,this.bindTextures(),this._setMatrixUniforms(),this===this._renderer.curStrokeShader&&this._setViewportUniform())},r.Shader.prototype.unbindShader=function(){return this._bound&&(this.unbindTextures(),this._bound=!1),this},r.Shader.prototype.bindTextures=function(){for(var e=this._renderer.GL,t=0;t<this.samplers.length;t++){var r=this.samplers[t],a=r.texture;void 0===a&&(a=this._renderer._getEmptyTexture()),e.activeTexture(e.TEXTURE0+r.samplerIndex),a.bindTexture(),a.update(),e.uniform1i(r.location,r.samplerIndex)}},r.Shader.prototype.updateTextures=function(){for(var e=0;e<this.samplers.length;e++){var t=this.samplers[e],r=t.texture;r&&r.update()}},r.Shader.prototype.unbindTextures=function(){},r.Shader.prototype._setMatrixUniforms=function(){this.setUniform("uProjectionMatrix",this._renderer.uPMatrix.mat4),this.setUniform("uModelViewMatrix",this._renderer.uMVMatrix.mat4),this.setUniform("uViewMatrix",this._renderer._curCamera.cameraMatrix.mat4),this===this._renderer.curFillShader&&(this._renderer.uNMatrix.inverseTranspose(this._renderer.uMVMatrix),this.setUniform("uNormalMatrix",this._renderer.uNMatrix.mat3))},r.Shader.prototype._setViewportUniform=function(){this.setUniform("uViewport",this._renderer._viewport)},r.Shader.prototype.useProgram=function(){return this._renderer.GL.useProgram(this._glProgram),this},r.Shader.prototype.setUniform=function(t,r){var a=this.uniforms[t];if(a){var o=a.location,n=this._renderer.GL;switch(this.useProgram(),a.type){case n.BOOL:!0===r?n.uniform1i(o,1):n.uniform1i(o,0);break;case n.INT:1<a.size?r.length&&n.uniform1iv(o,r):n.uniform1i(o,r);break;case n.FLOAT:1<a.size?r.length&&n.uniform1fv(o,r):n.uniform1f(o,r);break;case n.FLOAT_MAT3:n.uniformMatrix3fv(o,!1,r);break;case n.FLOAT_MAT4:n.uniformMatrix4fv(o,!1,r);break;case n.FLOAT_VEC2:1<a.size?r.length&&n.uniform2fv(o,r):n.uniform2f(o,r[0],r[1]);break;case n.FLOAT_VEC3:1<a.size?r.length&&n.uniform3fv(o,r):n.uniform3f(o,r[0],r[1],r[2]);break;case n.FLOAT_VEC4:1<a.size?r.length&&n.uniform4fv(o,r):n.uniform4f(o,r[0],r[1],r[2],r[3]);break;case n.INT_VEC2:1<a.size?r.length&&n.uniform2iv(o,r):n.uniform2i(o,r[0],r[1]);break;case n.INT_VEC3:1<a.size?r.length&&n.uniform3iv(o,r):n.uniform3i(o,r[0],r[1],r[2]);break;case n.INT_VEC4:1<a.size?r.length&&n.uniform4iv(o,r):n.uniform4i(o,r[0],r[1],r[2],r[3]);break;case n.SAMPLER_2D:n.activeTexture(n.TEXTURE0+a.samplerIndex),a.texture=this._renderer.getTexture(r),n.uniform1i(a.location,a.samplerIndex);}return this}},r.Shader.prototype.isLightShader=function(){return void 0!==this.uniforms.uUseLighting||void 0!==this.uniforms.uAmbientLightCount||void 0!==this.uniforms.uDirectionalLightCount||void 0!==this.uniforms.uPointLightCount||void 0!==this.uniforms.uAmbientColor||void 0!==this.uniforms.uDirectionalColor||void 0!==this.uniforms.uPointLightLocation||void 0!==this.uniforms.uPointLightColor||void 0!==this.uniforms.uLightingDirection||void 0!==this.uniforms.uSpecular},r.Shader.prototype.isTextureShader=function(){return 0<this.samplerIndex},r.Shader.prototype.isColorShader=function(){return void 0!==this.attributes.aVertexColor||void 0!==this.uniforms.uMaterialColor},r.Shader.prototype.isTexLightShader=function(){return this.isLightShader()&&this.isTextureShader()},r.Shader.prototype.isStrokeShader=function(){return void 0!==this.uniforms.uStrokeWeight},r.Shader.prototype.enableAttrib=function(t,r,a,o,n,e){var i=this._renderer.GL;return-1!==t&&(i.enableVertexAttribArray(t),i.vertexAttribPointer(t,r,a,o,n,e)),this},t.exports=r.Shader},{"../core/main":24}],76:[function(t,r){var o=t("../core/main"),n=t("../core/constants");o.Texture=function(t,r){this._renderer=t;var a=this._renderer.GL;this.src=r,this.glTex=void 0,this.glTarget=a.TEXTURE_2D,this.glFormat=a.RGBA,this.mipmaps=!1,this.glMinFilter=a.LINEAR,this.glMagFilter=a.LINEAR,this.glWrapS=a.CLAMP_TO_EDGE,this.glWrapT=a.CLAMP_TO_EDGE,this.isSrcMediaElement=void 0!==o.MediaElement&&r instanceof o.MediaElement,this._videoPrevUpdateTime=0,this.isSrcHTMLElement=void 0!==o.Element&&r instanceof o.Element&&!(r instanceof o.Graphics),this.isSrcP5Image=r instanceof o.Image,this.isSrcP5Graphics=r instanceof o.Graphics,this.isImageData="undefined"!=typeof ImageData&&r instanceof ImageData;var n=this._getTextureDataFromSource();return this.width=n.width,this.height=n.height,this.init(n),this},o.Texture.prototype._getTextureDataFromSource=function(){var e;return this.isSrcP5Image?e=this.src.canvas:this.isSrcMediaElement||this.isSrcP5Graphics||this.isSrcHTMLElement?e=this.src.elt:this.isImageData&&(e=this.src),e},o.Texture.prototype.init=function(e){var t=this._renderer.GL;if(this.glTex=t.createTexture(),this.bindTexture(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,this.glMagFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,this.glMinFilter),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.glWrapS),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.glWrapT),0===this.width||0===this.height||this.isSrcMediaElement&&!this.src.loadedmetadata){var r=new Uint8Array([1,1,1,1]);t.texImage2D(this.glTarget,0,t.RGBA,1,1,0,this.glFormat,t.UNSIGNED_BYTE,r)}else t.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,t.UNSIGNED_BYTE,e)},o.Texture.prototype.update=function(){var e=this.src;if(0===e.width||0===e.height)return!1;var t=this._getTextureDataFromSource(),r=!1,a=this._renderer.GL;return t.width!==this.width||t.height!==this.height?(r=!0,this.width=t.width,this.height=t.height,this.isSrcP5Image?e.setModified(!1):(this.isSrcMediaElement||this.isSrcHTMLElement)&&e.setModified(!0)):this.isSrcP5Image?e.isModified()&&(r=!0,e.setModified(!1)):this.isSrcMediaElement?e.isModified()?(r=!0,e.setModified(!1)):e.loadedmetadata&&this._videoPrevUpdateTime!==e.time()&&(this._videoPrevUpdateTime=e.time(),r=!0):this.isImageData?e._dirty&&(e._dirty=!1,r=!0):r=!0,r&&(this.bindTexture(),a.texImage2D(this.glTarget,0,this.glFormat,this.glFormat,a.UNSIGNED_BYTE,t)),r},o.Texture.prototype.bindTexture=function(){return this._renderer.GL.bindTexture(this.glTarget,this.glTex),this},o.Texture.prototype.unbindTexture=function(){this._renderer.GL.bindTexture(this.glTarget,null)},o.Texture.prototype.setInterpolation=function(e,t){var r=this._renderer.GL;this.glMinFilter=e===n.NEAREST?r.NEAREST:r.LINEAR,this.glMagFilter=t===n.NEAREST?r.NEAREST:r.LINEAR,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,this.glMinFilter),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,this.glMagFilter),this.unbindTexture()},o.Texture.prototype.setWrapMode=function(e,t){var r=this._renderer.GL,a=function(e){return 0==(e&e-1)},o=a(this.width),i=a(this.width);e===n.REPEAT?o&&i?this.glWrapS=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):e===n.MIRROR?o&&i?this.glWrapS=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapS=r.CLAMP_TO_EDGE):this.glWrapS=r.CLAMP_TO_EDGE,t===n.REPEAT?o&&i?this.glWrapT=r.REPEAT:(console.warn("You tried to set the wrap mode to REPEAT but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):t===n.MIRROR?o&&i?this.glWrapT=r.MIRRORED_REPEAT:(console.warn("You tried to set the wrap mode to MIRROR but the texture size is not a power of two. Setting to CLAMP instead"),this.glWrapT=r.CLAMP_TO_EDGE):this.glWrapT=r.CLAMP_TO_EDGE,this.bindTexture(),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,this.glWrapS),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,this.glWrapT),this.unbindTexture()},r.exports=o.Texture},{"../core/constants":18,"../core/main":24}],77:[function(t){function r(e,t){this.width=e,this.height=t,this.infos=[],this.findImage=function(t){var r=this.width*this.height;if(t>r)throw new Error("font is too complex to render in 3D");for(var a=this.infos.length-1,o,n,s;0<=a;--a)if(s=this.infos[a],s.index+t<r){o=s,n=s.imageData;break}if(!o){try{n=new ImageData(this.width,this.height)}catch(e){var l=document.getElementsByTagName("canvas")[0],p=!l;l||(l=document.createElement("canvas"),l.style.display="none",document.body.appendChild(l));var u=l.getContext("2d");u&&(n=u.createImageData(this.width,this.height)),p&&document.body.removeChild(l)}o={index:0,imageData:n},this.infos.push(o)}var i=o.index;return o.index+=t,n._dirty=!0,{imageData:n,index:i}}}function i(t,r,a,o,n){var e=t.imageData,i=e.data,s=4*t.index++;i[s++]=r,i[s++]=a,i[s++]=o,i[s++]=n}var m=t("../core/main"),e=t("../core/constants");t("./p5.Shader"),t("./p5.RendererGL"),m.RendererGL.prototype._applyTextProperties=function(){},m.RendererGL.prototype.textWidth=function(e){return this._isOpenType()?this._textFont._textWidth(e,this._textSize):0};var a=Z(3),o=function(e){this.font=e,this.strokeImageInfos=new r(64,64),this.colDimImageInfos=new r(64,64),this.rowDimImageInfos=new r(64,64),this.colCellImageInfos=new r(64,64),this.rowCellImageInfos=new r(64,64),this.glyphInfos={},this.getGlyphInfo=function(e){function p(t,r,a){function i(t,r,a){for(var o=t.length,n;0<o--;)n=t[o],r>n&&(r=n),a<n&&(a=n);return{min:r,max:a}}var s=u.length;u.push(a);for(var e=i(t,1,0),p=T(S(e.min*9),0),d=U(v(e.max*9),9),c=p;c<d;++c)x[c].push(s);for(var h=i(r,1,0),l=T(S(h.min*9),0),m=U(v(h.max*9),9),n=l;n<m;++n)w[n].push(s)}function h(e,t,r){return e<t?t:e>r?r:e}function c(e){return h(255*e,0,255)}function f(e,t,r,a){this.p0=e,this.c0=t,this.c1=r,this.p1=a,this.toQuadratic=function(){return{x:this.p0.x,y:this.p0.y,x1:this.p1.x,y1:this.p1.y,cx:(3*(this.c0.x+this.c1.x)-(this.p0.x+this.p1.x))/4,cy:(3*(this.c0.y+this.c1.y)-(this.p0.y+this.p1.y))/4}},this.quadError=function(){return m.Vector.sub(m.Vector.sub(this.p1,this.p0),m.Vector.mult(m.Vector.sub(this.c1,this.c0),3)).mag()/2},this.split=function(t){var r=m.Vector.lerp(this.p0,this.c0,t),a=m.Vector.lerp(this.c0,this.c1,t),o=m.Vector.lerp(r,a,t);this.c1=m.Vector.lerp(this.c1,this.p1,t),this.c0=m.Vector.lerp(a,this.c1,t);var n=m.Vector.lerp(o,this.c0,t),e=new f(this.p0,r,o,n);return this.p0=n,e},this.splitInflections=function(){var t=m.Vector.sub(this.c0,this.p0),r=m.Vector.sub(m.Vector.sub(this.c1,this.c0),t),a=m.Vector.sub(m.Vector.sub(m.Vector.sub(this.p1,this.c1),t),m.Vector.mult(r,2)),o=[],n=r.x*a.y-r.y*a.x;if(0!=n){var s=t.x*a.y-t.y*a.x,p=t.x*r.y-t.y*r.x,d=s*s-4*n*p;if(0<=d){0>n&&(n=-n,s=-s,p=-p);var i=Z(d),c=(-s-i)/(2*n),u=(-s+i)/(2*n);0<c&&1>c&&(o.push(this.split(c)),u=1-(1-u)/(1-c)),0<u&&1>u&&o.push(this.split(u))}}return o.push(this),o}}function d(p,g,y,c,d,e,h,i){for(var _=new f(new m.Vector(p,g),new m.Vector(y,c),new m.Vector(d,e),new m.Vector(h,i)).splitInflections(),b=[],l=0;l<_.length;l++){for(var x=_[l],v=[],r;!(.125<=(r=30/a/x.quadError()));){var S=te(r,1/3),s=x.split(S),t=x.split(1-S/(1-S));b.push(s),v.push(x),x=t}1>r&&b.push(x.split(.5)),b.push(x),Array.prototype.push.apply(b,v.reverse())}return b}function g(t,r,a,o){p([t,a],[r,o],{x:t,y:r,cx:(t+a)/2,cy:(r+o)/2})}function b(e,t,r,a){return 1e-5>_(r-e)&&1e-5>_(a-t)}function l(e,t,r){for(var a=e.length,s=t.findImage(a),d=s.index,c=0,u=0;u<a;++u)c+=e[u].length;for(var g=r.findImage(c),y=0;y<a;++y){var f=e[y],l=f.length,m=g.index;i(s,m>>7,127&m,l>>7,127&l);for(var n=0,_;n<l;++n)_=f[n]+R,i(g,_>>7,127&_,0,0)}return{cellImageInfo:g,dimOffset:d,dimImageInfo:s}}var k=this.glyphInfos[e.index];if(k)return k;var V=e.getBoundingBox(),o=V.x1,W=V.y1,r=V.x2-o,s=V.y2-W,t=e.path.commands;if(0==r||0==s||!t.length)return this.glyphInfos[e.index]={};var u=[],w=[],x=[],y;for(y=8;0<=y;--y)x.push([]);for(y=8;0<=y;--y)w.push([]);for(var j=0,Y,X,q,$;j<t.length;++j){var ee=t[j],E=(ee.x-o)/r,F=(ee.y-W)/s;if(!b(Y,X,E,F)){switch(ee.type){case"M":q=E,$=F;break;case"L":g(Y,X,E,F);break;case"Q":var G=(ee.x1-o)/r,H=(ee.y1-W)/s;p([Y,E,G],[X,F,H],{x:Y,y:X,cx:G,cy:H});break;case"Z":b(Y,X,q,$)?u.push({x:Y,y:X}):(g(Y,X,q,$),u.push({x:q,y:$}));break;case"C":for(var I=(ee.x1-o)/r,J=(ee.y1-W)/s,K=(ee.x2-o)/r,L=(ee.y2-W)/s,M=d(Y,X,I,J,K,L,E,F),N=0,re;N<M.length;N++)re=M[N].toQuadratic(),p([re.x,re.x1,re.cx],[re.y,re.y1,re.cy],re);break;default:throw new Error("unknown command type: "+ee.type);}Y=E,X=F}}for(var ae=u.length,Q=this.strokeImageInfos.findImage(ae),R=Q.index,oe=0,ne;oe<ae;++oe)ne=u[oe],i(Q,c(ne.x),c(ne.y),c(ne.cx),c(ne.cy));return k=this.glyphInfos[e.index]={glyph:e,uGlyphRect:[V.x1,-V.y1,V.x2,-V.y2],strokeImageInfo:Q,strokes:u,colInfo:l(x,this.colDimImageInfos,this.colCellImageInfos),rowInfo:l(w,this.rowDimImageInfos,this.rowCellImageInfos)},k.uGridOffset=[k.colInfo.dimOffset,k.rowInfo.dimOffset],k}};m.RendererGL.prototype._renderText=function(n,a,i,l,d){if(!(l>=d)&&this._doFill){if(!this._isOpenType())return console.log("WEBGL: only opentype fonts are supported"),n;n.push();var c=this.curFillShader,p=this._doStroke,r=this.drawMode;this.curFillShader=null,this._doStroke=!1,this.drawMode=e.TEXTURE;var s=this._textFont.font,t=this._textFont._fontInfo;t||(t=this._textFont._fontInfo=new o(s));var h=this._textFont._handleAlignment(this,a,i,l),g=this._textSize,f=g/s.unitsPerEm;this.translate(h.x,h.y,0),this.scale(f,f,1);var _=this.GL,y=!this._defaultFontShader,b=this.setFillShader(this._getFontShader());y&&(b.setUniform("uGridImageSize",[64,64]),b.setUniform("uCellsImageSize",[64,64]),b.setUniform("uStrokeImageSize",[64,64]),b.setUniform("uGridSize",[9,9])),this._applyColorBlend(this.curFillColor);var x=this.gHash.glyph;if(!x){var v=this._textGeom=new m.Geometry(1,1,function(){for(var e=0;1>=e;e++)for(var t=0;1>=t;t++)this.vertices.push(new m.Vector(t,e,0)),this.uvs.push(t,e)});v.computeFaces().computeNormals(),x=this.createBuffers("glyph",v)}this._bindBuffer(x.vertexBuffer,_.ARRAY_BUFFER),b.enableAttrib(b.attributes.aPosition.location,3,_.FLOAT,!1,0,0),this._bindBuffer(x.indexBuffer,_.ELEMENT_ARRAY_BUFFER),this._bindBuffer(x.uvBuffer,_.ARRAY_BUFFER),b.enableAttrib(b.attributes.aTexCoord.location,2,_.FLOAT,!1,0,0),b.setUniform("uMaterialColor",this.curFillColor);try{for(var S=0,T=null,C=!1,R=s.stringToGlyphs(a),P=0,w;P<R.length;++P){w=R[P],T&&(S+=s.getKerningValue(T,w));var M=t.getGlyphInfo(w);if(M.uGlyphRect){var k=M.rowInfo,A=M.colInfo;b.setUniform("uSamplerStrokes",M.strokeImageInfo.imageData),b.setUniform("uSamplerRowStrokes",k.cellImageInfo.imageData),b.setUniform("uSamplerRows",k.dimImageInfo.imageData),b.setUniform("uSamplerColStrokes",A.cellImageInfo.imageData),b.setUniform("uSamplerCols",A.dimImageInfo.imageData),b.setUniform("uGridOffset",M.uGridOffset),b.setUniform("uGlyphRect",M.uGlyphRect),b.setUniform("uGlyphOffset",S),C?b.bindTextures():(C=!0,b.bindShader()),_.drawElements(_.TRIANGLES,6,this.GL.UNSIGNED_SHORT,0)}S+=w.advanceWidth,T=w}}finally{b.unbindShader(),this.curFillShader=c,this._doStroke=p,this.drawMode=r,n.pop()}return this._pInst._pixelsDirty=!0,n}}},{"../core/constants":18,"../core/main":24,"./p5.RendererGL":74,"./p5.Shader":75}]},{},[13])(13)})}),p5=unwrapExports(p5_min),script={props:{background:{type:String,default:"#000000"},images:{type:Array,required:!0},placeholder:{type:String,default:null},width:{type:String,default:"100%"},height:{type:String,default:"100%"},ratio:{type:Number,default:1.25},rowMin:{type:Number,default:3},rowMax:{type:Number,default:9},itemWidth:{type:Number,default:180},speed:{type:Number,default:1},spacing:{type:Number,default:3},angle:{type:Number,default:.2*Math.PI}},watch:{images:function(){this.loadTextures(),this.computeTiles()}},created:function(){this.sketch=null,this.textures=[],this.tiles=[],this.columns=0,this.rows=0,this.tileWidth=0,this.tileHeight=0,this.placeholderTexture=null,this.context=null,this.backgroundColor=null,this.shader=null},mounted:function(){window.addEventListener("resize",this.onResize),this.setup()},destroyed:function(){window.removeEventListener("resize",this.onResize),this.sketch&&this.sketch.remove()},methods:{setup:function(){var e=this;return new Promise(function(t){var r=e.$el.getBoundingClientRect();return new p5(function(t){e.sketch=t,t.setup=function(){e.sketch.createCanvas(r.width,r.height,e.sketch.WEBGL),e.loadTextures(),e.computeTiles(),e.backgroundColor=e.sketch.color(e.background),e.sketch.fill(0,0,0,0)},t.draw=function(){e.onFrame()}},e.$el),t()})},loadTextures:function(){this.placeholder&&(this.placeholderTexture=this.sketch.loadImage(this.placeholder)),this.textures.length=0;for(var e=0,t=this.images,r;e<t.length;e+=1)r=t[e],this.textures.push(this.sketch.loadImage(r,function(e){return e.complete=!0}))},computeTiles:function(){var e=Math.ceil,t=Math.floor,r=e(this.sketch.width/this.itemWidth),a=Math.max(this.rowMin,Math.min(this.rowMax,r)),o=(this.sketch.width-(a-1)*this.spacing)/a,n=o*this.ratio,s=e(this.sketch.height/(n+this.spacing))+2;if(a!==this.columns||s!==this.rows){this.tiles.length=0,this.columns=a,this.rows=s,this.tileWidth=o,this.tileHeight=n;for(var l=0;l<this.columns*this.rows;l++)this.tiles.push({opacity:0,texture:this.textures[t(Math.random()*this.textures.length)]})}},onFrame:function(){var e=Math.abs,t=Math.floor,r=Math.min,a=this.sketch;for(var o in a.push(),a.translate(0,-a.height/2),a.background(this.background),this.tiles){var n=this.tiles[o],i=o%this.columns-(this.columns-1)/2,s=(t(o/this.columns)+15e-5*(a.millis()*this.speed))%this.rows-1;a.push(),a.rotateX(this.angle),a.translate(i*this.tileWidth+i*this.spacing,s*this.tileHeight+s*this.spacing),n.texture.complete&&255>n.opacity&&(n.opacity=r(255,n.opacity+5)),128>n.opacity&&this.placeholder&&(a.texture(this.placeholderTexture),a.plane(this.tileWidth,this.tileHeight)),128<=n.opacity&&(a.texture(n.texture),a.plane(this.tileWidth,this.tileHeight)),a.translate(0,0,.05),255>n.opacity&&(a.ambientMaterial(this.backgroundColor.levels[0],this.backgroundColor.levels[1],this.backgroundColor.levels[2],255-e(2*n.opacity-255)),a.plane(this.tileWidth+this.spacing,this.tileHeight+this.spacing)),a.pop()}a.pop()},onResize:function(){var e=this;this.$nextTick(function(){if(e.sketch){var t=e.$el.getBoundingClientRect();e.sketch.resizeCanvas(t.width,t.height),e.computeTiles()}})}}},__vue_script__=script,__vue_render__=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"vue-starwars",style:{width:e.width,height:e.height,background:e.background}})},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;var __vue_inject_styles__=function(e){e&&e("data-v-6ab923ca_0",{source:".vue-starwars:after {\n  position: absolute;\n  content: '';\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.85) 0%, transparent 33%);\n}\n.vue-starwars canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0;\n}\n\n/*# sourceMappingURL=starwars.vue.map */",map:{version:3,sources:["/Users/nick/projects/vue-starwars/src/starwars.vue","starwars.vue"],names:[],mappings:"AAiPA;EAGA,mBAAA;EACA,YAAA;EACA,OAAA;EAAA,QAAA;EAAA,SAAA;EAAA,UAAA;EACA,gFAAA;CACA;AAPA;EAUA,mBAAA;EACA,QAAA;EACA,OAAA;EACA,SAAA;EACA,UAAA;CACA;;AChPA,wCAAwC",file:"starwars.vue",sourcesContent:[null,".vue-starwars:after {\n  position: absolute;\n  content: '';\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.85) 0%, transparent 33%); }\n\n.vue-starwars canvas {\n  position: absolute;\n  left: 0;\n  top: 0;\n  right: 0;\n  bottom: 0; }\n\n/*# sourceMappingURL=starwars.vue.map */"]},media:void 0})},__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;function __vue_normalize__(e,t,r,a,o,n,i){var s=("function"==typeof r?r.options:r)||{};s.__file="/Users/nick/projects/vue-starwars/src/starwars.vue",s.render||(s.render=e.render,s.staticRenderFns=e.staticRenderFns,s._compiled=!0,o&&(s.functional=!0)),s._scopeId=a;{var l;if(t&&(l=function(e){t.call(this,i(e))}),void 0!=l)if(s.functional){var p=s.render;s.render=function(e,t){return l.call(t),p(e,t)}}else{var d=s.beforeCreate;s.beforeCreate=d?[].concat(d,l):[l]}}return s}function __vue_create_injector__(){var e=document.head||document.getElementsByTagName("head")[0],t=__vue_create_injector__.styles||(__vue_create_injector__.styles={}),r="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());return function(a,o){if(!document.querySelector("style[data-vue-ssr-id~=\""+a+"\"]")){var n=r?o.media||"default":a,i=t[n]||(t[n]={ids:[],parts:[],element:void 0});if(!i.ids.includes(a)){var s=o.source,l=i.ids.length;if(i.ids.push(a),r&&(i.element=i.element||document.querySelector("style[data-group="+n+"]")),!i.element){var p=i.element=document.createElement("style");p.type="text/css",o.media&&p.setAttribute("media",o.media),r&&(p.setAttribute("data-group",n),p.setAttribute("data-next-index","0")),e.appendChild(p)}if(r&&(l=parseInt(i.element.getAttribute("data-next-index")),i.element.setAttribute("data-next-index",l+1)),i.element.styleSheet)i.parts.push(s),i.element.styleSheet.cssText=i.parts.filter(Boolean).join("\n");else{var d=document.createTextNode(s),c=i.element.childNodes;c[l]&&i.element.removeChild(c[l]),c.length?i.element.insertBefore(d,c[l]):i.element.appendChild(d)}}}}}var starwars=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},__vue_inject_styles__,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,__vue_create_injector__,void 0);export default starwars;
